var BX=Object.create;var{getPrototypeOf:$X,defineProperty:Sf,getOwnPropertyNames:kJ,getOwnPropertyDescriptor:OX}=Object,xJ=Object.prototype.hasOwnProperty;var mJ=(f,v,P)=>{P=f!=null?BX($X(f)):{};let J=v||!f||!f.__esModule?Sf(P,"default",{value:f,enumerable:!0}):P;for(let Q of kJ(f))if(!xJ.call(J,Q))Sf(J,Q,{get:()=>f[Q],enumerable:!0});return J},_J=new WeakMap,NX=(f)=>{var v=_J.get(f),P;if(v)return v;if(v=Sf({},"__esModule",{value:!0}),f&&typeof f==="object"||typeof f==="function")kJ(f).map((J)=>!xJ.call(v,J)&&Sf(v,J,{get:()=>f[J],enumerable:!(P=OX(f,J))||P.enumerable}));return _J.set(f,v),v},z=(f,v)=>()=>(v||f((v={exports:{}}).exports,v),v.exports);var HX=(f,v)=>{for(var P in v)Sf(f,P,{get:v[P],enumerable:!0,configurable:!0,set:(J)=>v[P]=()=>J})};var cJ=z((Rv)=>{var LX=Rv&&Rv.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),MX=Rv&&Rv.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),AX=Rv&&Rv.__importStar||function(){var f=function(v){return f=Object.getOwnPropertyNames||function(P){var J=[];for(var Q in P)if(Object.prototype.hasOwnProperty.call(P,Q))J[J.length]=Q;return J},f(v)};return function(v){if(v&&v.__esModule)return v;var P={};if(v!=null){for(var J=f(v),Q=0;Q<J.length;Q++)if(J[Q]!=="default")LX(P,v,J[Q])}return MX(P,v),P}}();Object.defineProperty(Rv,"__esModule",{value:!0});Rv.TempFileProvider=void 0;var Yv=AX(require("vscode"));function nJ(f){if(!f.includes("\\"))return f;if(f.startsWith("\\\\"))return"/"+f.substring(2).replace(/\\/g,"/");if(/^[a-zA-Z]:/.test(f))f=f.replace(/^([a-zA-Z]):/,(v,P)=>"/"+P.toLowerCase()+":");return f.replace(/\\/g,"/")}class aJ{uri;contents;type=Yv.FileType.File;ctime;modifiedTime;constructor(f,v){this.uri=f,this.contents=v,this.ctime=this.modifiedTime=Date.now()}get mtime(){return this.modifiedTime}get size(){return this.data.length}get data(){return this.contents}write(f){this.modifiedTime=Date.now(),this.contents=f,this.emitter.fire()}emitter=new Yv.EventEmitter;onDidSave=this.emitter.event}class rJ{scheme;documents=new Map;constructor(f){this.scheme=f}createFile(f,v){let P=f;if(process.platform==="win32")P=nJ(f);let J=Yv.Uri.from({scheme:this.scheme,path:P}),Q=this.documents.get(J.path);if(Q)return this.writeFile(J,new TextEncoder().encode(v)),Q;return Q=new aJ(J,new TextEncoder().encode(v)),this.documents.set(J.path,Q),Q}emitter=new Yv.EventEmitter;onDidChangeFile=this.emitter.event;watch(f){return new Yv.Disposable(()=>{})}stat(f){return this.find(f)}find(f){let v=f.path;if(process.platform==="win32")v=nJ(f.path);let P=this.documents.get(v);if(!P)throw Yv.FileSystemError.FileNotFound(f);return P}readDirectory(f){throw Yv.FileSystemError.FileNotFound(f)}readFile(f){let v=this.find(f).data;if(v)return v;throw Yv.FileSystemError.FileNotFound(f)}writeFile(f,v){this.find(f).write(v),this.emitter.fire([{type:Yv.FileChangeType.Changed,uri:f}])}createDirectory(f){throw Yv.FileSystemError.Unavailable()}delete(f){throw Yv.FileSystemError.Unavailable()}rename(f,v,P){throw Yv.FileSystemError.Unavailable()}}Rv.TempFileProvider=rJ});var Uf=z((N1)=>{Object.defineProperty(N1,"__esModule",{value:!0});N1.getParsedType=N1.ZodParsedType=N1.objectUtil=N1.util=void 0;var xP;(function(f){f.assertEqual=(Q)=>{};function v(Q){}f.assertIs=v;function P(Q){throw new Error}f.assertNever=P,f.arrayToEnum=(Q)=>{let Y={};for(let X of Q)Y[X]=X;return Y},f.getValidEnumValues=(Q)=>{let Y=f.objectKeys(Q).filter((q)=>typeof Q[Q[q]]!=="number"),X={};for(let q of Y)X[q]=Q[q];return f.objectValues(X)},f.objectValues=(Q)=>{return f.objectKeys(Q).map(function(Y){return Q[Y]})},f.objectKeys=typeof Object.keys==="function"?(Q)=>Object.keys(Q):(Q)=>{let Y=[];for(let X in Q)if(Object.prototype.hasOwnProperty.call(Q,X))Y.push(X);return Y},f.find=(Q,Y)=>{for(let X of Q)if(Y(X))return X;return},f.isInteger=typeof Number.isInteger==="function"?(Q)=>Number.isInteger(Q):(Q)=>typeof Q==="number"&&Number.isFinite(Q)&&Math.floor(Q)===Q;function J(Q,Y=" | "){return Q.map((X)=>typeof X==="string"?`'${X}'`:X).join(Y)}f.joinValues=J,f.jsonStringifyReplacer=(Q,Y)=>{if(typeof Y==="bigint")return Y.toString();return Y}})(xP||(N1.util=xP={}));var iJ;(function(f){f.mergeShapes=(v,P)=>{return{...v,...P}}})(iJ||(N1.objectUtil=iJ={}));N1.ZodParsedType=xP.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);var FX=(f)=>{switch(typeof f){case"undefined":return N1.ZodParsedType.undefined;case"string":return N1.ZodParsedType.string;case"number":return Number.isNaN(f)?N1.ZodParsedType.nan:N1.ZodParsedType.number;case"boolean":return N1.ZodParsedType.boolean;case"function":return N1.ZodParsedType.function;case"bigint":return N1.ZodParsedType.bigint;case"symbol":return N1.ZodParsedType.symbol;case"object":if(Array.isArray(f))return N1.ZodParsedType.array;if(f===null)return N1.ZodParsedType.null;if(f.then&&typeof f.then==="function"&&f.catch&&typeof f.catch==="function")return N1.ZodParsedType.promise;if(typeof Map!=="undefined"&&f instanceof Map)return N1.ZodParsedType.map;if(typeof Set!=="undefined"&&f instanceof Set)return N1.ZodParsedType.set;if(typeof Date!=="undefined"&&f instanceof Date)return N1.ZodParsedType.date;return N1.ZodParsedType.object;default:return N1.ZodParsedType.unknown}};N1.getParsedType=FX});var qQ=z((tv)=>{Object.defineProperty(tv,"__esModule",{value:!0});tv.ZodError=tv.quotelessJson=tv.ZodIssueCode=void 0;var dJ=Uf();tv.ZodIssueCode=dJ.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);var hX=(f)=>{return JSON.stringify(f,null,2).replace(/"([^"]+)":/g,"$1:")};tv.quotelessJson=hX;class gf extends Error{get errors(){return this.issues}constructor(f){super();this.issues=[],this.addIssue=(P)=>{this.issues=[...this.issues,P]},this.addIssues=(P=[])=>{this.issues=[...this.issues,...P]};let v=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,v);else this.__proto__=v;this.name="ZodError",this.issues=f}format(f){let v=f||function(Q){return Q.message},P={_errors:[]},J=(Q)=>{for(let Y of Q.issues)if(Y.code==="invalid_union")Y.unionErrors.map(J);else if(Y.code==="invalid_return_type")J(Y.returnTypeError);else if(Y.code==="invalid_arguments")J(Y.argumentsError);else if(Y.path.length===0)P._errors.push(v(Y));else{let X=P,q=0;while(q<Y.path.length){let G=Y.path[q];if(q!==Y.path.length-1)X[G]=X[G]||{_errors:[]};else X[G]=X[G]||{_errors:[]},X[G]._errors.push(v(Y));X=X[G],q++}}};return J(this),P}static assert(f){if(!(f instanceof gf))throw new Error(`Not a ZodError: ${f}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,dJ.util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(f=(v)=>v.message){let v={},P=[];for(let J of this.issues)if(J.path.length>0){let Q=J.path[0];v[Q]=v[Q]||[],v[Q].push(f(J))}else P.push(f(J));return{formErrors:P,fieldErrors:v}}get formErrors(){return this.flatten()}}tv.ZodError=gf;gf.create=(f)=>{return new gf(f)}});var nP=z((mP)=>{Object.defineProperty(mP,"__esModule",{value:!0});var u1=qQ(),h0=Uf(),wX=(f,v)=>{let P;switch(f.code){case u1.ZodIssueCode.invalid_type:if(f.received===h0.ZodParsedType.undefined)P="Required";else P=`Expected ${f.expected}, received ${f.received}`;break;case u1.ZodIssueCode.invalid_literal:P=`Invalid literal value, expected ${JSON.stringify(f.expected,h0.util.jsonStringifyReplacer)}`;break;case u1.ZodIssueCode.unrecognized_keys:P=`Unrecognized key(s) in object: ${h0.util.joinValues(f.keys,", ")}`;break;case u1.ZodIssueCode.invalid_union:P="Invalid input";break;case u1.ZodIssueCode.invalid_union_discriminator:P=`Invalid discriminator value. Expected ${h0.util.joinValues(f.options)}`;break;case u1.ZodIssueCode.invalid_enum_value:P=`Invalid enum value. Expected ${h0.util.joinValues(f.options)}, received '${f.received}'`;break;case u1.ZodIssueCode.invalid_arguments:P="Invalid function arguments";break;case u1.ZodIssueCode.invalid_return_type:P="Invalid function return type";break;case u1.ZodIssueCode.invalid_date:P="Invalid date";break;case u1.ZodIssueCode.invalid_string:if(typeof f.validation==="object")if("includes"in f.validation){if(P=`Invalid input: must include "${f.validation.includes}"`,typeof f.validation.position==="number")P=`${P} at one or more positions greater than or equal to ${f.validation.position}`}else if("startsWith"in f.validation)P=`Invalid input: must start with "${f.validation.startsWith}"`;else if("endsWith"in f.validation)P=`Invalid input: must end with "${f.validation.endsWith}"`;else h0.util.assertNever(f.validation);else if(f.validation!=="regex")P=`Invalid ${f.validation}`;else P="Invalid";break;case u1.ZodIssueCode.too_small:if(f.type==="array")P=`Array must contain ${f.exact?"exactly":f.inclusive?"at least":"more than"} ${f.minimum} element(s)`;else if(f.type==="string")P=`String must contain ${f.exact?"exactly":f.inclusive?"at least":"over"} ${f.minimum} character(s)`;else if(f.type==="number")P=`Number must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${f.minimum}`;else if(f.type==="bigint")P=`Number must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${f.minimum}`;else if(f.type==="date")P=`Date must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(f.minimum))}`;else P="Invalid input";break;case u1.ZodIssueCode.too_big:if(f.type==="array")P=`Array must contain ${f.exact?"exactly":f.inclusive?"at most":"less than"} ${f.maximum} element(s)`;else if(f.type==="string")P=`String must contain ${f.exact?"exactly":f.inclusive?"at most":"under"} ${f.maximum} character(s)`;else if(f.type==="number")P=`Number must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`;else if(f.type==="bigint")P=`BigInt must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`;else if(f.type==="date")P=`Date must be ${f.exact?"exactly":f.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(f.maximum))}`;else P="Invalid input";break;case u1.ZodIssueCode.custom:P="Invalid input";break;case u1.ZodIssueCode.invalid_intersection_types:P="Intersection results could not be merged";break;case u1.ZodIssueCode.not_multiple_of:P=`Number must be a multiple of ${f.multipleOf}`;break;case u1.ZodIssueCode.not_finite:P="Number must be finite";break;default:P=v.defaultError,h0.util.assertNever(f)}return{message:P}};mP.default=wX});var GQ=z((ov)=>{var IX=ov&&ov.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(ov,"__esModule",{value:!0});ov.defaultErrorMap=void 0;ov.setErrorMap=RX;ov.getErrorMap=EX;var pJ=IX(nP());ov.defaultErrorMap=pJ.default;var sJ=pJ.default;function RX(f){sJ=f}function EX(){return sJ}});var rP=z((B1)=>{var yX=B1&&B1.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(B1,"__esModule",{value:!0});B1.isAsync=B1.isValid=B1.isDirty=B1.isAborted=B1.OK=B1.DIRTY=B1.INVALID=B1.ParseStatus=B1.EMPTY_PATH=B1.makeIssue=void 0;B1.addIssueToContext=UX;var zX=GQ(),tJ=yX(nP()),SX=(f)=>{let{data:v,path:P,errorMaps:J,issueData:Q}=f,Y=[...P,...Q.path||[]],X={...Q,path:Y};if(Q.message!==void 0)return{...Q,path:Y,message:Q.message};let q="",G=J.filter((V)=>!!V).slice().reverse();for(let V of G)q=V(X,{data:v,defaultError:q}).message;return{...Q,path:Y,message:q}};B1.makeIssue=SX;B1.EMPTY_PATH=[];function UX(f,v){let P=zX.getErrorMap(),J=B1.makeIssue({issueData:v,data:f.data,path:f.path,errorMaps:[f.common.contextualErrorMap,f.schemaErrorMap,P,P===tJ.default?void 0:tJ.default].filter((Q)=>!!Q)});f.common.issues.push(J)}class aP{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(f,v){let P=[];for(let J of v){if(J.status==="aborted")return B1.INVALID;if(J.status==="dirty")f.dirty();P.push(J.value)}return{status:f.value,value:P}}static async mergeObjectAsync(f,v){let P=[];for(let J of v){let Q=await J.key,Y=await J.value;P.push({key:Q,value:Y})}return aP.mergeObjectSync(f,P)}static mergeObjectSync(f,v){let P={};for(let J of v){let{key:Q,value:Y}=J;if(Q.status==="aborted")return B1.INVALID;if(Y.status==="aborted")return B1.INVALID;if(Q.status==="dirty")f.dirty();if(Y.status==="dirty")f.dirty();if(Q.value!=="__proto__"&&(typeof Y.value!=="undefined"||J.alwaysSet))P[Q.value]=Y.value}return{status:f.value,value:P}}}B1.ParseStatus=aP;B1.INVALID=Object.freeze({status:"aborted"});var gX=(f)=>({status:"dirty",value:f});B1.DIRTY=gX;var jX=(f)=>({status:"valid",value:f});B1.OK=jX;var CX=(f)=>f.status==="aborted";B1.isAborted=CX;var ZX=(f)=>f.status==="dirty";B1.isDirty=ZX;var TX=(f)=>f.status==="valid";B1.isValid=TX;var bX=(f)=>typeof Promise!=="undefined"&&f instanceof Promise;B1.isAsync=bX});var eJ=z((oJ)=>{Object.defineProperty(oJ,"__esModule",{value:!0})});var f9=z((WQ)=>{Object.defineProperty(WQ,"__esModule",{value:!0});WQ.errorUtil=void 0;var v9;(function(f){f.errToObj=(v)=>typeof v==="string"?{message:v}:v||{},f.toString=(v)=>typeof v==="string"?v:v?.message})(v9||(WQ.errorUtil=v9={}))});var B9=z((h)=>{Object.defineProperty(h,"__esModule",{value:!0});h.discriminatedUnion=h.date=h.boolean=h.bigint=h.array=h.any=h.coerce=h.ZodFirstPartyTypeKind=h.late=h.ZodSchema=h.Schema=h.ZodReadonly=h.ZodPipeline=h.ZodBranded=h.BRAND=h.ZodNaN=h.ZodCatch=h.ZodDefault=h.ZodNullable=h.ZodOptional=h.ZodTransformer=h.ZodEffects=h.ZodPromise=h.ZodNativeEnum=h.ZodEnum=h.ZodLiteral=h.ZodLazy=h.ZodFunction=h.ZodSet=h.ZodMap=h.ZodRecord=h.ZodTuple=h.ZodIntersection=h.ZodDiscriminatedUnion=h.ZodUnion=h.ZodObject=h.ZodArray=h.ZodVoid=h.ZodNever=h.ZodUnknown=h.ZodAny=h.ZodNull=h.ZodUndefined=h.ZodSymbol=h.ZodDate=h.ZodBoolean=h.ZodBigInt=h.ZodNumber=h.ZodString=h.ZodType=void 0;h.NEVER=h.void=h.unknown=h.union=h.undefined=h.tuple=h.transformer=h.symbol=h.string=h.strictObject=h.set=h.record=h.promise=h.preprocess=h.pipeline=h.ostring=h.optional=h.onumber=h.oboolean=h.object=h.number=h.nullable=h.null=h.never=h.nativeEnum=h.nan=h.map=h.literal=h.lazy=h.intersection=h.instanceof=h.function=h.enum=h.effect=void 0;h.datetimeRegex=X9;h.custom=G9;var u=qQ(),DQ=GQ(),r=f9(),w=rP(),l=Uf();class Hv{constructor(f,v,P,J){this._cachedPath=[],this.parent=f,this.data=v,this._path=P,this._key=J}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var Q9=(f,v)=>{if(w.isValid(v))return{success:!0,data:v.value};else{if(!f.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let P=new u.ZodError(f.common.issues);return this._error=P,this._error}}}};function t(f){if(!f)return{};let{errorMap:v,invalid_type_error:P,required_error:J,description:Q}=f;if(v&&(P||J))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(v)return{errorMap:v,description:Q};return{errorMap:(X,q)=>{let{message:G}=f;if(X.code==="invalid_enum_value")return{message:G??q.defaultError};if(typeof q.data==="undefined")return{message:G??J??q.defaultError};if(X.code!=="invalid_type")return{message:q.defaultError};return{message:G??P??q.defaultError}},description:Q}}class e{get description(){return this._def.description}_getType(f){return l.getParsedType(f.data)}_getOrReturnCtx(f,v){return v||{common:f.parent.common,data:f.data,parsedType:l.getParsedType(f.data),schemaErrorMap:this._def.errorMap,path:f.path,parent:f.parent}}_processInputParams(f){return{status:new w.ParseStatus,ctx:{common:f.parent.common,data:f.data,parsedType:l.getParsedType(f.data),schemaErrorMap:this._def.errorMap,path:f.path,parent:f.parent}}}_parseSync(f){let v=this._parse(f);if(w.isAsync(v))throw new Error("Synchronous parse encountered promise.");return v}_parseAsync(f){let v=this._parse(f);return Promise.resolve(v)}parse(f,v){let P=this.safeParse(f,v);if(P.success)return P.data;throw P.error}safeParse(f,v){let P={common:{issues:[],async:v?.async??!1,contextualErrorMap:v?.errorMap},path:v?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:l.getParsedType(f)},J=this._parseSync({data:f,path:P.path,parent:P});return Q9(P,J)}"~validate"(f){let v={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:l.getParsedType(f)};if(!this["~standard"].async)try{let P=this._parseSync({data:f,path:[],parent:v});return w.isValid(P)?{value:P.value}:{issues:v.common.issues}}catch(P){if(P?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;v.common={issues:[],async:!0}}return this._parseAsync({data:f,path:[],parent:v}).then((P)=>w.isValid(P)?{value:P.value}:{issues:v.common.issues})}async parseAsync(f,v){let P=await this.safeParseAsync(f,v);if(P.success)return P.data;throw P.error}async safeParseAsync(f,v){let P={common:{issues:[],contextualErrorMap:v?.errorMap,async:!0},path:v?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:l.getParsedType(f)},J=this._parse({data:f,path:P.path,parent:P}),Q=await(w.isAsync(J)?J:Promise.resolve(J));return Q9(P,Q)}refine(f,v){let P=(J)=>{if(typeof v==="string"||typeof v==="undefined")return{message:v};else if(typeof v==="function")return v(J);else return v};return this._refinement((J,Q)=>{let Y=f(J),X=()=>Q.addIssue({code:u.ZodIssueCode.custom,...P(J)});if(typeof Promise!=="undefined"&&Y instanceof Promise)return Y.then((q)=>{if(!q)return X(),!1;else return!0});if(!Y)return X(),!1;else return!0})}refinement(f,v){return this._refinement((P,J)=>{if(!f(P))return J.addIssue(typeof v==="function"?v(P,J):v),!1;else return!0})}_refinement(f){return new Xv({schema:this,typeName:i.ZodEffects,effect:{type:"refinement",refinement:f}})}superRefine(f){return this._refinement(f)}constructor(f){this.spa=this.safeParseAsync,this._def=f,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(v)=>this["~validate"](v)}}optional(){return Nv.create(this,this._def)}nullable(){return _v.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ov.create(this)}promise(){return E0.create(this,this._def)}or(f){return o0.create([this,f],this._def)}and(f){return e0.create(this,f,this._def)}transform(f){return new Xv({...t(this._def),schema:this,typeName:i.ZodEffects,effect:{type:"transform",transform:f}})}default(f){let v=typeof f==="function"?f:()=>f;return new Pf({...t(this._def),innerType:this,defaultValue:v,typeName:i.ZodDefault})}brand(){return new KQ({typeName:i.ZodBranded,type:this,...t(this._def)})}catch(f){let v=typeof f==="function"?f:()=>f;return new Jf({...t(this._def),innerType:this,catchValue:v,typeName:i.ZodCatch})}describe(f){return new this.constructor({...this._def,description:f})}pipe(f){return uf.create(this,f)}readonly(){return Yf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}h.ZodType=e;h.Schema=e;h.ZodSchema=e;var uX=/^c[^\s-]{8,}$/i,lX=/^[0-9a-z]+$/,_X=/^[0-9A-HJKMNP-TV-Z]{26}$/i,kX=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,xX=/^[a-z0-9_-]{21}$/i,mX=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,nX=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,aX=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,rX="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",cP,cX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,iX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,dX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,pX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,sX=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,tX=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,J9="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",oX=new RegExp(`^${J9}$`);function Y9(f){let v="[0-5]\\d";if(f.precision)v=`${v}\\.\\d{${f.precision}}`;else if(f.precision==null)v=`${v}(\\.\\d+)?`;let P=f.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${v})${P}`}function eX(f){return new RegExp(`^${Y9(f)}$`)}function X9(f){let v=`${J9}T${Y9(f)}`,P=[];if(P.push(f.local?"Z?":"Z"),f.offset)P.push("([+-]\\d{2}:?\\d{2})");return v=`${v}(${P.join("|")})`,new RegExp(`^${v}$`)}function v4(f,v){if((v==="v4"||!v)&&cX.test(f))return!0;if((v==="v6"||!v)&&dX.test(f))return!0;return!1}function f4(f,v){if(!mX.test(f))return!1;try{let[P]=f.split(".");if(!P)return!1;let J=P.replace(/-/g,"+").replace(/_/g,"/").padEnd(P.length+(4-P.length%4)%4,"="),Q=JSON.parse(atob(J));if(typeof Q!=="object"||Q===null)return!1;if("typ"in Q&&Q?.typ!=="JWT")return!1;if(!Q.alg)return!1;if(v&&Q.alg!==v)return!1;return!0}catch{return!1}}function Q4(f,v){if((v==="v4"||!v)&&iX.test(f))return!0;if((v==="v6"||!v)&&pX.test(f))return!0;return!1}class $v extends e{_parse(f){if(this._def.coerce)f.data=String(f.data);if(this._getType(f)!==l.ZodParsedType.string){let Q=this._getOrReturnCtx(f);return w.addIssueToContext(Q,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.string,received:Q.parsedType}),w.INVALID}let P=new w.ParseStatus,J=void 0;for(let Q of this._def.checks)if(Q.kind==="min"){if(f.data.length<Q.value)J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{code:u.ZodIssueCode.too_small,minimum:Q.value,type:"string",inclusive:!0,exact:!1,message:Q.message}),P.dirty()}else if(Q.kind==="max"){if(f.data.length>Q.value)J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{code:u.ZodIssueCode.too_big,maximum:Q.value,type:"string",inclusive:!0,exact:!1,message:Q.message}),P.dirty()}else if(Q.kind==="length"){let Y=f.data.length>Q.value,X=f.data.length<Q.value;if(Y||X){if(J=this._getOrReturnCtx(f,J),Y)w.addIssueToContext(J,{code:u.ZodIssueCode.too_big,maximum:Q.value,type:"string",inclusive:!0,exact:!0,message:Q.message});else if(X)w.addIssueToContext(J,{code:u.ZodIssueCode.too_small,minimum:Q.value,type:"string",inclusive:!0,exact:!0,message:Q.message});P.dirty()}}else if(Q.kind==="email"){if(!aX.test(f.data))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{validation:"email",code:u.ZodIssueCode.invalid_string,message:Q.message}),P.dirty()}else if(Q.kind==="emoji"){if(!cP)cP=new RegExp(rX,"u");if(!cP.test(f.data))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{validation:"emoji",code:u.ZodIssueCode.invalid_string,message:Q.message}),P.dirty()}else if(Q.kind==="uuid"){if(!kX.test(f.data))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{validation:"uuid",code:u.ZodIssueCode.invalid_string,message:Q.message}),P.dirty()}else if(Q.kind==="nanoid"){if(!xX.test(f.data))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{validation:"nanoid",code:u.ZodIssueCode.invalid_string,message:Q.message}),P.dirty()}else if(Q.kind==="cuid"){if(!uX.test(f.data))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{validation:"cuid",code:u.ZodIssueCode.invalid_string,message:Q.message}),P.dirty()}else if(Q.kind==="cuid2"){if(!lX.test(f.data))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{validation:"cuid2",code:u.ZodIssueCode.invalid_string,message:Q.message}),P.dirty()}else if(Q.kind==="ulid"){if(!_X.test(f.data))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{validation:"ulid",code:u.ZodIssueCode.invalid_string,message:Q.message}),P.dirty()}else if(Q.kind==="url")try{new URL(f.data)}catch{J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{validation:"url",code:u.ZodIssueCode.invalid_string,message:Q.message}),P.dirty()}else if(Q.kind==="regex"){if(Q.regex.lastIndex=0,!Q.regex.test(f.data))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{validation:"regex",code:u.ZodIssueCode.invalid_string,message:Q.message}),P.dirty()}else if(Q.kind==="trim")f.data=f.data.trim();else if(Q.kind==="includes"){if(!f.data.includes(Q.value,Q.position))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{code:u.ZodIssueCode.invalid_string,validation:{includes:Q.value,position:Q.position},message:Q.message}),P.dirty()}else if(Q.kind==="toLowerCase")f.data=f.data.toLowerCase();else if(Q.kind==="toUpperCase")f.data=f.data.toUpperCase();else if(Q.kind==="startsWith"){if(!f.data.startsWith(Q.value))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{code:u.ZodIssueCode.invalid_string,validation:{startsWith:Q.value},message:Q.message}),P.dirty()}else if(Q.kind==="endsWith"){if(!f.data.endsWith(Q.value))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{code:u.ZodIssueCode.invalid_string,validation:{endsWith:Q.value},message:Q.message}),P.dirty()}else if(Q.kind==="datetime"){if(!X9(Q).test(f.data))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{code:u.ZodIssueCode.invalid_string,validation:"datetime",message:Q.message}),P.dirty()}else if(Q.kind==="date"){if(!oX.test(f.data))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{code:u.ZodIssueCode.invalid_string,validation:"date",message:Q.message}),P.dirty()}else if(Q.kind==="time"){if(!eX(Q).test(f.data))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{code:u.ZodIssueCode.invalid_string,validation:"time",message:Q.message}),P.dirty()}else if(Q.kind==="duration"){if(!nX.test(f.data))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{validation:"duration",code:u.ZodIssueCode.invalid_string,message:Q.message}),P.dirty()}else if(Q.kind==="ip"){if(!v4(f.data,Q.version))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{validation:"ip",code:u.ZodIssueCode.invalid_string,message:Q.message}),P.dirty()}else if(Q.kind==="jwt"){if(!f4(f.data,Q.alg))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{validation:"jwt",code:u.ZodIssueCode.invalid_string,message:Q.message}),P.dirty()}else if(Q.kind==="cidr"){if(!Q4(f.data,Q.version))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{validation:"cidr",code:u.ZodIssueCode.invalid_string,message:Q.message}),P.dirty()}else if(Q.kind==="base64"){if(!sX.test(f.data))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{validation:"base64",code:u.ZodIssueCode.invalid_string,message:Q.message}),P.dirty()}else if(Q.kind==="base64url"){if(!tX.test(f.data))J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{validation:"base64url",code:u.ZodIssueCode.invalid_string,message:Q.message}),P.dirty()}else l.util.assertNever(Q);return{status:P.value,value:f.data}}_regex(f,v,P){return this.refinement((J)=>f.test(J),{validation:v,code:u.ZodIssueCode.invalid_string,...r.errorUtil.errToObj(P)})}_addCheck(f){return new $v({...this._def,checks:[...this._def.checks,f]})}email(f){return this._addCheck({kind:"email",...r.errorUtil.errToObj(f)})}url(f){return this._addCheck({kind:"url",...r.errorUtil.errToObj(f)})}emoji(f){return this._addCheck({kind:"emoji",...r.errorUtil.errToObj(f)})}uuid(f){return this._addCheck({kind:"uuid",...r.errorUtil.errToObj(f)})}nanoid(f){return this._addCheck({kind:"nanoid",...r.errorUtil.errToObj(f)})}cuid(f){return this._addCheck({kind:"cuid",...r.errorUtil.errToObj(f)})}cuid2(f){return this._addCheck({kind:"cuid2",...r.errorUtil.errToObj(f)})}ulid(f){return this._addCheck({kind:"ulid",...r.errorUtil.errToObj(f)})}base64(f){return this._addCheck({kind:"base64",...r.errorUtil.errToObj(f)})}base64url(f){return this._addCheck({kind:"base64url",...r.errorUtil.errToObj(f)})}jwt(f){return this._addCheck({kind:"jwt",...r.errorUtil.errToObj(f)})}ip(f){return this._addCheck({kind:"ip",...r.errorUtil.errToObj(f)})}cidr(f){return this._addCheck({kind:"cidr",...r.errorUtil.errToObj(f)})}datetime(f){if(typeof f==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:f});return this._addCheck({kind:"datetime",precision:typeof f?.precision==="undefined"?null:f?.precision,offset:f?.offset??!1,local:f?.local??!1,...r.errorUtil.errToObj(f?.message)})}date(f){return this._addCheck({kind:"date",message:f})}time(f){if(typeof f==="string")return this._addCheck({kind:"time",precision:null,message:f});return this._addCheck({kind:"time",precision:typeof f?.precision==="undefined"?null:f?.precision,...r.errorUtil.errToObj(f?.message)})}duration(f){return this._addCheck({kind:"duration",...r.errorUtil.errToObj(f)})}regex(f,v){return this._addCheck({kind:"regex",regex:f,...r.errorUtil.errToObj(v)})}includes(f,v){return this._addCheck({kind:"includes",value:f,position:v?.position,...r.errorUtil.errToObj(v?.message)})}startsWith(f,v){return this._addCheck({kind:"startsWith",value:f,...r.errorUtil.errToObj(v)})}endsWith(f,v){return this._addCheck({kind:"endsWith",value:f,...r.errorUtil.errToObj(v)})}min(f,v){return this._addCheck({kind:"min",value:f,...r.errorUtil.errToObj(v)})}max(f,v){return this._addCheck({kind:"max",value:f,...r.errorUtil.errToObj(v)})}length(f,v){return this._addCheck({kind:"length",value:f,...r.errorUtil.errToObj(v)})}nonempty(f){return this.min(1,r.errorUtil.errToObj(f))}trim(){return new $v({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new $v({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new $v({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((f)=>f.kind==="datetime")}get isDate(){return!!this._def.checks.find((f)=>f.kind==="date")}get isTime(){return!!this._def.checks.find((f)=>f.kind==="time")}get isDuration(){return!!this._def.checks.find((f)=>f.kind==="duration")}get isEmail(){return!!this._def.checks.find((f)=>f.kind==="email")}get isURL(){return!!this._def.checks.find((f)=>f.kind==="url")}get isEmoji(){return!!this._def.checks.find((f)=>f.kind==="emoji")}get isUUID(){return!!this._def.checks.find((f)=>f.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((f)=>f.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((f)=>f.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((f)=>f.kind==="cuid2")}get isULID(){return!!this._def.checks.find((f)=>f.kind==="ulid")}get isIP(){return!!this._def.checks.find((f)=>f.kind==="ip")}get isCIDR(){return!!this._def.checks.find((f)=>f.kind==="cidr")}get isBase64(){return!!this._def.checks.find((f)=>f.kind==="base64")}get isBase64url(){return!!this._def.checks.find((f)=>f.kind==="base64url")}get minLength(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxLength(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}}h.ZodString=$v;$v.create=(f)=>{return new $v({checks:[],typeName:i.ZodString,coerce:f?.coerce??!1,...t(f)})};function P4(f,v){let P=(f.toString().split(".")[1]||"").length,J=(v.toString().split(".")[1]||"").length,Q=P>J?P:J,Y=Number.parseInt(f.toFixed(Q).replace(".","")),X=Number.parseInt(v.toFixed(Q).replace(".",""));return Y%X/10**Q}class v0 extends e{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(f){if(this._def.coerce)f.data=Number(f.data);if(this._getType(f)!==l.ZodParsedType.number){let Q=this._getOrReturnCtx(f);return w.addIssueToContext(Q,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.number,received:Q.parsedType}),w.INVALID}let P=void 0,J=new w.ParseStatus;for(let Q of this._def.checks)if(Q.kind==="int"){if(!l.util.isInteger(f.data))P=this._getOrReturnCtx(f,P),w.addIssueToContext(P,{code:u.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:Q.message}),J.dirty()}else if(Q.kind==="min"){if(Q.inclusive?f.data<Q.value:f.data<=Q.value)P=this._getOrReturnCtx(f,P),w.addIssueToContext(P,{code:u.ZodIssueCode.too_small,minimum:Q.value,type:"number",inclusive:Q.inclusive,exact:!1,message:Q.message}),J.dirty()}else if(Q.kind==="max"){if(Q.inclusive?f.data>Q.value:f.data>=Q.value)P=this._getOrReturnCtx(f,P),w.addIssueToContext(P,{code:u.ZodIssueCode.too_big,maximum:Q.value,type:"number",inclusive:Q.inclusive,exact:!1,message:Q.message}),J.dirty()}else if(Q.kind==="multipleOf"){if(P4(f.data,Q.value)!==0)P=this._getOrReturnCtx(f,P),w.addIssueToContext(P,{code:u.ZodIssueCode.not_multiple_of,multipleOf:Q.value,message:Q.message}),J.dirty()}else if(Q.kind==="finite"){if(!Number.isFinite(f.data))P=this._getOrReturnCtx(f,P),w.addIssueToContext(P,{code:u.ZodIssueCode.not_finite,message:Q.message}),J.dirty()}else l.util.assertNever(Q);return{status:J.value,value:f.data}}gte(f,v){return this.setLimit("min",f,!0,r.errorUtil.toString(v))}gt(f,v){return this.setLimit("min",f,!1,r.errorUtil.toString(v))}lte(f,v){return this.setLimit("max",f,!0,r.errorUtil.toString(v))}lt(f,v){return this.setLimit("max",f,!1,r.errorUtil.toString(v))}setLimit(f,v,P,J){return new v0({...this._def,checks:[...this._def.checks,{kind:f,value:v,inclusive:P,message:r.errorUtil.toString(J)}]})}_addCheck(f){return new v0({...this._def,checks:[...this._def.checks,f]})}int(f){return this._addCheck({kind:"int",message:r.errorUtil.toString(f)})}positive(f){return this._addCheck({kind:"min",value:0,inclusive:!1,message:r.errorUtil.toString(f)})}negative(f){return this._addCheck({kind:"max",value:0,inclusive:!1,message:r.errorUtil.toString(f)})}nonpositive(f){return this._addCheck({kind:"max",value:0,inclusive:!0,message:r.errorUtil.toString(f)})}nonnegative(f){return this._addCheck({kind:"min",value:0,inclusive:!0,message:r.errorUtil.toString(f)})}multipleOf(f,v){return this._addCheck({kind:"multipleOf",value:f,message:r.errorUtil.toString(v)})}finite(f){return this._addCheck({kind:"finite",message:r.errorUtil.toString(f)})}safe(f){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:r.errorUtil.toString(f)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:r.errorUtil.toString(f)})}get minValue(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxValue(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}get isInt(){return!!this._def.checks.find((f)=>f.kind==="int"||f.kind==="multipleOf"&&l.util.isInteger(f.value))}get isFinite(){let f=null,v=null;for(let P of this._def.checks)if(P.kind==="finite"||P.kind==="int"||P.kind==="multipleOf")return!0;else if(P.kind==="min"){if(v===null||P.value>v)v=P.value}else if(P.kind==="max"){if(f===null||P.value<f)f=P.value}return Number.isFinite(v)&&Number.isFinite(f)}}h.ZodNumber=v0;v0.create=(f)=>{return new v0({checks:[],typeName:i.ZodNumber,coerce:f?.coerce||!1,...t(f)})};class f0 extends e{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(f){if(this._def.coerce)try{f.data=BigInt(f.data)}catch{return this._getInvalidInput(f)}if(this._getType(f)!==l.ZodParsedType.bigint)return this._getInvalidInput(f);let P=void 0,J=new w.ParseStatus;for(let Q of this._def.checks)if(Q.kind==="min"){if(Q.inclusive?f.data<Q.value:f.data<=Q.value)P=this._getOrReturnCtx(f,P),w.addIssueToContext(P,{code:u.ZodIssueCode.too_small,type:"bigint",minimum:Q.value,inclusive:Q.inclusive,message:Q.message}),J.dirty()}else if(Q.kind==="max"){if(Q.inclusive?f.data>Q.value:f.data>=Q.value)P=this._getOrReturnCtx(f,P),w.addIssueToContext(P,{code:u.ZodIssueCode.too_big,type:"bigint",maximum:Q.value,inclusive:Q.inclusive,message:Q.message}),J.dirty()}else if(Q.kind==="multipleOf"){if(f.data%Q.value!==BigInt(0))P=this._getOrReturnCtx(f,P),w.addIssueToContext(P,{code:u.ZodIssueCode.not_multiple_of,multipleOf:Q.value,message:Q.message}),J.dirty()}else l.util.assertNever(Q);return{status:J.value,value:f.data}}_getInvalidInput(f){let v=this._getOrReturnCtx(f);return w.addIssueToContext(v,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.bigint,received:v.parsedType}),w.INVALID}gte(f,v){return this.setLimit("min",f,!0,r.errorUtil.toString(v))}gt(f,v){return this.setLimit("min",f,!1,r.errorUtil.toString(v))}lte(f,v){return this.setLimit("max",f,!0,r.errorUtil.toString(v))}lt(f,v){return this.setLimit("max",f,!1,r.errorUtil.toString(v))}setLimit(f,v,P,J){return new f0({...this._def,checks:[...this._def.checks,{kind:f,value:v,inclusive:P,message:r.errorUtil.toString(J)}]})}_addCheck(f){return new f0({...this._def,checks:[...this._def.checks,f]})}positive(f){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:r.errorUtil.toString(f)})}negative(f){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:r.errorUtil.toString(f)})}nonpositive(f){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:r.errorUtil.toString(f)})}nonnegative(f){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:r.errorUtil.toString(f)})}multipleOf(f,v){return this._addCheck({kind:"multipleOf",value:f,message:r.errorUtil.toString(v)})}get minValue(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxValue(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}}h.ZodBigInt=f0;f0.create=(f)=>{return new f0({checks:[],typeName:i.ZodBigInt,coerce:f?.coerce??!1,...t(f)})};class p0 extends e{_parse(f){if(this._def.coerce)f.data=Boolean(f.data);if(this._getType(f)!==l.ZodParsedType.boolean){let P=this._getOrReturnCtx(f);return w.addIssueToContext(P,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.boolean,received:P.parsedType}),w.INVALID}return w.OK(f.data)}}h.ZodBoolean=p0;p0.create=(f)=>{return new p0({typeName:i.ZodBoolean,coerce:f?.coerce||!1,...t(f)})};class w0 extends e{_parse(f){if(this._def.coerce)f.data=new Date(f.data);if(this._getType(f)!==l.ZodParsedType.date){let Q=this._getOrReturnCtx(f);return w.addIssueToContext(Q,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.date,received:Q.parsedType}),w.INVALID}if(Number.isNaN(f.data.getTime())){let Q=this._getOrReturnCtx(f);return w.addIssueToContext(Q,{code:u.ZodIssueCode.invalid_date}),w.INVALID}let P=new w.ParseStatus,J=void 0;for(let Q of this._def.checks)if(Q.kind==="min"){if(f.data.getTime()<Q.value)J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{code:u.ZodIssueCode.too_small,message:Q.message,inclusive:!0,exact:!1,minimum:Q.value,type:"date"}),P.dirty()}else if(Q.kind==="max"){if(f.data.getTime()>Q.value)J=this._getOrReturnCtx(f,J),w.addIssueToContext(J,{code:u.ZodIssueCode.too_big,message:Q.message,inclusive:!0,exact:!1,maximum:Q.value,type:"date"}),P.dirty()}else l.util.assertNever(Q);return{status:P.value,value:new Date(f.data.getTime())}}_addCheck(f){return new w0({...this._def,checks:[...this._def.checks,f]})}min(f,v){return this._addCheck({kind:"min",value:f.getTime(),message:r.errorUtil.toString(v)})}max(f,v){return this._addCheck({kind:"max",value:f.getTime(),message:r.errorUtil.toString(v)})}get minDate(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f!=null?new Date(f):null}get maxDate(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f!=null?new Date(f):null}}h.ZodDate=w0;w0.create=(f)=>{return new w0({checks:[],coerce:f?.coerce||!1,typeName:i.ZodDate,...t(f)})};class jf extends e{_parse(f){if(this._getType(f)!==l.ZodParsedType.symbol){let P=this._getOrReturnCtx(f);return w.addIssueToContext(P,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.symbol,received:P.parsedType}),w.INVALID}return w.OK(f.data)}}h.ZodSymbol=jf;jf.create=(f)=>{return new jf({typeName:i.ZodSymbol,...t(f)})};class s0 extends e{_parse(f){if(this._getType(f)!==l.ZodParsedType.undefined){let P=this._getOrReturnCtx(f);return w.addIssueToContext(P,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.undefined,received:P.parsedType}),w.INVALID}return w.OK(f.data)}}h.ZodUndefined=s0;s0.create=(f)=>{return new s0({typeName:i.ZodUndefined,...t(f)})};class t0 extends e{_parse(f){if(this._getType(f)!==l.ZodParsedType.null){let P=this._getOrReturnCtx(f);return w.addIssueToContext(P,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.null,received:P.parsedType}),w.INVALID}return w.OK(f.data)}}h.ZodNull=t0;t0.create=(f)=>{return new t0({typeName:i.ZodNull,...t(f)})};class I0 extends e{constructor(){super(...arguments);this._any=!0}_parse(f){return w.OK(f.data)}}h.ZodAny=I0;I0.create=(f)=>{return new I0({typeName:i.ZodAny,...t(f)})};class ev extends e{constructor(){super(...arguments);this._unknown=!0}_parse(f){return w.OK(f.data)}}h.ZodUnknown=ev;ev.create=(f)=>{return new ev({typeName:i.ZodUnknown,...t(f)})};class Ev extends e{_parse(f){let v=this._getOrReturnCtx(f);return w.addIssueToContext(v,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.never,received:v.parsedType}),w.INVALID}}h.ZodNever=Ev;Ev.create=(f)=>{return new Ev({typeName:i.ZodNever,...t(f)})};class Cf extends e{_parse(f){if(this._getType(f)!==l.ZodParsedType.undefined){let P=this._getOrReturnCtx(f);return w.addIssueToContext(P,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.void,received:P.parsedType}),w.INVALID}return w.OK(f.data)}}h.ZodVoid=Cf;Cf.create=(f)=>{return new Cf({typeName:i.ZodVoid,...t(f)})};class Ov extends e{_parse(f){let{ctx:v,status:P}=this._processInputParams(f),J=this._def;if(v.parsedType!==l.ZodParsedType.array)return w.addIssueToContext(v,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.array,received:v.parsedType}),w.INVALID;if(J.exactLength!==null){let Y=v.data.length>J.exactLength.value,X=v.data.length<J.exactLength.value;if(Y||X)w.addIssueToContext(v,{code:Y?u.ZodIssueCode.too_big:u.ZodIssueCode.too_small,minimum:X?J.exactLength.value:void 0,maximum:Y?J.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:J.exactLength.message}),P.dirty()}if(J.minLength!==null){if(v.data.length<J.minLength.value)w.addIssueToContext(v,{code:u.ZodIssueCode.too_small,minimum:J.minLength.value,type:"array",inclusive:!0,exact:!1,message:J.minLength.message}),P.dirty()}if(J.maxLength!==null){if(v.data.length>J.maxLength.value)w.addIssueToContext(v,{code:u.ZodIssueCode.too_big,maximum:J.maxLength.value,type:"array",inclusive:!0,exact:!1,message:J.maxLength.message}),P.dirty()}if(v.common.async)return Promise.all([...v.data].map((Y,X)=>{return J.type._parseAsync(new Hv(v,Y,v.path,X))})).then((Y)=>{return w.ParseStatus.mergeArray(P,Y)});let Q=[...v.data].map((Y,X)=>{return J.type._parseSync(new Hv(v,Y,v.path,X))});return w.ParseStatus.mergeArray(P,Q)}get element(){return this._def.type}min(f,v){return new Ov({...this._def,minLength:{value:f,message:r.errorUtil.toString(v)}})}max(f,v){return new Ov({...this._def,maxLength:{value:f,message:r.errorUtil.toString(v)}})}length(f,v){return new Ov({...this._def,exactLength:{value:f,message:r.errorUtil.toString(v)}})}nonempty(f){return this.min(1,f)}}h.ZodArray=Ov;Ov.create=(f,v)=>{return new Ov({type:f,minLength:null,maxLength:null,exactLength:null,typeName:i.ZodArray,...t(v)})};function i0(f){if(f instanceof A1){let v={};for(let P in f.shape){let J=f.shape[P];v[P]=Nv.create(i0(J))}return new A1({...f._def,shape:()=>v})}else if(f instanceof Ov)return new Ov({...f._def,type:i0(f.element)});else if(f instanceof Nv)return Nv.create(i0(f.unwrap()));else if(f instanceof _v)return _v.create(i0(f.unwrap()));else if(f instanceof yv)return yv.create(f.items.map((v)=>i0(v)));else return f}class A1 extends e{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let f=this._def.shape(),v=l.util.objectKeys(f);return this._cached={shape:f,keys:v},this._cached}_parse(f){if(this._getType(f)!==l.ZodParsedType.object){let G=this._getOrReturnCtx(f);return w.addIssueToContext(G,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.object,received:G.parsedType}),w.INVALID}let{status:P,ctx:J}=this._processInputParams(f),{shape:Q,keys:Y}=this._getCached(),X=[];if(!(this._def.catchall instanceof Ev&&this._def.unknownKeys==="strip")){for(let G in J.data)if(!Y.includes(G))X.push(G)}let q=[];for(let G of Y){let V=Q[G],B=J.data[G];q.push({key:{status:"valid",value:G},value:V._parse(new Hv(J,B,J.path,G)),alwaysSet:G in J.data})}if(this._def.catchall instanceof Ev){let G=this._def.unknownKeys;if(G==="passthrough")for(let V of X)q.push({key:{status:"valid",value:V},value:{status:"valid",value:J.data[V]}});else if(G==="strict"){if(X.length>0)w.addIssueToContext(J,{code:u.ZodIssueCode.unrecognized_keys,keys:X}),P.dirty()}else if(G==="strip");else throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let G=this._def.catchall;for(let V of X){let B=J.data[V];q.push({key:{status:"valid",value:V},value:G._parse(new Hv(J,B,J.path,V)),alwaysSet:V in J.data})}}if(J.common.async)return Promise.resolve().then(async()=>{let G=[];for(let V of q){let B=await V.key,O=await V.value;G.push({key:B,value:O,alwaysSet:V.alwaysSet})}return G}).then((G)=>{return w.ParseStatus.mergeObjectSync(P,G)});else return w.ParseStatus.mergeObjectSync(P,q)}get shape(){return this._def.shape()}strict(f){return r.errorUtil.errToObj,new A1({...this._def,unknownKeys:"strict",...f!==void 0?{errorMap:(v,P)=>{let J=this._def.errorMap?.(v,P).message??P.defaultError;if(v.code==="unrecognized_keys")return{message:r.errorUtil.errToObj(f).message??J};return{message:J}}}:{}})}strip(){return new A1({...this._def,unknownKeys:"strip"})}passthrough(){return new A1({...this._def,unknownKeys:"passthrough"})}extend(f){return new A1({...this._def,shape:()=>({...this._def.shape(),...f})})}merge(f){return new A1({unknownKeys:f._def.unknownKeys,catchall:f._def.catchall,shape:()=>({...this._def.shape(),...f._def.shape()}),typeName:i.ZodObject})}setKey(f,v){return this.augment({[f]:v})}catchall(f){return new A1({...this._def,catchall:f})}pick(f){let v={};for(let P of l.util.objectKeys(f))if(f[P]&&this.shape[P])v[P]=this.shape[P];return new A1({...this._def,shape:()=>v})}omit(f){let v={};for(let P of l.util.objectKeys(this.shape))if(!f[P])v[P]=this.shape[P];return new A1({...this._def,shape:()=>v})}deepPartial(){return i0(this)}partial(f){let v={};for(let P of l.util.objectKeys(this.shape)){let J=this.shape[P];if(f&&!f[P])v[P]=J;else v[P]=J.optional()}return new A1({...this._def,shape:()=>v})}required(f){let v={};for(let P of l.util.objectKeys(this.shape))if(f&&!f[P])v[P]=this.shape[P];else{let Q=this.shape[P];while(Q instanceof Nv)Q=Q._def.innerType;v[P]=Q}return new A1({...this._def,shape:()=>v})}keyof(){return q9(l.util.objectKeys(this.shape))}}h.ZodObject=A1;A1.create=(f,v)=>{return new A1({shape:()=>f,unknownKeys:"strip",catchall:Ev.create(),typeName:i.ZodObject,...t(v)})};A1.strictCreate=(f,v)=>{return new A1({shape:()=>f,unknownKeys:"strict",catchall:Ev.create(),typeName:i.ZodObject,...t(v)})};A1.lazycreate=(f,v)=>{return new A1({shape:f,unknownKeys:"strip",catchall:Ev.create(),typeName:i.ZodObject,...t(v)})};class o0 extends e{_parse(f){let{ctx:v}=this._processInputParams(f),P=this._def.options;function J(Q){for(let X of Q)if(X.result.status==="valid")return X.result;for(let X of Q)if(X.result.status==="dirty")return v.common.issues.push(...X.ctx.common.issues),X.result;let Y=Q.map((X)=>new u.ZodError(X.ctx.common.issues));return w.addIssueToContext(v,{code:u.ZodIssueCode.invalid_union,unionErrors:Y}),w.INVALID}if(v.common.async)return Promise.all(P.map(async(Q)=>{let Y={...v,common:{...v.common,issues:[]},parent:null};return{result:await Q._parseAsync({data:v.data,path:v.path,parent:Y}),ctx:Y}})).then(J);else{let Q=void 0,Y=[];for(let q of P){let G={...v,common:{...v.common,issues:[]},parent:null},V=q._parseSync({data:v.data,path:v.path,parent:G});if(V.status==="valid")return V;else if(V.status==="dirty"&&!Q)Q={result:V,ctx:G};if(G.common.issues.length)Y.push(G.common.issues)}if(Q)return v.common.issues.push(...Q.ctx.common.issues),Q.result;let X=Y.map((q)=>new u.ZodError(q));return w.addIssueToContext(v,{code:u.ZodIssueCode.invalid_union,unionErrors:X}),w.INVALID}}get options(){return this._def.options}}h.ZodUnion=o0;o0.create=(f,v)=>{return new o0({options:f,typeName:i.ZodUnion,...t(v)})};var lv=(f)=>{if(f instanceof vf)return lv(f.schema);else if(f instanceof Xv)return lv(f.innerType());else if(f instanceof ff)return[f.value];else if(f instanceof Q0)return f.options;else if(f instanceof Qf)return l.util.objectValues(f.enum);else if(f instanceof Pf)return lv(f._def.innerType);else if(f instanceof s0)return[void 0];else if(f instanceof t0)return[null];else if(f instanceof Nv)return[void 0,...lv(f.unwrap())];else if(f instanceof _v)return[null,...lv(f.unwrap())];else if(f instanceof KQ)return lv(f.unwrap());else if(f instanceof Yf)return lv(f.unwrap());else if(f instanceof Jf)return lv(f._def.innerType);else return[]};class VQ extends e{_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==l.ZodParsedType.object)return w.addIssueToContext(v,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.object,received:v.parsedType}),w.INVALID;let P=this.discriminator,J=v.data[P],Q=this.optionsMap.get(J);if(!Q)return w.addIssueToContext(v,{code:u.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[P]}),w.INVALID;if(v.common.async)return Q._parseAsync({data:v.data,path:v.path,parent:v});else return Q._parseSync({data:v.data,path:v.path,parent:v})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(f,v,P){let J=new Map;for(let Q of v){let Y=lv(Q.shape[f]);if(!Y.length)throw new Error(`A discriminator value for key \`${f}\` could not be extracted from all schema options`);for(let X of Y){if(J.has(X))throw new Error(`Discriminator property ${String(f)} has duplicate value ${String(X)}`);J.set(X,Q)}}return new VQ({typeName:i.ZodDiscriminatedUnion,discriminator:f,options:v,optionsMap:J,...t(P)})}}h.ZodDiscriminatedUnion=VQ;function iP(f,v){let P=l.getParsedType(f),J=l.getParsedType(v);if(f===v)return{valid:!0,data:f};else if(P===l.ZodParsedType.object&&J===l.ZodParsedType.object){let Q=l.util.objectKeys(v),Y=l.util.objectKeys(f).filter((q)=>Q.indexOf(q)!==-1),X={...f,...v};for(let q of Y){let G=iP(f[q],v[q]);if(!G.valid)return{valid:!1};X[q]=G.data}return{valid:!0,data:X}}else if(P===l.ZodParsedType.array&&J===l.ZodParsedType.array){if(f.length!==v.length)return{valid:!1};let Q=[];for(let Y=0;Y<f.length;Y++){let X=f[Y],q=v[Y],G=iP(X,q);if(!G.valid)return{valid:!1};Q.push(G.data)}return{valid:!0,data:Q}}else if(P===l.ZodParsedType.date&&J===l.ZodParsedType.date&&+f===+v)return{valid:!0,data:f};else return{valid:!1}}class e0 extends e{_parse(f){let{status:v,ctx:P}=this._processInputParams(f),J=(Q,Y)=>{if(w.isAborted(Q)||w.isAborted(Y))return w.INVALID;let X=iP(Q.value,Y.value);if(!X.valid)return w.addIssueToContext(P,{code:u.ZodIssueCode.invalid_intersection_types}),w.INVALID;if(w.isDirty(Q)||w.isDirty(Y))v.dirty();return{status:v.value,value:X.data}};if(P.common.async)return Promise.all([this._def.left._parseAsync({data:P.data,path:P.path,parent:P}),this._def.right._parseAsync({data:P.data,path:P.path,parent:P})]).then(([Q,Y])=>J(Q,Y));else return J(this._def.left._parseSync({data:P.data,path:P.path,parent:P}),this._def.right._parseSync({data:P.data,path:P.path,parent:P}))}}h.ZodIntersection=e0;e0.create=(f,v,P)=>{return new e0({left:f,right:v,typeName:i.ZodIntersection,...t(P)})};class yv extends e{_parse(f){let{status:v,ctx:P}=this._processInputParams(f);if(P.parsedType!==l.ZodParsedType.array)return w.addIssueToContext(P,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.array,received:P.parsedType}),w.INVALID;if(P.data.length<this._def.items.length)return w.addIssueToContext(P,{code:u.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),w.INVALID;if(!this._def.rest&&P.data.length>this._def.items.length)w.addIssueToContext(P,{code:u.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),v.dirty();let Q=[...P.data].map((Y,X)=>{let q=this._def.items[X]||this._def.rest;if(!q)return null;return q._parse(new Hv(P,Y,P.path,X))}).filter((Y)=>!!Y);if(P.common.async)return Promise.all(Q).then((Y)=>{return w.ParseStatus.mergeArray(v,Y)});else return w.ParseStatus.mergeArray(v,Q)}get items(){return this._def.items}rest(f){return new yv({...this._def,rest:f})}}h.ZodTuple=yv;yv.create=(f,v)=>{if(!Array.isArray(f))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new yv({items:f,typeName:i.ZodTuple,rest:null,...t(v)})};class Zf extends e{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(f){let{status:v,ctx:P}=this._processInputParams(f);if(P.parsedType!==l.ZodParsedType.object)return w.addIssueToContext(P,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.object,received:P.parsedType}),w.INVALID;let J=[],Q=this._def.keyType,Y=this._def.valueType;for(let X in P.data)J.push({key:Q._parse(new Hv(P,X,P.path,X)),value:Y._parse(new Hv(P,P.data[X],P.path,X)),alwaysSet:X in P.data});if(P.common.async)return w.ParseStatus.mergeObjectAsync(v,J);else return w.ParseStatus.mergeObjectSync(v,J)}get element(){return this._def.valueType}static create(f,v,P){if(v instanceof e)return new Zf({keyType:f,valueType:v,typeName:i.ZodRecord,...t(P)});return new Zf({keyType:$v.create(),valueType:f,typeName:i.ZodRecord,...t(v)})}}h.ZodRecord=Zf;class Tf extends e{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(f){let{status:v,ctx:P}=this._processInputParams(f);if(P.parsedType!==l.ZodParsedType.map)return w.addIssueToContext(P,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.map,received:P.parsedType}),w.INVALID;let J=this._def.keyType,Q=this._def.valueType,Y=[...P.data.entries()].map(([X,q],G)=>{return{key:J._parse(new Hv(P,X,P.path,[G,"key"])),value:Q._parse(new Hv(P,q,P.path,[G,"value"]))}});if(P.common.async){let X=new Map;return Promise.resolve().then(async()=>{for(let q of Y){let G=await q.key,V=await q.value;if(G.status==="aborted"||V.status==="aborted")return w.INVALID;if(G.status==="dirty"||V.status==="dirty")v.dirty();X.set(G.value,V.value)}return{status:v.value,value:X}})}else{let X=new Map;for(let q of Y){let{key:G,value:V}=q;if(G.status==="aborted"||V.status==="aborted")return w.INVALID;if(G.status==="dirty"||V.status==="dirty")v.dirty();X.set(G.value,V.value)}return{status:v.value,value:X}}}}h.ZodMap=Tf;Tf.create=(f,v,P)=>{return new Tf({valueType:v,keyType:f,typeName:i.ZodMap,...t(P)})};class R0 extends e{_parse(f){let{status:v,ctx:P}=this._processInputParams(f);if(P.parsedType!==l.ZodParsedType.set)return w.addIssueToContext(P,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.set,received:P.parsedType}),w.INVALID;let J=this._def;if(J.minSize!==null){if(P.data.size<J.minSize.value)w.addIssueToContext(P,{code:u.ZodIssueCode.too_small,minimum:J.minSize.value,type:"set",inclusive:!0,exact:!1,message:J.minSize.message}),v.dirty()}if(J.maxSize!==null){if(P.data.size>J.maxSize.value)w.addIssueToContext(P,{code:u.ZodIssueCode.too_big,maximum:J.maxSize.value,type:"set",inclusive:!0,exact:!1,message:J.maxSize.message}),v.dirty()}let Q=this._def.valueType;function Y(q){let G=new Set;for(let V of q){if(V.status==="aborted")return w.INVALID;if(V.status==="dirty")v.dirty();G.add(V.value)}return{status:v.value,value:G}}let X=[...P.data.values()].map((q,G)=>Q._parse(new Hv(P,q,P.path,G)));if(P.common.async)return Promise.all(X).then((q)=>Y(q));else return Y(X)}min(f,v){return new R0({...this._def,minSize:{value:f,message:r.errorUtil.toString(v)}})}max(f,v){return new R0({...this._def,maxSize:{value:f,message:r.errorUtil.toString(v)}})}size(f,v){return this.min(f,v).max(f,v)}nonempty(f){return this.min(1,f)}}h.ZodSet=R0;R0.create=(f,v)=>{return new R0({valueType:f,minSize:null,maxSize:null,typeName:i.ZodSet,...t(v)})};class d0 extends e{constructor(){super(...arguments);this.validate=this.implement}_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==l.ZodParsedType.function)return w.addIssueToContext(v,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.function,received:v.parsedType}),w.INVALID;function P(X,q){return w.makeIssue({data:X,path:v.path,errorMaps:[v.common.contextualErrorMap,v.schemaErrorMap,DQ.getErrorMap(),DQ.defaultErrorMap].filter((G)=>!!G),issueData:{code:u.ZodIssueCode.invalid_arguments,argumentsError:q}})}function J(X,q){return w.makeIssue({data:X,path:v.path,errorMaps:[v.common.contextualErrorMap,v.schemaErrorMap,DQ.getErrorMap(),DQ.defaultErrorMap].filter((G)=>!!G),issueData:{code:u.ZodIssueCode.invalid_return_type,returnTypeError:q}})}let Q={errorMap:v.common.contextualErrorMap},Y=v.data;if(this._def.returns instanceof E0){let X=this;return w.OK(async function(...q){let G=new u.ZodError([]),V=await X._def.args.parseAsync(q,Q).catch((L)=>{throw G.addIssue(P(q,L)),G}),B=await Reflect.apply(Y,this,V);return await X._def.returns._def.type.parseAsync(B,Q).catch((L)=>{throw G.addIssue(J(B,L)),G})})}else{let X=this;return w.OK(function(...q){let G=X._def.args.safeParse(q,Q);if(!G.success)throw new u.ZodError([P(q,G.error)]);let V=Reflect.apply(Y,this,G.data),B=X._def.returns.safeParse(V,Q);if(!B.success)throw new u.ZodError([J(V,B.error)]);return B.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...f){return new d0({...this._def,args:yv.create(f).rest(ev.create())})}returns(f){return new d0({...this._def,returns:f})}implement(f){return this.parse(f)}strictImplement(f){return this.parse(f)}static create(f,v,P){return new d0({args:f?f:yv.create([]).rest(ev.create()),returns:v||ev.create(),typeName:i.ZodFunction,...t(P)})}}h.ZodFunction=d0;class vf extends e{get schema(){return this._def.getter()}_parse(f){let{ctx:v}=this._processInputParams(f);return this._def.getter()._parse({data:v.data,path:v.path,parent:v})}}h.ZodLazy=vf;vf.create=(f,v)=>{return new vf({getter:f,typeName:i.ZodLazy,...t(v)})};class ff extends e{_parse(f){if(f.data!==this._def.value){let v=this._getOrReturnCtx(f);return w.addIssueToContext(v,{received:v.data,code:u.ZodIssueCode.invalid_literal,expected:this._def.value}),w.INVALID}return{status:"valid",value:f.data}}get value(){return this._def.value}}h.ZodLiteral=ff;ff.create=(f,v)=>{return new ff({value:f,typeName:i.ZodLiteral,...t(v)})};function q9(f,v){return new Q0({values:f,typeName:i.ZodEnum,...t(v)})}class Q0 extends e{_parse(f){if(typeof f.data!=="string"){let v=this._getOrReturnCtx(f),P=this._def.values;return w.addIssueToContext(v,{expected:l.util.joinValues(P),received:v.parsedType,code:u.ZodIssueCode.invalid_type}),w.INVALID}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(f.data)){let v=this._getOrReturnCtx(f),P=this._def.values;return w.addIssueToContext(v,{received:v.data,code:u.ZodIssueCode.invalid_enum_value,options:P}),w.INVALID}return w.OK(f.data)}get options(){return this._def.values}get enum(){let f={};for(let v of this._def.values)f[v]=v;return f}get Values(){let f={};for(let v of this._def.values)f[v]=v;return f}get Enum(){let f={};for(let v of this._def.values)f[v]=v;return f}extract(f,v=this._def){return Q0.create(f,{...this._def,...v})}exclude(f,v=this._def){return Q0.create(this.options.filter((P)=>!f.includes(P)),{...this._def,...v})}}h.ZodEnum=Q0;Q0.create=q9;class Qf extends e{_parse(f){let v=l.util.getValidEnumValues(this._def.values),P=this._getOrReturnCtx(f);if(P.parsedType!==l.ZodParsedType.string&&P.parsedType!==l.ZodParsedType.number){let J=l.util.objectValues(v);return w.addIssueToContext(P,{expected:l.util.joinValues(J),received:P.parsedType,code:u.ZodIssueCode.invalid_type}),w.INVALID}if(!this._cache)this._cache=new Set(l.util.getValidEnumValues(this._def.values));if(!this._cache.has(f.data)){let J=l.util.objectValues(v);return w.addIssueToContext(P,{received:P.data,code:u.ZodIssueCode.invalid_enum_value,options:J}),w.INVALID}return w.OK(f.data)}get enum(){return this._def.values}}h.ZodNativeEnum=Qf;Qf.create=(f,v)=>{return new Qf({values:f,typeName:i.ZodNativeEnum,...t(v)})};class E0 extends e{unwrap(){return this._def.type}_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==l.ZodParsedType.promise&&v.common.async===!1)return w.addIssueToContext(v,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.promise,received:v.parsedType}),w.INVALID;let P=v.parsedType===l.ZodParsedType.promise?v.data:Promise.resolve(v.data);return w.OK(P.then((J)=>{return this._def.type.parseAsync(J,{path:v.path,errorMap:v.common.contextualErrorMap})}))}}h.ZodPromise=E0;E0.create=(f,v)=>{return new E0({type:f,typeName:i.ZodPromise,...t(v)})};class Xv extends e{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===i.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(f){let{status:v,ctx:P}=this._processInputParams(f),J=this._def.effect||null,Q={addIssue:(Y)=>{if(w.addIssueToContext(P,Y),Y.fatal)v.abort();else v.dirty()},get path(){return P.path}};if(Q.addIssue=Q.addIssue.bind(Q),J.type==="preprocess"){let Y=J.transform(P.data,Q);if(P.common.async)return Promise.resolve(Y).then(async(X)=>{if(v.value==="aborted")return w.INVALID;let q=await this._def.schema._parseAsync({data:X,path:P.path,parent:P});if(q.status==="aborted")return w.INVALID;if(q.status==="dirty")return w.DIRTY(q.value);if(v.value==="dirty")return w.DIRTY(q.value);return q});else{if(v.value==="aborted")return w.INVALID;let X=this._def.schema._parseSync({data:Y,path:P.path,parent:P});if(X.status==="aborted")return w.INVALID;if(X.status==="dirty")return w.DIRTY(X.value);if(v.value==="dirty")return w.DIRTY(X.value);return X}}if(J.type==="refinement"){let Y=(X)=>{let q=J.refinement(X,Q);if(P.common.async)return Promise.resolve(q);if(q instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return X};if(P.common.async===!1){let X=this._def.schema._parseSync({data:P.data,path:P.path,parent:P});if(X.status==="aborted")return w.INVALID;if(X.status==="dirty")v.dirty();return Y(X.value),{status:v.value,value:X.value}}else return this._def.schema._parseAsync({data:P.data,path:P.path,parent:P}).then((X)=>{if(X.status==="aborted")return w.INVALID;if(X.status==="dirty")v.dirty();return Y(X.value).then(()=>{return{status:v.value,value:X.value}})})}if(J.type==="transform")if(P.common.async===!1){let Y=this._def.schema._parseSync({data:P.data,path:P.path,parent:P});if(!w.isValid(Y))return w.INVALID;let X=J.transform(Y.value,Q);if(X instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:v.value,value:X}}else return this._def.schema._parseAsync({data:P.data,path:P.path,parent:P}).then((Y)=>{if(!w.isValid(Y))return w.INVALID;return Promise.resolve(J.transform(Y.value,Q)).then((X)=>({status:v.value,value:X}))});l.util.assertNever(J)}}h.ZodEffects=Xv;h.ZodTransformer=Xv;Xv.create=(f,v,P)=>{return new Xv({schema:f,typeName:i.ZodEffects,effect:v,...t(P)})};Xv.createWithPreprocess=(f,v,P)=>{return new Xv({schema:v,effect:{type:"preprocess",transform:f},typeName:i.ZodEffects,...t(P)})};class Nv extends e{_parse(f){if(this._getType(f)===l.ZodParsedType.undefined)return w.OK(void 0);return this._def.innerType._parse(f)}unwrap(){return this._def.innerType}}h.ZodOptional=Nv;Nv.create=(f,v)=>{return new Nv({innerType:f,typeName:i.ZodOptional,...t(v)})};class _v extends e{_parse(f){if(this._getType(f)===l.ZodParsedType.null)return w.OK(null);return this._def.innerType._parse(f)}unwrap(){return this._def.innerType}}h.ZodNullable=_v;_v.create=(f,v)=>{return new _v({innerType:f,typeName:i.ZodNullable,...t(v)})};class Pf extends e{_parse(f){let{ctx:v}=this._processInputParams(f),P=v.data;if(v.parsedType===l.ZodParsedType.undefined)P=this._def.defaultValue();return this._def.innerType._parse({data:P,path:v.path,parent:v})}removeDefault(){return this._def.innerType}}h.ZodDefault=Pf;Pf.create=(f,v)=>{return new Pf({innerType:f,typeName:i.ZodDefault,defaultValue:typeof v.default==="function"?v.default:()=>v.default,...t(v)})};class Jf extends e{_parse(f){let{ctx:v}=this._processInputParams(f),P={...v,common:{...v.common,issues:[]}},J=this._def.innerType._parse({data:P.data,path:P.path,parent:{...P}});if(w.isAsync(J))return J.then((Q)=>{return{status:"valid",value:Q.status==="valid"?Q.value:this._def.catchValue({get error(){return new u.ZodError(P.common.issues)},input:P.data})}});else return{status:"valid",value:J.status==="valid"?J.value:this._def.catchValue({get error(){return new u.ZodError(P.common.issues)},input:P.data})}}removeCatch(){return this._def.innerType}}h.ZodCatch=Jf;Jf.create=(f,v)=>{return new Jf({innerType:f,typeName:i.ZodCatch,catchValue:typeof v.catch==="function"?v.catch:()=>v.catch,...t(v)})};class bf extends e{_parse(f){if(this._getType(f)!==l.ZodParsedType.nan){let P=this._getOrReturnCtx(f);return w.addIssueToContext(P,{code:u.ZodIssueCode.invalid_type,expected:l.ZodParsedType.nan,received:P.parsedType}),w.INVALID}return{status:"valid",value:f.data}}}h.ZodNaN=bf;bf.create=(f)=>{return new bf({typeName:i.ZodNaN,...t(f)})};h.BRAND=Symbol("zod_brand");class KQ extends e{_parse(f){let{ctx:v}=this._processInputParams(f),P=v.data;return this._def.type._parse({data:P,path:v.path,parent:v})}unwrap(){return this._def.type}}h.ZodBranded=KQ;class uf extends e{_parse(f){let{status:v,ctx:P}=this._processInputParams(f);if(P.common.async)return(async()=>{let Q=await this._def.in._parseAsync({data:P.data,path:P.path,parent:P});if(Q.status==="aborted")return w.INVALID;if(Q.status==="dirty")return v.dirty(),w.DIRTY(Q.value);else return this._def.out._parseAsync({data:Q.value,path:P.path,parent:P})})();else{let J=this._def.in._parseSync({data:P.data,path:P.path,parent:P});if(J.status==="aborted")return w.INVALID;if(J.status==="dirty")return v.dirty(),{status:"dirty",value:J.value};else return this._def.out._parseSync({data:J.value,path:P.path,parent:P})}}static create(f,v){return new uf({in:f,out:v,typeName:i.ZodPipeline})}}h.ZodPipeline=uf;class Yf extends e{_parse(f){let v=this._def.innerType._parse(f),P=(J)=>{if(w.isValid(J))J.value=Object.freeze(J.value);return J};return w.isAsync(v)?v.then((J)=>P(J)):P(v)}unwrap(){return this._def.innerType}}h.ZodReadonly=Yf;Yf.create=(f,v)=>{return new Yf({innerType:f,typeName:i.ZodReadonly,...t(v)})};function P9(f,v){let P=typeof f==="function"?f(v):typeof f==="string"?{message:f}:f;return typeof P==="string"?{message:P}:P}function G9(f,v={},P){if(f)return I0.create().superRefine((J,Q)=>{let Y=f(J);if(Y instanceof Promise)return Y.then((X)=>{if(!X){let q=P9(v,J),G=q.fatal??P??!0;Q.addIssue({code:"custom",...q,fatal:G})}});if(!Y){let X=P9(v,J),q=X.fatal??P??!0;Q.addIssue({code:"custom",...X,fatal:q})}return});return I0.create()}h.late={object:A1.lazycreate};var i;(function(f){f.ZodString="ZodString",f.ZodNumber="ZodNumber",f.ZodNaN="ZodNaN",f.ZodBigInt="ZodBigInt",f.ZodBoolean="ZodBoolean",f.ZodDate="ZodDate",f.ZodSymbol="ZodSymbol",f.ZodUndefined="ZodUndefined",f.ZodNull="ZodNull",f.ZodAny="ZodAny",f.ZodUnknown="ZodUnknown",f.ZodNever="ZodNever",f.ZodVoid="ZodVoid",f.ZodArray="ZodArray",f.ZodObject="ZodObject",f.ZodUnion="ZodUnion",f.ZodDiscriminatedUnion="ZodDiscriminatedUnion",f.ZodIntersection="ZodIntersection",f.ZodTuple="ZodTuple",f.ZodRecord="ZodRecord",f.ZodMap="ZodMap",f.ZodSet="ZodSet",f.ZodFunction="ZodFunction",f.ZodLazy="ZodLazy",f.ZodLiteral="ZodLiteral",f.ZodEnum="ZodEnum",f.ZodEffects="ZodEffects",f.ZodNativeEnum="ZodNativeEnum",f.ZodOptional="ZodOptional",f.ZodNullable="ZodNullable",f.ZodDefault="ZodDefault",f.ZodCatch="ZodCatch",f.ZodPromise="ZodPromise",f.ZodBranded="ZodBranded",f.ZodPipeline="ZodPipeline",f.ZodReadonly="ZodReadonly"})(i||(h.ZodFirstPartyTypeKind=i={}));var J4=(f,v={message:`Input not instance of ${f.name}`})=>G9((P)=>P instanceof f,v);h.instanceof=J4;var W9=$v.create;h.string=W9;var D9=v0.create;h.number=D9;var Y4=bf.create;h.nan=Y4;var X4=f0.create;h.bigint=X4;var V9=p0.create;h.boolean=V9;var q4=w0.create;h.date=q4;var G4=jf.create;h.symbol=G4;var W4=s0.create;h.undefined=W4;var D4=t0.create;h.null=D4;var V4=I0.create;h.any=V4;var K4=ev.create;h.unknown=K4;var B4=Ev.create;h.never=B4;var $4=Cf.create;h.void=$4;var O4=Ov.create;h.array=O4;var N4=A1.create;h.object=N4;var H4=A1.strictCreate;h.strictObject=H4;var L4=o0.create;h.union=L4;var M4=VQ.create;h.discriminatedUnion=M4;var A4=e0.create;h.intersection=A4;var F4=yv.create;h.tuple=F4;var h4=Zf.create;h.record=h4;var w4=Tf.create;h.map=w4;var I4=R0.create;h.set=I4;var R4=d0.create;h.function=R4;var E4=vf.create;h.lazy=E4;var y4=ff.create;h.literal=y4;var z4=Q0.create;h.enum=z4;var S4=Qf.create;h.nativeEnum=S4;var U4=E0.create;h.promise=U4;var K9=Xv.create;h.effect=K9;h.transformer=K9;var g4=Nv.create;h.optional=g4;var j4=_v.create;h.nullable=j4;var C4=Xv.createWithPreprocess;h.preprocess=C4;var Z4=uf.create;h.pipeline=Z4;var T4=()=>W9().optional();h.ostring=T4;var b4=()=>D9().optional();h.onumber=b4;var u4=()=>V9().optional();h.oboolean=u4;h.coerce={string:(f)=>$v.create({...f,coerce:!0}),number:(f)=>v0.create({...f,coerce:!0}),boolean:(f)=>p0.create({...f,coerce:!0}),bigint:(f)=>f0.create({...f,coerce:!0}),date:(f)=>w0.create({...f,coerce:!0})};h.NEVER=w.INVALID});var dP=z((qv)=>{var l4=qv&&qv.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),Xf=qv&&qv.__exportStar||function(f,v){for(var P in f)if(P!=="default"&&!Object.prototype.hasOwnProperty.call(v,P))l4(v,f,P)};Object.defineProperty(qv,"__esModule",{value:!0});Xf(GQ(),qv);Xf(rP(),qv);Xf(eJ(),qv);Xf(Uf(),qv);Xf(B9(),qv);Xf(qQ(),qv)});var kv=z((c1)=>{var $9=c1&&c1.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),_4=c1&&c1.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),k4=c1&&c1.__importStar||function(f){if(f&&f.__esModule)return f;var v={};if(f!=null){for(var P in f)if(P!=="default"&&Object.prototype.hasOwnProperty.call(f,P))$9(v,f,P)}return _4(v,f),v},x4=c1&&c1.__exportStar||function(f,v){for(var P in f)if(P!=="default"&&!Object.prototype.hasOwnProperty.call(v,P))$9(v,f,P)};Object.defineProperty(c1,"__esModule",{value:!0});c1.z=void 0;var O9=k4(dP());c1.z=O9;x4(dP(),c1);c1.default=O9});var _f=z((W)=>{Object.defineProperty(W,"__esModule",{value:!0});W.UnsubscribeRequestSchema=W.SubscribeRequestSchema=W.ResourceListChangedNotificationSchema=W.ReadResourceResultSchema=W.ReadResourceRequestSchema=W.ListResourceTemplatesResultSchema=W.ListResourceTemplatesRequestSchema=W.ListResourcesResultSchema=W.ListResourcesRequestSchema=W.ResourceTemplateSchema=W.ResourceSchema=W.BlobResourceContentsSchema=W.TextResourceContentsSchema=W.ResourceContentsSchema=W.PaginatedResultSchema=W.PaginatedRequestSchema=W.ProgressNotificationSchema=W.ProgressSchema=W.PingRequestSchema=W.isInitializedNotification=W.InitializedNotificationSchema=W.InitializeResultSchema=W.ServerCapabilitiesSchema=W.isInitializeRequest=W.InitializeRequestSchema=W.ClientCapabilitiesSchema=W.ImplementationSchema=W.BaseMetadataSchema=W.CancelledNotificationSchema=W.EmptyResultSchema=W.JSONRPCMessageSchema=W.isJSONRPCError=W.JSONRPCErrorSchema=W.ErrorCode=W.isJSONRPCResponse=W.JSONRPCResponseSchema=W.isJSONRPCNotification=W.JSONRPCNotificationSchema=W.isJSONRPCRequest=W.JSONRPCRequestSchema=W.RequestIdSchema=W.ResultSchema=W.NotificationSchema=W.RequestSchema=W.CursorSchema=W.ProgressTokenSchema=W.JSONRPC_VERSION=W.SUPPORTED_PROTOCOL_VERSIONS=W.DEFAULT_NEGOTIATED_PROTOCOL_VERSION=W.LATEST_PROTOCOL_VERSION=void 0;W.ClientResultSchema=W.ClientNotificationSchema=W.ClientRequestSchema=W.RootsListChangedNotificationSchema=W.ListRootsResultSchema=W.ListRootsRequestSchema=W.RootSchema=W.CompleteResultSchema=W.CompleteRequestSchema=W.PromptReferenceSchema=W.ResourceReferenceSchema=W.ResourceTemplateReferenceSchema=W.ElicitResultSchema=W.ElicitRequestSchema=W.PrimitiveSchemaDefinitionSchema=W.EnumSchemaSchema=W.NumberSchemaSchema=W.StringSchemaSchema=W.BooleanSchemaSchema=W.CreateMessageResultSchema=W.CreateMessageRequestSchema=W.SamplingMessageSchema=W.ModelPreferencesSchema=W.ModelHintSchema=W.LoggingMessageNotificationSchema=W.SetLevelRequestSchema=W.LoggingLevelSchema=W.ToolListChangedNotificationSchema=W.CallToolRequestSchema=W.CompatibilityCallToolResultSchema=W.CallToolResultSchema=W.ListToolsResultSchema=W.ListToolsRequestSchema=W.ToolSchema=W.ToolAnnotationsSchema=W.PromptListChangedNotificationSchema=W.GetPromptResultSchema=W.PromptMessageSchema=W.ContentBlockSchema=W.ResourceLinkSchema=W.EmbeddedResourceSchema=W.AudioContentSchema=W.ImageContentSchema=W.TextContentSchema=W.GetPromptRequestSchema=W.ListPromptsResultSchema=W.ListPromptsRequestSchema=W.PromptSchema=W.PromptArgumentSchema=W.ResourceUpdatedNotificationSchema=void 0;W.McpError=W.ServerResultSchema=W.ServerNotificationSchema=W.ServerRequestSchema=void 0;var D=kv();W.LATEST_PROTOCOL_VERSION="2025-06-18";W.DEFAULT_NEGOTIATED_PROTOCOL_VERSION="2025-03-26";W.SUPPORTED_PROTOCOL_VERSIONS=[W.LATEST_PROTOCOL_VERSION,"2025-03-26","2024-11-05","2024-10-07"];W.JSONRPC_VERSION="2.0";W.ProgressTokenSchema=D.z.union([D.z.string(),D.z.number().int()]);W.CursorSchema=D.z.string();var m4=D.z.object({progressToken:D.z.optional(W.ProgressTokenSchema)}).passthrough(),Gv=D.z.object({_meta:D.z.optional(m4)}).passthrough();W.RequestSchema=D.z.object({method:D.z.string(),params:D.z.optional(Gv)});var lf=D.z.object({_meta:D.z.optional(D.z.object({}).passthrough())}).passthrough();W.NotificationSchema=D.z.object({method:D.z.string(),params:D.z.optional(lf)});W.ResultSchema=D.z.object({_meta:D.z.optional(D.z.object({}).passthrough())}).passthrough();W.RequestIdSchema=D.z.union([D.z.string(),D.z.number().int()]);W.JSONRPCRequestSchema=D.z.object({jsonrpc:D.z.literal(W.JSONRPC_VERSION),id:W.RequestIdSchema}).merge(W.RequestSchema).strict();var n4=(f)=>W.JSONRPCRequestSchema.safeParse(f).success;W.isJSONRPCRequest=n4;W.JSONRPCNotificationSchema=D.z.object({jsonrpc:D.z.literal(W.JSONRPC_VERSION)}).merge(W.NotificationSchema).strict();var a4=(f)=>W.JSONRPCNotificationSchema.safeParse(f).success;W.isJSONRPCNotification=a4;W.JSONRPCResponseSchema=D.z.object({jsonrpc:D.z.literal(W.JSONRPC_VERSION),id:W.RequestIdSchema,result:W.ResultSchema}).strict();var r4=(f)=>W.JSONRPCResponseSchema.safeParse(f).success;W.isJSONRPCResponse=r4;var N9;(function(f){f[f.ConnectionClosed=-32000]="ConnectionClosed",f[f.RequestTimeout=-32001]="RequestTimeout",f[f.ParseError=-32700]="ParseError",f[f.InvalidRequest=-32600]="InvalidRequest",f[f.MethodNotFound=-32601]="MethodNotFound",f[f.InvalidParams=-32602]="InvalidParams",f[f.InternalError=-32603]="InternalError"})(N9||(W.ErrorCode=N9={}));W.JSONRPCErrorSchema=D.z.object({jsonrpc:D.z.literal(W.JSONRPC_VERSION),id:W.RequestIdSchema,error:D.z.object({code:D.z.number().int(),message:D.z.string(),data:D.z.optional(D.z.unknown())})}).strict();var c4=(f)=>W.JSONRPCErrorSchema.safeParse(f).success;W.isJSONRPCError=c4;W.JSONRPCMessageSchema=D.z.union([W.JSONRPCRequestSchema,W.JSONRPCNotificationSchema,W.JSONRPCResponseSchema,W.JSONRPCErrorSchema]);W.EmptyResultSchema=W.ResultSchema.strict();W.CancelledNotificationSchema=W.NotificationSchema.extend({method:D.z.literal("notifications/cancelled"),params:lf.extend({requestId:W.RequestIdSchema,reason:D.z.string().optional()})});W.BaseMetadataSchema=D.z.object({name:D.z.string(),title:D.z.optional(D.z.string())}).passthrough();W.ImplementationSchema=W.BaseMetadataSchema.extend({version:D.z.string()});W.ClientCapabilitiesSchema=D.z.object({experimental:D.z.optional(D.z.object({}).passthrough()),sampling:D.z.optional(D.z.object({}).passthrough()),elicitation:D.z.optional(D.z.object({}).passthrough()),roots:D.z.optional(D.z.object({listChanged:D.z.optional(D.z.boolean())}).passthrough())}).passthrough();W.InitializeRequestSchema=W.RequestSchema.extend({method:D.z.literal("initialize"),params:Gv.extend({protocolVersion:D.z.string(),capabilities:W.ClientCapabilitiesSchema,clientInfo:W.ImplementationSchema})});var i4=(f)=>W.InitializeRequestSchema.safeParse(f).success;W.isInitializeRequest=i4;W.ServerCapabilitiesSchema=D.z.object({experimental:D.z.optional(D.z.object({}).passthrough()),logging:D.z.optional(D.z.object({}).passthrough()),completions:D.z.optional(D.z.object({}).passthrough()),prompts:D.z.optional(D.z.object({listChanged:D.z.optional(D.z.boolean())}).passthrough()),resources:D.z.optional(D.z.object({subscribe:D.z.optional(D.z.boolean()),listChanged:D.z.optional(D.z.boolean())}).passthrough()),tools:D.z.optional(D.z.object({listChanged:D.z.optional(D.z.boolean())}).passthrough())}).passthrough();W.InitializeResultSchema=W.ResultSchema.extend({protocolVersion:D.z.string(),capabilities:W.ServerCapabilitiesSchema,serverInfo:W.ImplementationSchema,instructions:D.z.optional(D.z.string())});W.InitializedNotificationSchema=W.NotificationSchema.extend({method:D.z.literal("notifications/initialized")});var d4=(f)=>W.InitializedNotificationSchema.safeParse(f).success;W.isInitializedNotification=d4;W.PingRequestSchema=W.RequestSchema.extend({method:D.z.literal("ping")});W.ProgressSchema=D.z.object({progress:D.z.number(),total:D.z.optional(D.z.number()),message:D.z.optional(D.z.string())}).passthrough();W.ProgressNotificationSchema=W.NotificationSchema.extend({method:D.z.literal("notifications/progress"),params:lf.merge(W.ProgressSchema).extend({progressToken:W.ProgressTokenSchema})});W.PaginatedRequestSchema=W.RequestSchema.extend({params:Gv.extend({cursor:D.z.optional(W.CursorSchema)}).optional()});W.PaginatedResultSchema=W.ResultSchema.extend({nextCursor:D.z.optional(W.CursorSchema)});W.ResourceContentsSchema=D.z.object({uri:D.z.string(),mimeType:D.z.optional(D.z.string()),_meta:D.z.optional(D.z.object({}).passthrough())}).passthrough();W.TextResourceContentsSchema=W.ResourceContentsSchema.extend({text:D.z.string()});var pP=D.z.string().refine((f)=>{try{return atob(f),!0}catch(v){return!1}},{message:"Invalid Base64 string"});W.BlobResourceContentsSchema=W.ResourceContentsSchema.extend({blob:pP});W.ResourceSchema=W.BaseMetadataSchema.extend({uri:D.z.string(),description:D.z.optional(D.z.string()),mimeType:D.z.optional(D.z.string()),_meta:D.z.optional(D.z.object({}).passthrough())});W.ResourceTemplateSchema=W.BaseMetadataSchema.extend({uriTemplate:D.z.string(),description:D.z.optional(D.z.string()),mimeType:D.z.optional(D.z.string()),_meta:D.z.optional(D.z.object({}).passthrough())});W.ListResourcesRequestSchema=W.PaginatedRequestSchema.extend({method:D.z.literal("resources/list")});W.ListResourcesResultSchema=W.PaginatedResultSchema.extend({resources:D.z.array(W.ResourceSchema)});W.ListResourceTemplatesRequestSchema=W.PaginatedRequestSchema.extend({method:D.z.literal("resources/templates/list")});W.ListResourceTemplatesResultSchema=W.PaginatedResultSchema.extend({resourceTemplates:D.z.array(W.ResourceTemplateSchema)});W.ReadResourceRequestSchema=W.RequestSchema.extend({method:D.z.literal("resources/read"),params:Gv.extend({uri:D.z.string()})});W.ReadResourceResultSchema=W.ResultSchema.extend({contents:D.z.array(D.z.union([W.TextResourceContentsSchema,W.BlobResourceContentsSchema]))});W.ResourceListChangedNotificationSchema=W.NotificationSchema.extend({method:D.z.literal("notifications/resources/list_changed")});W.SubscribeRequestSchema=W.RequestSchema.extend({method:D.z.literal("resources/subscribe"),params:Gv.extend({uri:D.z.string()})});W.UnsubscribeRequestSchema=W.RequestSchema.extend({method:D.z.literal("resources/unsubscribe"),params:Gv.extend({uri:D.z.string()})});W.ResourceUpdatedNotificationSchema=W.NotificationSchema.extend({method:D.z.literal("notifications/resources/updated"),params:lf.extend({uri:D.z.string()})});W.PromptArgumentSchema=D.z.object({name:D.z.string(),description:D.z.optional(D.z.string()),required:D.z.optional(D.z.boolean())}).passthrough();W.PromptSchema=W.BaseMetadataSchema.extend({description:D.z.optional(D.z.string()),arguments:D.z.optional(D.z.array(W.PromptArgumentSchema)),_meta:D.z.optional(D.z.object({}).passthrough())});W.ListPromptsRequestSchema=W.PaginatedRequestSchema.extend({method:D.z.literal("prompts/list")});W.ListPromptsResultSchema=W.PaginatedResultSchema.extend({prompts:D.z.array(W.PromptSchema)});W.GetPromptRequestSchema=W.RequestSchema.extend({method:D.z.literal("prompts/get"),params:Gv.extend({name:D.z.string(),arguments:D.z.optional(D.z.record(D.z.string()))})});W.TextContentSchema=D.z.object({type:D.z.literal("text"),text:D.z.string(),_meta:D.z.optional(D.z.object({}).passthrough())}).passthrough();W.ImageContentSchema=D.z.object({type:D.z.literal("image"),data:pP,mimeType:D.z.string(),_meta:D.z.optional(D.z.object({}).passthrough())}).passthrough();W.AudioContentSchema=D.z.object({type:D.z.literal("audio"),data:pP,mimeType:D.z.string(),_meta:D.z.optional(D.z.object({}).passthrough())}).passthrough();W.EmbeddedResourceSchema=D.z.object({type:D.z.literal("resource"),resource:D.z.union([W.TextResourceContentsSchema,W.BlobResourceContentsSchema]),_meta:D.z.optional(D.z.object({}).passthrough())}).passthrough();W.ResourceLinkSchema=W.ResourceSchema.extend({type:D.z.literal("resource_link")});W.ContentBlockSchema=D.z.union([W.TextContentSchema,W.ImageContentSchema,W.AudioContentSchema,W.ResourceLinkSchema,W.EmbeddedResourceSchema]);W.PromptMessageSchema=D.z.object({role:D.z.enum(["user","assistant"]),content:W.ContentBlockSchema}).passthrough();W.GetPromptResultSchema=W.ResultSchema.extend({description:D.z.optional(D.z.string()),messages:D.z.array(W.PromptMessageSchema)});W.PromptListChangedNotificationSchema=W.NotificationSchema.extend({method:D.z.literal("notifications/prompts/list_changed")});W.ToolAnnotationsSchema=D.z.object({title:D.z.optional(D.z.string()),readOnlyHint:D.z.optional(D.z.boolean()),destructiveHint:D.z.optional(D.z.boolean()),idempotentHint:D.z.optional(D.z.boolean()),openWorldHint:D.z.optional(D.z.boolean())}).passthrough();W.ToolSchema=W.BaseMetadataSchema.extend({description:D.z.optional(D.z.string()),inputSchema:D.z.object({type:D.z.literal("object"),properties:D.z.optional(D.z.object({}).passthrough()),required:D.z.optional(D.z.array(D.z.string()))}).passthrough(),outputSchema:D.z.optional(D.z.object({type:D.z.literal("object"),properties:D.z.optional(D.z.object({}).passthrough()),required:D.z.optional(D.z.array(D.z.string()))}).passthrough()),annotations:D.z.optional(W.ToolAnnotationsSchema),_meta:D.z.optional(D.z.object({}).passthrough())});W.ListToolsRequestSchema=W.PaginatedRequestSchema.extend({method:D.z.literal("tools/list")});W.ListToolsResultSchema=W.PaginatedResultSchema.extend({tools:D.z.array(W.ToolSchema)});W.CallToolResultSchema=W.ResultSchema.extend({content:D.z.array(W.ContentBlockSchema).default([]),structuredContent:D.z.object({}).passthrough().optional(),isError:D.z.optional(D.z.boolean())});W.CompatibilityCallToolResultSchema=W.CallToolResultSchema.or(W.ResultSchema.extend({toolResult:D.z.unknown()}));W.CallToolRequestSchema=W.RequestSchema.extend({method:D.z.literal("tools/call"),params:Gv.extend({name:D.z.string(),arguments:D.z.optional(D.z.record(D.z.unknown()))})});W.ToolListChangedNotificationSchema=W.NotificationSchema.extend({method:D.z.literal("notifications/tools/list_changed")});W.LoggingLevelSchema=D.z.enum(["debug","info","notice","warning","error","critical","alert","emergency"]);W.SetLevelRequestSchema=W.RequestSchema.extend({method:D.z.literal("logging/setLevel"),params:Gv.extend({level:W.LoggingLevelSchema})});W.LoggingMessageNotificationSchema=W.NotificationSchema.extend({method:D.z.literal("notifications/message"),params:lf.extend({level:W.LoggingLevelSchema,logger:D.z.optional(D.z.string()),data:D.z.unknown()})});W.ModelHintSchema=D.z.object({name:D.z.string().optional()}).passthrough();W.ModelPreferencesSchema=D.z.object({hints:D.z.optional(D.z.array(W.ModelHintSchema)),costPriority:D.z.optional(D.z.number().min(0).max(1)),speedPriority:D.z.optional(D.z.number().min(0).max(1)),intelligencePriority:D.z.optional(D.z.number().min(0).max(1))}).passthrough();W.SamplingMessageSchema=D.z.object({role:D.z.enum(["user","assistant"]),content:D.z.union([W.TextContentSchema,W.ImageContentSchema,W.AudioContentSchema])}).passthrough();W.CreateMessageRequestSchema=W.RequestSchema.extend({method:D.z.literal("sampling/createMessage"),params:Gv.extend({messages:D.z.array(W.SamplingMessageSchema),systemPrompt:D.z.optional(D.z.string()),includeContext:D.z.optional(D.z.enum(["none","thisServer","allServers"])),temperature:D.z.optional(D.z.number()),maxTokens:D.z.number().int(),stopSequences:D.z.optional(D.z.array(D.z.string())),metadata:D.z.optional(D.z.object({}).passthrough()),modelPreferences:D.z.optional(W.ModelPreferencesSchema)})});W.CreateMessageResultSchema=W.ResultSchema.extend({model:D.z.string(),stopReason:D.z.optional(D.z.enum(["endTurn","stopSequence","maxTokens"]).or(D.z.string())),role:D.z.enum(["user","assistant"]),content:D.z.discriminatedUnion("type",[W.TextContentSchema,W.ImageContentSchema,W.AudioContentSchema])});W.BooleanSchemaSchema=D.z.object({type:D.z.literal("boolean"),title:D.z.optional(D.z.string()),description:D.z.optional(D.z.string()),default:D.z.optional(D.z.boolean())}).passthrough();W.StringSchemaSchema=D.z.object({type:D.z.literal("string"),title:D.z.optional(D.z.string()),description:D.z.optional(D.z.string()),minLength:D.z.optional(D.z.number()),maxLength:D.z.optional(D.z.number()),format:D.z.optional(D.z.enum(["email","uri","date","date-time"]))}).passthrough();W.NumberSchemaSchema=D.z.object({type:D.z.enum(["number","integer"]),title:D.z.optional(D.z.string()),description:D.z.optional(D.z.string()),minimum:D.z.optional(D.z.number()),maximum:D.z.optional(D.z.number())}).passthrough();W.EnumSchemaSchema=D.z.object({type:D.z.literal("string"),title:D.z.optional(D.z.string()),description:D.z.optional(D.z.string()),enum:D.z.array(D.z.string()),enumNames:D.z.optional(D.z.array(D.z.string()))}).passthrough();W.PrimitiveSchemaDefinitionSchema=D.z.union([W.BooleanSchemaSchema,W.StringSchemaSchema,W.NumberSchemaSchema,W.EnumSchemaSchema]);W.ElicitRequestSchema=W.RequestSchema.extend({method:D.z.literal("elicitation/create"),params:Gv.extend({message:D.z.string(),requestedSchema:D.z.object({type:D.z.literal("object"),properties:D.z.record(D.z.string(),W.PrimitiveSchemaDefinitionSchema),required:D.z.optional(D.z.array(D.z.string()))}).passthrough()})});W.ElicitResultSchema=W.ResultSchema.extend({action:D.z.enum(["accept","decline","cancel"]),content:D.z.optional(D.z.record(D.z.string(),D.z.unknown()))});W.ResourceTemplateReferenceSchema=D.z.object({type:D.z.literal("ref/resource"),uri:D.z.string()}).passthrough();W.ResourceReferenceSchema=W.ResourceTemplateReferenceSchema;W.PromptReferenceSchema=D.z.object({type:D.z.literal("ref/prompt"),name:D.z.string()}).passthrough();W.CompleteRequestSchema=W.RequestSchema.extend({method:D.z.literal("completion/complete"),params:Gv.extend({ref:D.z.union([W.PromptReferenceSchema,W.ResourceTemplateReferenceSchema]),argument:D.z.object({name:D.z.string(),value:D.z.string()}).passthrough(),context:D.z.optional(D.z.object({arguments:D.z.optional(D.z.record(D.z.string(),D.z.string()))}))})});W.CompleteResultSchema=W.ResultSchema.extend({completion:D.z.object({values:D.z.array(D.z.string()).max(100),total:D.z.optional(D.z.number().int()),hasMore:D.z.optional(D.z.boolean())}).passthrough()});W.RootSchema=D.z.object({uri:D.z.string().startsWith("file://"),name:D.z.optional(D.z.string()),_meta:D.z.optional(D.z.object({}).passthrough())}).passthrough();W.ListRootsRequestSchema=W.RequestSchema.extend({method:D.z.literal("roots/list")});W.ListRootsResultSchema=W.ResultSchema.extend({roots:D.z.array(W.RootSchema)});W.RootsListChangedNotificationSchema=W.NotificationSchema.extend({method:D.z.literal("notifications/roots/list_changed")});W.ClientRequestSchema=D.z.union([W.PingRequestSchema,W.InitializeRequestSchema,W.CompleteRequestSchema,W.SetLevelRequestSchema,W.GetPromptRequestSchema,W.ListPromptsRequestSchema,W.ListResourcesRequestSchema,W.ListResourceTemplatesRequestSchema,W.ReadResourceRequestSchema,W.SubscribeRequestSchema,W.UnsubscribeRequestSchema,W.CallToolRequestSchema,W.ListToolsRequestSchema]);W.ClientNotificationSchema=D.z.union([W.CancelledNotificationSchema,W.ProgressNotificationSchema,W.InitializedNotificationSchema,W.RootsListChangedNotificationSchema]);W.ClientResultSchema=D.z.union([W.EmptyResultSchema,W.CreateMessageResultSchema,W.ElicitResultSchema,W.ListRootsResultSchema]);W.ServerRequestSchema=D.z.union([W.PingRequestSchema,W.CreateMessageRequestSchema,W.ElicitRequestSchema,W.ListRootsRequestSchema]);W.ServerNotificationSchema=D.z.union([W.CancelledNotificationSchema,W.ProgressNotificationSchema,W.LoggingMessageNotificationSchema,W.ResourceUpdatedNotificationSchema,W.ResourceListChangedNotificationSchema,W.ToolListChangedNotificationSchema,W.PromptListChangedNotificationSchema]);W.ServerResultSchema=D.z.union([W.EmptyResultSchema,W.InitializeResultSchema,W.CompleteResultSchema,W.GetPromptResultSchema,W.ListPromptsResultSchema,W.ListResourcesResultSchema,W.ListResourceTemplatesResultSchema,W.ReadResourceResultSchema,W.CallToolResultSchema,W.ListToolsResultSchema]);class H9 extends Error{constructor(f,v,P){super(`MCP error ${f}: ${v}`);this.code=f,this.data=P,this.name="McpError"}}W.McpError=H9});var M9=z((P0)=>{Object.defineProperty(P0,"__esModule",{value:!0});P0.Protocol=P0.DEFAULT_REQUEST_TIMEOUT_MSEC=void 0;P0.mergeCapabilities=p4;var C1=_f();P0.DEFAULT_REQUEST_TIMEOUT_MSEC=60000;class L9{constructor(f){this._options=f,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(C1.CancelledNotificationSchema,(v)=>{let P=this._requestHandlerAbortControllers.get(v.params.requestId);P===null||P===void 0||P.abort(v.params.reason)}),this.setNotificationHandler(C1.ProgressNotificationSchema,(v)=>{this._onprogress(v)}),this.setRequestHandler(C1.PingRequestSchema,(v)=>({}))}_setupTimeout(f,v,P,J,Q=!1){this._timeoutInfo.set(f,{timeoutId:setTimeout(J,v),startTime:Date.now(),timeout:v,maxTotalTimeout:P,resetTimeoutOnProgress:Q,onTimeout:J})}_resetTimeout(f){let v=this._timeoutInfo.get(f);if(!v)return!1;let P=Date.now()-v.startTime;if(v.maxTotalTimeout&&P>=v.maxTotalTimeout)throw this._timeoutInfo.delete(f),new C1.McpError(C1.ErrorCode.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:v.maxTotalTimeout,totalElapsed:P});return clearTimeout(v.timeoutId),v.timeoutId=setTimeout(v.onTimeout,v.timeout),!0}_cleanupTimeout(f){let v=this._timeoutInfo.get(f);if(v)clearTimeout(v.timeoutId),this._timeoutInfo.delete(f)}async connect(f){var v,P,J;this._transport=f;let Q=(v=this.transport)===null||v===void 0?void 0:v.onclose;this._transport.onclose=()=>{Q===null||Q===void 0||Q(),this._onclose()};let Y=(P=this.transport)===null||P===void 0?void 0:P.onerror;this._transport.onerror=(q)=>{Y===null||Y===void 0||Y(q),this._onerror(q)};let X=(J=this._transport)===null||J===void 0?void 0:J.onmessage;this._transport.onmessage=(q,G)=>{if(X===null||X===void 0||X(q,G),C1.isJSONRPCResponse(q)||C1.isJSONRPCError(q))this._onresponse(q);else if(C1.isJSONRPCRequest(q))this._onrequest(q,G);else if(C1.isJSONRPCNotification(q))this._onnotification(q);else this._onerror(new Error(`Unknown message type: ${JSON.stringify(q)}`))},await this._transport.start()}_onclose(){var f;let v=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(f=this.onclose)===null||f===void 0||f.call(this);let P=new C1.McpError(C1.ErrorCode.ConnectionClosed,"Connection closed");for(let J of v.values())J(P)}_onerror(f){var v;(v=this.onerror)===null||v===void 0||v.call(this,f)}_onnotification(f){var v;let P=(v=this._notificationHandlers.get(f.method))!==null&&v!==void 0?v:this.fallbackNotificationHandler;if(P===void 0)return;Promise.resolve().then(()=>P(f)).catch((J)=>this._onerror(new Error(`Uncaught error in notification handler: ${J}`)))}_onrequest(f,v){var P,J;let Q=(P=this._requestHandlers.get(f.method))!==null&&P!==void 0?P:this.fallbackRequestHandler,Y=this._transport;if(Q===void 0){Y===null||Y===void 0||Y.send({jsonrpc:"2.0",id:f.id,error:{code:C1.ErrorCode.MethodNotFound,message:"Method not found"}}).catch((G)=>this._onerror(new Error(`Failed to send an error response: ${G}`)));return}let X=new AbortController;this._requestHandlerAbortControllers.set(f.id,X);let q={signal:X.signal,sessionId:Y===null||Y===void 0?void 0:Y.sessionId,_meta:(J=f.params)===null||J===void 0?void 0:J._meta,sendNotification:(G)=>this.notification(G,{relatedRequestId:f.id}),sendRequest:(G,V,B)=>this.request(G,V,{...B,relatedRequestId:f.id}),authInfo:v===null||v===void 0?void 0:v.authInfo,requestId:f.id,requestInfo:v===null||v===void 0?void 0:v.requestInfo};Promise.resolve().then(()=>Q(f,q)).then((G)=>{if(X.signal.aborted)return;return Y===null||Y===void 0?void 0:Y.send({result:G,jsonrpc:"2.0",id:f.id})},(G)=>{var V;if(X.signal.aborted)return;return Y===null||Y===void 0?void 0:Y.send({jsonrpc:"2.0",id:f.id,error:{code:Number.isSafeInteger(G.code)?G.code:C1.ErrorCode.InternalError,message:(V=G.message)!==null&&V!==void 0?V:"Internal error"}})}).catch((G)=>this._onerror(new Error(`Failed to send response: ${G}`))).finally(()=>{this._requestHandlerAbortControllers.delete(f.id)})}_onprogress(f){let{progressToken:v,...P}=f.params,J=Number(v),Q=this._progressHandlers.get(J);if(!Q){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(f)}`));return}let Y=this._responseHandlers.get(J),X=this._timeoutInfo.get(J);if(X&&Y&&X.resetTimeoutOnProgress)try{this._resetTimeout(J)}catch(q){Y(q);return}Q(P)}_onresponse(f){let v=Number(f.id),P=this._responseHandlers.get(v);if(P===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(f)}`));return}if(this._responseHandlers.delete(v),this._progressHandlers.delete(v),this._cleanupTimeout(v),C1.isJSONRPCResponse(f))P(f);else{let J=new C1.McpError(f.error.code,f.error.message,f.error.data);P(J)}}get transport(){return this._transport}async close(){var f;await((f=this._transport)===null||f===void 0?void 0:f.close())}request(f,v,P){let{relatedRequestId:J,resumptionToken:Q,onresumptiontoken:Y}=P!==null&&P!==void 0?P:{};return new Promise((X,q)=>{var G,V,B,O,L,K;if(!this._transport){q(new Error("Not connected"));return}if(((G=this._options)===null||G===void 0?void 0:G.enforceStrictCapabilities)===!0)this.assertCapabilityForMethod(f.method);(V=P===null||P===void 0?void 0:P.signal)===null||V===void 0||V.throwIfAborted();let N=this._requestMessageId++,M={...f,jsonrpc:"2.0",id:N};if(P===null||P===void 0?void 0:P.onprogress)this._progressHandlers.set(N,P.onprogress),M.params={...f.params,_meta:{...((B=f.params)===null||B===void 0?void 0:B._meta)||{},progressToken:N}};let H=(E)=>{var U;this._responseHandlers.delete(N),this._progressHandlers.delete(N),this._cleanupTimeout(N),(U=this._transport)===null||U===void 0||U.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:N,reason:String(E)}},{relatedRequestId:J,resumptionToken:Q,onresumptiontoken:Y}).catch((g)=>this._onerror(new Error(`Failed to send cancellation: ${g}`))),q(E)};this._responseHandlers.set(N,(E)=>{var U;if((U=P===null||P===void 0?void 0:P.signal)===null||U===void 0?void 0:U.aborted)return;if(E instanceof Error)return q(E);try{let g=v.parse(E.result);X(g)}catch(g){q(g)}}),(O=P===null||P===void 0?void 0:P.signal)===null||O===void 0||O.addEventListener("abort",()=>{var E;H((E=P===null||P===void 0?void 0:P.signal)===null||E===void 0?void 0:E.reason)});let I=(L=P===null||P===void 0?void 0:P.timeout)!==null&&L!==void 0?L:P0.DEFAULT_REQUEST_TIMEOUT_MSEC,S=()=>H(new C1.McpError(C1.ErrorCode.RequestTimeout,"Request timed out",{timeout:I}));this._setupTimeout(N,I,P===null||P===void 0?void 0:P.maxTotalTimeout,S,(K=P===null||P===void 0?void 0:P.resetTimeoutOnProgress)!==null&&K!==void 0?K:!1),this._transport.send(M,{relatedRequestId:J,resumptionToken:Q,onresumptiontoken:Y}).catch((E)=>{this._cleanupTimeout(N),q(E)})})}async notification(f,v){var P,J;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(f.method),((J=(P=this._options)===null||P===void 0?void 0:P.debouncedNotificationMethods)!==null&&J!==void 0?J:[]).includes(f.method)&&!f.params&&!(v===null||v===void 0?void 0:v.relatedRequestId)){if(this._pendingDebouncedNotifications.has(f.method))return;this._pendingDebouncedNotifications.add(f.method),Promise.resolve().then(()=>{var q;if(this._pendingDebouncedNotifications.delete(f.method),!this._transport)return;let G={...f,jsonrpc:"2.0"};(q=this._transport)===null||q===void 0||q.send(G,v).catch((V)=>this._onerror(V))});return}let X={...f,jsonrpc:"2.0"};await this._transport.send(X,v)}setRequestHandler(f,v){let P=f.shape.method.value;this.assertRequestHandlerCapability(P),this._requestHandlers.set(P,(J,Q)=>{return Promise.resolve(v(f.parse(J),Q))})}removeRequestHandler(f){this._requestHandlers.delete(f)}assertCanSetRequestHandler(f){if(this._requestHandlers.has(f))throw new Error(`A request handler for ${f} already exists, which would be overridden`)}setNotificationHandler(f,v){this._notificationHandlers.set(f.shape.method.value,(P)=>Promise.resolve(v(f.parse(P))))}removeNotificationHandler(f){this._notificationHandlers.delete(f)}}P0.Protocol=L9;function p4(f,v){return Object.entries(v).reduce((P,[J,Q])=>{if(Q&&typeof Q==="object")P[J]=P[J]?{...P[J],...Q}:Q;else P[J]=Q;return P},{...f})}});var F9=z((BQ,A9)=>{(function(f,v){typeof BQ==="object"&&typeof A9!=="undefined"?v(BQ):typeof define==="function"&&define.amd?define(["exports"],v):v(f.URI=f.URI||{})})(BQ,function(f){function v(){for(var A=arguments.length,$=Array(A),F=0;F<A;F++)$[F]=arguments[F];if($.length>1){$[0]=$[0].slice(0,-1);var R=$.length-1;for(var y=1;y<R;++y)$[y]=$[y].slice(1,-1);return $[R]=$[R].slice(1),$.join("")}else return $[0]}function P(A){return"(?:"+A+")"}function J(A){return A===void 0?"undefined":A===null?"null":Object.prototype.toString.call(A).split(" ").pop().split("]").shift().toLowerCase()}function Q(A){return A.toUpperCase()}function Y(A){return A!==void 0&&A!==null?A instanceof Array?A:typeof A.length!=="number"||A.split||A.setInterval||A.call?[A]:Array.prototype.slice.call(A):[]}function X(A,$){var F=A;if($)for(var R in $)F[R]=$[R];return F}function q(A){var $="[A-Za-z]",F="[\\x0D]",R="[0-9]",y="[\\x22]",x=v(R,"[A-Fa-f]"),o="[\\x0A]",q1="[\\x20]",V1=P(P("%[EFef]"+x+"%"+x+x+"%"+x+x)+"|"+P("%[89A-Fa-f]"+x+"%"+x+x)+"|"+P("%"+x+x)),E1="[\\:\\/\\?\\#\\[\\]\\@]",X1="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",L1=v(E1,X1),y1=A?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",H1=A?"[\\uE000-\\uF8FF]":"[]",W1=v($,R,"[\\-\\.\\_\\~]",y1),M1=P($+v($,R,"[\\+\\-\\.]")+"*"),$1=P(P(V1+"|"+v(W1,X1,"[\\:]"))+"*"),M0=P(P("25[0-5]")+"|"+P("2[0-4]"+R)+"|"+P("1"+R+R)+"|"+P("[1-9]"+R)+"|"+R),s1=P(P("25[0-5]")+"|"+P("2[0-4]"+R)+"|"+P("1"+R+R)+"|"+P("0?[1-9]"+R)+"|0?0?"+R),Pv=P(s1+"\\."+s1+"\\."+s1+"\\."+s1),O1=P(x+"{1,4}"),t1=P(P(O1+"\\:"+O1)+"|"+Pv),Jv=P(P(O1+"\\:")+"{6}"+t1),Iv=P("\\:\\:"+P(O1+"\\:")+"{5}"+t1),A0=P(P(O1)+"?\\:\\:"+P(O1+"\\:")+"{4}"+t1),Tv=P(P(P(O1+"\\:")+"{0,1}"+O1)+"?\\:\\:"+P(O1+"\\:")+"{3}"+t1),If=P(P(P(O1+"\\:")+"{0,2}"+O1)+"?\\:\\:"+P(O1+"\\:")+"{2}"+t1),JQ=P(P(P(O1+"\\:")+"{0,3}"+O1)+"?\\:\\:"+O1+"\\:"+t1),YQ=P(P(P(O1+"\\:")+"{0,4}"+O1)+"?\\:\\:"+t1),x0=P(P(P(O1+"\\:")+"{0,5}"+O1)+"?\\:\\:"+O1),m0=P(P(P(O1+"\\:")+"{0,6}"+O1)+"?\\:\\:"),bv=P([Jv,Iv,A0,Tv,If,JQ,YQ,x0,m0].join("|")),n0=P(P(W1+"|"+V1)+"+"),_P=P(bv+"\\%25"+n0),F0=P(bv+P("\\%25|\\%(?!"+x+"{2})")+n0),XX=P("[vV]"+x+"+\\."+v(W1,X1,"[\\:]")+"+"),qX=P("\\["+P(F0+"|"+bv+"|"+XX)+"\\]"),TJ=P(P(V1+"|"+v(W1,X1))+"*"),Rf=P(qX+"|"+Pv+"(?!"+TJ+")|"+TJ),Ef=P(R+"*"),bJ=P(P($1+"@")+"?"+Rf+P("\\:"+Ef)+"?"),yf=P(V1+"|"+v(W1,X1,"[\\:\\@]")),GX=P(yf+"*"),uJ=P(yf+"+"),WX=P(P(V1+"|"+v(W1,X1,"[\\@]"))+"+"),uv=P(P("\\/"+GX)+"*"),a0=P("\\/"+P(uJ+uv)+"?"),kP=P(WX+uv),XQ=P(uJ+uv),r0="(?!"+yf+")",tB=P(uv+"|"+a0+"|"+kP+"|"+XQ+"|"+r0),c0=P(P(yf+"|"+v("[\\/\\?]",H1))+"*"),zf=P(P(yf+"|[\\/\\?]")+"*"),lJ=P(P("\\/\\/"+bJ+uv)+"|"+a0+"|"+XQ+"|"+r0),DX=P(M1+"\\:"+lJ+P("\\?"+c0)+"?"+P("\\#"+zf)+"?"),VX=P(P("\\/\\/"+bJ+uv)+"|"+a0+"|"+kP+"|"+r0),KX=P(VX+P("\\?"+c0)+"?"+P("\\#"+zf)+"?"),oB=P(DX+"|"+KX),eB=P(M1+"\\:"+lJ+P("\\?"+c0)+"?"),v$="^("+M1+")\\:"+P(P("\\/\\/("+P("("+$1+")@")+"?("+Rf+")"+P("\\:("+Ef+")")+"?)")+"?("+uv+"|"+a0+"|"+XQ+"|"+r0+")")+P("\\?("+c0+")")+"?"+P("\\#("+zf+")")+"?$",f$="^(){0}"+P(P("\\/\\/("+P("("+$1+")@")+"?("+Rf+")"+P("\\:("+Ef+")")+"?)")+"?("+uv+"|"+a0+"|"+kP+"|"+r0+")")+P("\\?("+c0+")")+"?"+P("\\#("+zf+")")+"?$",Q$="^("+M1+")\\:"+P(P("\\/\\/("+P("("+$1+")@")+"?("+Rf+")"+P("\\:("+Ef+")")+"?)")+"?("+uv+"|"+a0+"|"+XQ+"|"+r0+")")+P("\\?("+c0+")")+"?$",P$="^"+P("\\#("+zf+")")+"?$",J$="^"+P("("+$1+")@")+"?("+Rf+")"+P("\\:("+Ef+")")+"?$";return{NOT_SCHEME:new RegExp(v("[^]",$,R,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(v("[^\\%\\:]",W1,X1),"g"),NOT_HOST:new RegExp(v("[^\\%\\[\\]\\:]",W1,X1),"g"),NOT_PATH:new RegExp(v("[^\\%\\/\\:\\@]",W1,X1),"g"),NOT_PATH_NOSCHEME:new RegExp(v("[^\\%\\/\\@]",W1,X1),"g"),NOT_QUERY:new RegExp(v("[^\\%]",W1,X1,"[\\:\\@\\/\\?]",H1),"g"),NOT_FRAGMENT:new RegExp(v("[^\\%]",W1,X1,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(v("[^]",W1,X1),"g"),UNRESERVED:new RegExp(W1,"g"),OTHER_CHARS:new RegExp(v("[^\\%]",W1,L1),"g"),PCT_ENCODED:new RegExp(V1,"g"),IPV4ADDRESS:new RegExp("^("+Pv+")$"),IPV6ADDRESS:new RegExp("^\\[?("+bv+")"+P(P("\\%25|\\%(?!"+x+"{2})")+"("+n0+")")+"?\\]?$")}}var G=q(!1),V=q(!0),B=function(){function A($,F){var R=[],y=!0,x=!1,o=void 0;try{for(var q1=$[Symbol.iterator](),V1;!(y=(V1=q1.next()).done);y=!0)if(R.push(V1.value),F&&R.length===F)break}catch(E1){x=!0,o=E1}finally{try{if(!y&&q1.return)q1.return()}finally{if(x)throw o}}return R}return function($,F){if(Array.isArray($))return $;else if(Symbol.iterator in Object($))return A($,F);else throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),O=function(A){if(Array.isArray(A)){for(var $=0,F=Array(A.length);$<A.length;$++)F[$]=A[$];return F}else return Array.from(A)},L=2147483647,K=36,N=1,M=26,H=38,I=700,S=72,E=128,U="-",g=/^xn--/,C=/[^\0-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=K-N,n=Math.floor,Z=String.fromCharCode;function _(A){throw new RangeError(m[A])}function j(A,$){var F=[],R=A.length;while(R--)F[R]=$(A[R]);return F}function b(A,$){var F=A.split("@"),R="";if(F.length>1)R=F[0]+"@",A=F[1];A=A.replace(k,".");var y=A.split("."),x=j(y,$).join(".");return R+x}function a(A){var $=[],F=0,R=A.length;while(F<R){var y=A.charCodeAt(F++);if(y>=55296&&y<=56319&&F<R){var x=A.charCodeAt(F++);if((x&64512)==56320)$.push(((y&1023)<<10)+(x&1023)+65536);else $.push(y),F--}else $.push(y)}return $}var K1=function A($){return String.fromCodePoint.apply(String,O($))},Q1=function A($){if($-48<10)return $-22;if($-65<26)return $-65;if($-97<26)return $-97;return K},Y1=function A($,F){return $+22+75*($<26)-((F!=0)<<5)},f1=function A($,F,R){var y=0;$=R?n($/I):$>>1,$+=n($/F);for(;$>T*M>>1;y+=K)$=n($/T);return n(y+(T+1)*$/($+H))},c=function A($){var F=[],R=$.length,y=0,x=E,o=S,q1=$.lastIndexOf(U);if(q1<0)q1=0;for(var V1=0;V1<q1;++V1){if($.charCodeAt(V1)>=128)_("not-basic");F.push($.charCodeAt(V1))}for(var E1=q1>0?q1+1:0;E1<R;){var X1=y;for(var L1=1,y1=K;;y1+=K){if(E1>=R)_("invalid-input");var H1=Q1($.charCodeAt(E1++));if(H1>=K||H1>n((L-y)/L1))_("overflow");y+=H1*L1;var W1=y1<=o?N:y1>=o+M?M:y1-o;if(H1<W1)break;var M1=K-W1;if(L1>n(L/M1))_("overflow");L1*=M1}var $1=F.length+1;if(o=f1(y-X1,$1,X1==0),n(y/$1)>L-x)_("overflow");x+=n(y/$1),y%=$1,F.splice(y++,0,x)}return String.fromCodePoint.apply(String,F)},F1=function A($){var F=[];$=a($);var R=$.length,y=E,x=0,o=S,q1=!0,V1=!1,E1=void 0;try{for(var X1=$[Symbol.iterator](),L1;!(q1=(L1=X1.next()).done);q1=!0){var y1=L1.value;if(y1<128)F.push(Z(y1))}}catch(F0){V1=!0,E1=F0}finally{try{if(!q1&&X1.return)X1.return()}finally{if(V1)throw E1}}var H1=F.length,W1=H1;if(H1)F.push(U);while(W1<R){var M1=L,$1=!0,M0=!1,s1=void 0;try{for(var Pv=$[Symbol.iterator](),O1;!($1=(O1=Pv.next()).done);$1=!0){var t1=O1.value;if(t1>=y&&t1<M1)M1=t1}}catch(F0){M0=!0,s1=F0}finally{try{if(!$1&&Pv.return)Pv.return()}finally{if(M0)throw s1}}var Jv=W1+1;if(M1-y>n((L-x)/Jv))_("overflow");x+=(M1-y)*Jv,y=M1;var Iv=!0,A0=!1,Tv=void 0;try{for(var If=$[Symbol.iterator](),JQ;!(Iv=(JQ=If.next()).done);Iv=!0){var YQ=JQ.value;if(YQ<y&&++x>L)_("overflow");if(YQ==y){var x0=x;for(var m0=K;;m0+=K){var bv=m0<=o?N:m0>=o+M?M:m0-o;if(x0<bv)break;var n0=x0-bv,_P=K-bv;F.push(Z(Y1(bv+n0%_P,0))),x0=n(n0/_P)}F.push(Z(Y1(x0,0))),o=f1(x,Jv,W1==H1),x=0,++W1}}}catch(F0){A0=!0,Tv=F0}finally{try{if(!Iv&&If.return)If.return()}finally{if(A0)throw Tv}}++x,++y}return F.join("")},T1=function A($){return b($,function(F){return g.test(F)?c(F.slice(4).toLowerCase()):F})},l1=function A($){return b($,function(F){return C.test(F)?"xn--"+F1(F):F})},G1={version:"2.1.0",ucs2:{decode:a,encode:K1},decode:c,encode:F1,toASCII:l1,toUnicode:T1},I1={};function S1(A){var $=A.charCodeAt(0),F=void 0;if($<16)F="%0"+$.toString(16).toUpperCase();else if($<128)F="%"+$.toString(16).toUpperCase();else if($<2048)F="%"+($>>6|192).toString(16).toUpperCase()+"%"+($&63|128).toString(16).toUpperCase();else F="%"+($>>12|224).toString(16).toUpperCase()+"%"+($>>6&63|128).toString(16).toUpperCase()+"%"+($&63|128).toString(16).toUpperCase();return F}function _1(A){var $="",F=0,R=A.length;while(F<R){var y=parseInt(A.substr(F+1,2),16);if(y<128)$+=String.fromCharCode(y),F+=3;else if(y>=194&&y<224){if(R-F>=6){var x=parseInt(A.substr(F+4,2),16);$+=String.fromCharCode((y&31)<<6|x&63)}else $+=A.substr(F,6);F+=6}else if(y>=224){if(R-F>=9){var o=parseInt(A.substr(F+4,2),16),q1=parseInt(A.substr(F+7,2),16);$+=String.fromCharCode((y&15)<<12|(o&63)<<6|q1&63)}else $+=A.substr(F,9);F+=9}else $+=A.substr(F,3),F+=3}return $}function pv(A,$){function F(R){var y=_1(R);return!y.match($.UNRESERVED)?R:y}if(A.scheme)A.scheme=String(A.scheme).replace($.PCT_ENCODED,F).toLowerCase().replace($.NOT_SCHEME,"");if(A.userinfo!==void 0)A.userinfo=String(A.userinfo).replace($.PCT_ENCODED,F).replace($.NOT_USERINFO,S1).replace($.PCT_ENCODED,Q);if(A.host!==void 0)A.host=String(A.host).replace($.PCT_ENCODED,F).toLowerCase().replace($.NOT_HOST,S1).replace($.PCT_ENCODED,Q);if(A.path!==void 0)A.path=String(A.path).replace($.PCT_ENCODED,F).replace(A.scheme?$.NOT_PATH:$.NOT_PATH_NOSCHEME,S1).replace($.PCT_ENCODED,Q);if(A.query!==void 0)A.query=String(A.query).replace($.PCT_ENCODED,F).replace($.NOT_QUERY,S1).replace($.PCT_ENCODED,Q);if(A.fragment!==void 0)A.fragment=String(A.fragment).replace($.PCT_ENCODED,F).replace($.NOT_FRAGMENT,S1).replace($.PCT_ENCODED,Q);return A}function Cv(A){return A.replace(/^0*(.*)/,"$1")||"0"}function R1(A,$){var F=A.match($.IPV4ADDRESS)||[],R=B(F,2),y=R[1];if(y)return y.split(".").map(Cv).join(".");else return A}function h1(A,$){var F=A.match($.IPV6ADDRESS)||[],R=B(F,3),y=R[1],x=R[2];if(y){var o=y.toLowerCase().split("::").reverse(),q1=B(o,2),V1=q1[0],E1=q1[1],X1=E1?E1.split(":").map(Cv):[],L1=V1.split(":").map(Cv),y1=$.IPV4ADDRESS.test(L1[L1.length-1]),H1=y1?7:8,W1=L1.length-H1,M1=Array(H1);for(var $1=0;$1<H1;++$1)M1[$1]=X1[$1]||L1[W1+$1]||"";if(y1)M1[H1-1]=R1(M1[H1-1],$);var M0=M1.reduce(function(Jv,Iv,A0){if(!Iv||Iv==="0"){var Tv=Jv[Jv.length-1];if(Tv&&Tv.index+Tv.length===A0)Tv.length++;else Jv.push({index:A0,length:1})}return Jv},[]),s1=M0.sort(function(Jv,Iv){return Iv.length-Jv.length})[0],Pv=void 0;if(s1&&s1.length>1){var O1=M1.slice(0,s1.index),t1=M1.slice(s1.index+s1.length);Pv=O1.join(":")+"::"+t1.join(":")}else Pv=M1.join(":");if(x)Pv+="%"+x;return Pv}else return A}var N0=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,b1="".match(/(){0}/)[1]===void 0;function D1(A){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},F={},R=$.iri!==!1?V:G;if($.reference==="suffix")A=($.scheme?$.scheme+":":"")+"//"+A;var y=A.match(N0);if(y){if(b1){if(F.scheme=y[1],F.userinfo=y[3],F.host=y[4],F.port=parseInt(y[5],10),F.path=y[6]||"",F.query=y[7],F.fragment=y[8],isNaN(F.port))F.port=y[5]}else if(F.scheme=y[1]||void 0,F.userinfo=A.indexOf("@")!==-1?y[3]:void 0,F.host=A.indexOf("//")!==-1?y[4]:void 0,F.port=parseInt(y[5],10),F.path=y[6]||"",F.query=A.indexOf("?")!==-1?y[7]:void 0,F.fragment=A.indexOf("#")!==-1?y[8]:void 0,isNaN(F.port))F.port=A.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?y[4]:void 0;if(F.host)F.host=h1(R1(F.host,R),R);if(F.scheme===void 0&&F.userinfo===void 0&&F.host===void 0&&F.port===void 0&&!F.path&&F.query===void 0)F.reference="same-document";else if(F.scheme===void 0)F.reference="relative";else if(F.fragment===void 0)F.reference="absolute";else F.reference="uri";if($.reference&&$.reference!=="suffix"&&$.reference!==F.reference)F.error=F.error||"URI is not a "+$.reference+" reference.";var x=I1[($.scheme||F.scheme||"").toLowerCase()];if(!$.unicodeSupport&&(!x||!x.unicodeSupport)){if(F.host&&($.domainHost||x&&x.domainHost))try{F.host=G1.toASCII(F.host.replace(R.PCT_ENCODED,_1).toLowerCase())}catch(o){F.error=F.error||"Host's domain name can not be converted to ASCII via punycode: "+o}pv(F,G)}else pv(F,R);if(x&&x.parse)x.parse(F,$)}else F.error=F.error||"URI can not be parsed.";return F}function sv(A,$){var F=$.iri!==!1?V:G,R=[];if(A.userinfo!==void 0)R.push(A.userinfo),R.push("@");if(A.host!==void 0)R.push(h1(R1(String(A.host),F),F).replace(F.IPV6ADDRESS,function(y,x,o){return"["+x+(o?"%25"+o:"")+"]"}));if(typeof A.port==="number"||typeof A.port==="string")R.push(":"),R.push(String(A.port));return R.length?R.join(""):void 0}var Zv=/^\.\.?\//,H0=/^\/\.(\/|$)/,L0=/^\/\.\.(\/|$)/,j1=/^\/?(?:.|\n)*?(?=\/|$)/;function Qv(A){var $=[];while(A.length)if(A.match(Zv))A=A.replace(Zv,"");else if(A.match(H0))A=A.replace(H0,"/");else if(A.match(L0))A=A.replace(L0,"/"),$.pop();else if(A==="."||A==="..")A="";else{var F=A.match(j1);if(F){var R=F[0];A=A.slice(R.length),$.push(R)}else throw new Error("Unexpected dot segment condition")}return $.join("")}function r1(A){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},F=$.iri?V:G,R=[],y=I1[($.scheme||A.scheme||"").toLowerCase()];if(y&&y.serialize)y.serialize(A,$);if(A.host){if(F.IPV6ADDRESS.test(A.host));else if($.domainHost||y&&y.domainHost)try{A.host=!$.iri?G1.toASCII(A.host.replace(F.PCT_ENCODED,_1).toLowerCase()):G1.toUnicode(A.host)}catch(q1){A.error=A.error||"Host's domain name can not be converted to "+(!$.iri?"ASCII":"Unicode")+" via punycode: "+q1}}if(pv(A,F),$.reference!=="suffix"&&A.scheme)R.push(A.scheme),R.push(":");var x=sv(A,$);if(x!==void 0){if($.reference!=="suffix")R.push("//");if(R.push(x),A.path&&A.path.charAt(0)!=="/")R.push("/")}if(A.path!==void 0){var o=A.path;if(!$.absolutePath&&(!y||!y.absolutePath))o=Qv(o);if(x===void 0)o=o.replace(/^\/\//,"/%2F");R.push(o)}if(A.query!==void 0)R.push("?"),R.push(A.query);if(A.fragment!==void 0)R.push("#"),R.push(A.fragment);return R.join("")}function k1(A,$){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},R=arguments[3],y={};if(!R)A=D1(r1(A,F),F),$=D1(r1($,F),F);if(F=F||{},!F.tolerant&&$.scheme)y.scheme=$.scheme,y.userinfo=$.userinfo,y.host=$.host,y.port=$.port,y.path=Qv($.path||""),y.query=$.query;else{if($.userinfo!==void 0||$.host!==void 0||$.port!==void 0)y.userinfo=$.userinfo,y.host=$.host,y.port=$.port,y.path=Qv($.path||""),y.query=$.query;else{if(!$.path)if(y.path=A.path,$.query!==void 0)y.query=$.query;else y.query=A.query;else{if($.path.charAt(0)==="/")y.path=Qv($.path);else{if((A.userinfo!==void 0||A.host!==void 0||A.port!==void 0)&&!A.path)y.path="/"+$.path;else if(!A.path)y.path=$.path;else y.path=A.path.slice(0,A.path.lastIndexOf("/")+1)+$.path;y.path=Qv(y.path)}y.query=$.query}y.userinfo=A.userinfo,y.host=A.host,y.port=A.port}y.scheme=A.scheme}return y.fragment=$.fragment,y}function hv(A,$,F){var R=X({scheme:"null"},F);return r1(k1(D1(A,R),D1($,R),R,!0),R)}function p1(A,$){if(typeof A==="string")A=r1(D1(A,$),$);else if(J(A)==="object")A=D1(r1(A,$),$);return A}function PQ(A,$,F){if(typeof A==="string")A=r1(D1(A,F),F);else if(J(A)==="object")A=r1(A,F);if(typeof $==="string")$=r1(D1($,F),F);else if(J($)==="object")$=r1($,F);return A===$}function uP(A,$){return A&&A.toString().replace(!$||!$.iri?G.ESCAPE:V.ESCAPE,S1)}function Bv(A,$){return A&&A.toString().replace(!$||!$.iri?G.PCT_ENCODED:V.PCT_ENCODED,_1)}var hf={scheme:"http",domainHost:!0,parse:function A($,F){if(!$.host)$.error=$.error||"HTTP URIs must have a host.";return $},serialize:function A($,F){var R=String($.scheme).toLowerCase()==="https";if($.port===(R?443:80)||$.port==="")$.port=void 0;if(!$.path)$.path="/";return $}},yJ={scheme:"https",domainHost:hf.domainHost,parse:hf.parse,serialize:hf.serialize};function zJ(A){return typeof A.secure==="boolean"?A.secure:String(A.scheme).toLowerCase()==="wss"}var wf={scheme:"ws",domainHost:!0,parse:function A($,F){var R=$;return R.secure=zJ(R),R.resourceName=(R.path||"/")+(R.query?"?"+R.query:""),R.path=void 0,R.query=void 0,R},serialize:function A($,F){if($.port===(zJ($)?443:80)||$.port==="")$.port=void 0;if(typeof $.secure==="boolean")$.scheme=$.secure?"wss":"ws",$.secure=void 0;if($.resourceName){var R=$.resourceName.split("?"),y=B(R,2),x=y[0],o=y[1];$.path=x&&x!=="/"?x:void 0,$.query=o,$.resourceName=void 0}return $.fragment=void 0,$}},SJ={scheme:"wss",domainHost:wf.domainHost,parse:wf.parse,serialize:wf.serialize},d7={},p7=!0,UJ="[A-Za-z0-9\\-\\.\\_\\~"+(p7?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",wv="[0-9A-Fa-f]",s7=P(P("%[EFef]"+wv+"%"+wv+wv+"%"+wv+wv)+"|"+P("%[89A-Fa-f]"+wv+"%"+wv+wv)+"|"+P("%"+wv+wv)),t7="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",o7="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",e7=v(o7,"[\\\"\\\\]"),vX="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",fX=new RegExp(UJ,"g"),k0=new RegExp(s7,"g"),QX=new RegExp(v("[^]",t7,"[\\.]","[\\\"]",e7),"g"),gJ=new RegExp(v("[^]",UJ,vX),"g"),PX=gJ;function lP(A){var $=_1(A);return!$.match(fX)?A:$}var jJ={scheme:"mailto",parse:function A($,F){var R=$,y=R.to=R.path?R.path.split(","):[];if(R.path=void 0,R.query){var x=!1,o={},q1=R.query.split("&");for(var V1=0,E1=q1.length;V1<E1;++V1){var X1=q1[V1].split("=");switch(X1[0]){case"to":var L1=X1[1].split(",");for(var y1=0,H1=L1.length;y1<H1;++y1)y.push(L1[y1]);break;case"subject":R.subject=Bv(X1[1],F);break;case"body":R.body=Bv(X1[1],F);break;default:x=!0,o[Bv(X1[0],F)]=Bv(X1[1],F);break}}if(x)R.headers=o}R.query=void 0;for(var W1=0,M1=y.length;W1<M1;++W1){var $1=y[W1].split("@");if($1[0]=Bv($1[0]),!F.unicodeSupport)try{$1[1]=G1.toASCII(Bv($1[1],F).toLowerCase())}catch(M0){R.error=R.error||"Email address's domain name can not be converted to ASCII via punycode: "+M0}else $1[1]=Bv($1[1],F).toLowerCase();y[W1]=$1.join("@")}return R},serialize:function A($,F){var R=$,y=Y($.to);if(y){for(var x=0,o=y.length;x<o;++x){var q1=String(y[x]),V1=q1.lastIndexOf("@"),E1=q1.slice(0,V1).replace(k0,lP).replace(k0,Q).replace(QX,S1),X1=q1.slice(V1+1);try{X1=!F.iri?G1.toASCII(Bv(X1,F).toLowerCase()):G1.toUnicode(X1)}catch(W1){R.error=R.error||"Email address's domain name can not be converted to "+(!F.iri?"ASCII":"Unicode")+" via punycode: "+W1}y[x]=E1+"@"+X1}R.path=y.join(",")}var L1=$.headers=$.headers||{};if($.subject)L1.subject=$.subject;if($.body)L1.body=$.body;var y1=[];for(var H1 in L1)if(L1[H1]!==d7[H1])y1.push(H1.replace(k0,lP).replace(k0,Q).replace(gJ,S1)+"="+L1[H1].replace(k0,lP).replace(k0,Q).replace(PX,S1));if(y1.length)R.query=y1.join("&");return R}},JX=/^([^\:]+)\:(.*)/,CJ={scheme:"urn",parse:function A($,F){var R=$.path&&$.path.match(JX),y=$;if(R){var x=F.scheme||y.scheme||"urn",o=R[1].toLowerCase(),q1=R[2],V1=x+":"+(F.nid||o),E1=I1[V1];if(y.nid=o,y.nss=q1,y.path=void 0,E1)y=E1.parse(y,F)}else y.error=y.error||"URN can not be parsed.";return y},serialize:function A($,F){var R=F.scheme||$.scheme||"urn",y=$.nid,x=R+":"+(F.nid||y),o=I1[x];if(o)$=o.serialize($,F);var q1=$,V1=$.nss;return q1.path=(y||F.nid)+":"+V1,q1}},YX=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ZJ={scheme:"urn:uuid",parse:function A($,F){var R=$;if(R.uuid=R.nss,R.nss=void 0,!F.tolerant&&(!R.uuid||!R.uuid.match(YX)))R.error=R.error||"UUID is not valid.";return R},serialize:function A($,F){var R=$;return R.nss=($.uuid||"").toLowerCase(),R}};I1[hf.scheme]=hf,I1[yJ.scheme]=yJ,I1[wf.scheme]=wf,I1[SJ.scheme]=SJ,I1[jJ.scheme]=jJ,I1[CJ.scheme]=CJ,I1[ZJ.scheme]=ZJ,f.SCHEMES=I1,f.pctEncChar=S1,f.pctDecChars=_1,f.parse=D1,f.removeDotSegments=Qv,f.serialize=r1,f.resolveComponents=k1,f.resolve=hv,f.normalize=p1,f.equal=PQ,f.escapeComponent=uP,f.unescapeComponent=Bv,Object.defineProperty(f,"__esModule",{value:!0})})});var $Q=z((M$,h9)=>{h9.exports=function f(v,P){if(v===P)return!0;if(v&&P&&typeof v=="object"&&typeof P=="object"){if(v.constructor!==P.constructor)return!1;var J,Q,Y;if(Array.isArray(v)){if(J=v.length,J!=P.length)return!1;for(Q=J;Q--!==0;)if(!f(v[Q],P[Q]))return!1;return!0}if(v.constructor===RegExp)return v.source===P.source&&v.flags===P.flags;if(v.valueOf!==Object.prototype.valueOf)return v.valueOf()===P.valueOf();if(v.toString!==Object.prototype.toString)return v.toString()===P.toString();if(Y=Object.keys(v),J=Y.length,J!==Object.keys(P).length)return!1;for(Q=J;Q--!==0;)if(!Object.prototype.hasOwnProperty.call(P,Y[Q]))return!1;for(Q=J;Q--!==0;){var X=Y[Q];if(!f(v[X],P[X]))return!1}return!0}return v!==v&&P!==P}});var I9=z((A$,w9)=>{w9.exports=function f(v){var P=0,J=v.length,Q=0,Y;while(Q<J)if(P++,Y=v.charCodeAt(Q++),Y>=55296&&Y<=56319&&Q<J){if(Y=v.charCodeAt(Q),(Y&64512)==56320)Q++}return P}});var y0=z((F$,y9)=>{y9.exports={copy:s4,checkDataType:sP,checkDataTypes:t4,coerceToTypes:o4,toHash:oP,getProperty:eP,escapeQuotes:v8,equal:$Q(),ucs2length:I9(),varOccurences:fq,varReplace:Qq,schemaHasRules:Pq,schemaHasRulesExcept:Jq,schemaUnknownRules:Yq,toQuotedString:tP,getPathExpr:Xq,getPath:qq,getData:Dq,unescapeFragment:Vq,unescapeJsonPointer:Q8,escapeFragment:Kq,escapeJsonPointer:f8};function s4(f,v){v=v||{};for(var P in f)v[P]=f[P];return v}function sP(f,v,P,J){var Q=J?" !== ":" === ",Y=J?" || ":" && ",X=J?"!":"",q=J?"":"!";switch(f){case"null":return v+Q+"null";case"array":return X+"Array.isArray("+v+")";case"object":return"("+X+v+Y+"typeof "+v+Q+'"object"'+Y+q+"Array.isArray("+v+"))";case"integer":return"(typeof "+v+Q+'"number"'+Y+q+"("+v+" % 1)"+Y+v+Q+v+(P?Y+X+"isFinite("+v+")":"")+")";case"number":return"(typeof "+v+Q+'"'+f+'"'+(P?Y+X+"isFinite("+v+")":"")+")";default:return"typeof "+v+Q+'"'+f+'"'}}function t4(f,v,P){switch(f.length){case 1:return sP(f[0],v,P,!0);default:var J="",Q=oP(f);if(Q.array&&Q.object)J=Q.null?"(":"(!"+v+" || ",J+="typeof "+v+' !== "object")',delete Q.null,delete Q.array,delete Q.object;if(Q.number)delete Q.integer;for(var Y in Q)J+=(J?" && ":"")+sP(Y,v,P,!0);return J}}var R9=oP(["string","number","integer","boolean","null"]);function o4(f,v){if(Array.isArray(v)){var P=[];for(var J=0;J<v.length;J++){var Q=v[J];if(R9[Q])P[P.length]=Q;else if(f==="array"&&Q==="array")P[P.length]=Q}if(P.length)return P}else if(R9[v])return[v];else if(f==="array"&&v==="array")return["array"]}function oP(f){var v={};for(var P=0;P<f.length;P++)v[f[P]]=!0;return v}var e4=/^[a-z$_][a-z$_0-9]*$/i,vq=/'|\\/g;function eP(f){return typeof f=="number"?"["+f+"]":e4.test(f)?"."+f:"['"+v8(f)+"']"}function v8(f){return f.replace(vq,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function fq(f,v){v+="[^0-9]";var P=f.match(new RegExp(v,"g"));return P?P.length:0}function Qq(f,v,P){return v+="([^0-9])",P=P.replace(/\$/g,"$$$$"),f.replace(new RegExp(v,"g"),P+"$1")}function Pq(f,v){if(typeof f=="boolean")return!f;for(var P in f)if(v[P])return!0}function Jq(f,v,P){if(typeof f=="boolean")return!f&&P!="not";for(var J in f)if(J!=P&&v[J])return!0}function Yq(f,v){if(typeof f=="boolean")return;for(var P in f)if(!v[P])return P}function tP(f){return"'"+v8(f)+"'"}function Xq(f,v,P,J){var Q=P?"'/' + "+v+(J?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):J?"'[' + "+v+" + ']'":"'[\\'' + "+v+" + '\\']'";return E9(f,Q)}function qq(f,v,P){var J=P?tP("/"+f8(v)):tP(eP(v));return E9(f,J)}var Gq=/^\/(?:[^~]|~0|~1)*$/,Wq=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Dq(f,v,P){var J,Q,Y,X;if(f==="")return"rootData";if(f[0]=="/"){if(!Gq.test(f))throw new Error("Invalid JSON-pointer: "+f);Q=f,Y="rootData"}else{if(X=f.match(Wq),!X)throw new Error("Invalid JSON-pointer: "+f);if(J=+X[1],Q=X[2],Q=="#"){if(J>=v)throw new Error("Cannot access property/index "+J+" levels up, current level is "+v);return P[v-J]}if(J>v)throw new Error("Cannot access data "+J+" levels up, current level is "+v);if(Y="data"+(v-J||""),!Q)return Y}var q=Y,G=Q.split("/");for(var V=0;V<G.length;V++){var B=G[V];if(B)Y+=eP(Q8(B)),q+=" && "+Y}return q}function E9(f,v){if(f=='""')return v;return(f+" + "+v).replace(/([^\\])' \+ '/g,"$1")}function Vq(f){return Q8(decodeURIComponent(f))}function Kq(f){return encodeURIComponent(f8(f))}function f8(f){return f.replace(/~/g,"~0").replace(/\//g,"~1")}function Q8(f){return f.replace(/~1/g,"/").replace(/~0/g,"~")}});var P8=z((h$,z9)=>{var Bq=y0();z9.exports=$q;function $q(f){Bq.copy(f,this)}});var U9=z((w$,S9)=>{var J0=S9.exports=function(f,v,P){if(typeof v=="function")P=v,v={};P=v.cb||P;var J=typeof P=="function"?P:P.pre||function(){},Q=P.post||function(){};OQ(v,J,Q,f,"",f)};J0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};J0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};J0.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};J0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function OQ(f,v,P,J,Q,Y,X,q,G,V){if(J&&typeof J=="object"&&!Array.isArray(J)){v(J,Q,Y,X,q,G,V);for(var B in J){var O=J[B];if(Array.isArray(O)){if(B in J0.arrayKeywords)for(var L=0;L<O.length;L++)OQ(f,v,P,O[L],Q+"/"+B+"/"+L,Y,Q,B,J,L)}else if(B in J0.propsKeywords){if(O&&typeof O=="object")for(var K in O)OQ(f,v,P,O[K],Q+"/"+B+"/"+Oq(K),Y,Q,B,J,K)}else if(B in J0.keywords||f.allKeys&&!(B in J0.skipKeywords))OQ(f,v,P,O,Q+"/"+B,Y,Q,B,J)}P(J,Q,Y,X,q,G,V)}}function Oq(f){return f.replace(/~/g,"~0").replace(/\//g,"~1")}});var FQ=z((I$,Z9)=>{var kf=F9(),g9=$Q(),MQ=y0(),NQ=P8(),Nq=U9();Z9.exports=X0;X0.normalizeId=Y0;X0.fullPath=HQ;X0.url=LQ;X0.ids=Fq;X0.inlineRef=J8;X0.schema=AQ;function X0(f,v,P){var J=this._refs[P];if(typeof J=="string")if(this._refs[J])J=this._refs[J];else return X0.call(this,f,v,J);if(J=J||this._schemas[P],J instanceof NQ)return J8(J.schema,this._opts.inlineRefs)?J.schema:J.validate||this._compile(J);var Q=AQ.call(this,v,P),Y,X,q;if(Q)Y=Q.schema,v=Q.root,q=Q.baseId;if(Y instanceof NQ)X=Y.validate||f.call(this,Y.schema,v,void 0,q);else if(Y!==void 0)X=J8(Y,this._opts.inlineRefs)?Y:f.call(this,Y,v,void 0,q);return X}function AQ(f,v){var P=kf.parse(v),J=C9(P),Q=HQ(this._getId(f.schema));if(Object.keys(f.schema).length===0||J!==Q){var Y=Y0(J),X=this._refs[Y];if(typeof X=="string")return Hq.call(this,f,X,P);else if(X instanceof NQ){if(!X.validate)this._compile(X);f=X}else if(X=this._schemas[Y],X instanceof NQ){if(!X.validate)this._compile(X);if(Y==Y0(v))return{schema:X,root:f,baseId:Q};f=X}else return;if(!f.schema)return;Q=HQ(this._getId(f.schema))}return j9.call(this,P,Q,f.schema,f)}function Hq(f,v,P){var J=AQ.call(this,f,v);if(J){var{schema:Q,baseId:Y}=J;f=J.root;var X=this._getId(Q);if(X)Y=LQ(Y,X);return j9.call(this,P,Y,Q,f)}}var Lq=MQ.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function j9(f,v,P,J){if(f.fragment=f.fragment||"",f.fragment.slice(0,1)!="/")return;var Q=f.fragment.split("/");for(var Y=1;Y<Q.length;Y++){var X=Q[Y];if(X){if(X=MQ.unescapeFragment(X),P=P[X],P===void 0)break;var q;if(!Lq[X]){if(q=this._getId(P),q)v=LQ(v,q);if(P.$ref){var G=LQ(v,P.$ref),V=AQ.call(this,J,G);if(V)P=V.schema,J=V.root,v=V.baseId}}}}if(P!==void 0&&P!==J.schema)return{schema:P,root:J,baseId:v}}var Mq=MQ.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function J8(f,v){if(v===!1)return!1;if(v===void 0||v===!0)return Y8(f);else if(v)return X8(f)<=v}function Y8(f){var v;if(Array.isArray(f)){for(var P=0;P<f.length;P++)if(v=f[P],typeof v=="object"&&!Y8(v))return!1}else for(var J in f){if(J=="$ref")return!1;if(v=f[J],typeof v=="object"&&!Y8(v))return!1}return!0}function X8(f){var v=0,P;if(Array.isArray(f))for(var J=0;J<f.length;J++){if(P=f[J],typeof P=="object")v+=X8(P);if(v==1/0)return 1/0}else for(var Q in f){if(Q=="$ref")return 1/0;if(Mq[Q])v++;else{if(P=f[Q],typeof P=="object")v+=X8(P)+1;if(v==1/0)return 1/0}}return v}function HQ(f,v){if(v!==!1)f=Y0(f);var P=kf.parse(f);return C9(P)}function C9(f){return kf.serialize(f).split("#")[0]+"#"}var Aq=/#\/?$/;function Y0(f){return f?f.replace(Aq,""):""}function LQ(f,v){return v=Y0(v),kf.resolve(f,v)}function Fq(f){var v=Y0(this._getId(f)),P={"":v},J={"":HQ(v,!1)},Q={},Y=this;return Nq(f,{allKeys:!0},function(X,q,G,V,B,O,L){if(q==="")return;var K=Y._getId(X),N=P[V],M=J[V]+"/"+B;if(L!==void 0)M+="/"+(typeof L=="number"?L:MQ.escapeFragment(L));if(typeof K=="string"){K=N=Y0(N?kf.resolve(N,K):K);var H=Y._refs[K];if(typeof H=="string")H=Y._refs[H];if(H&&H.schema){if(!g9(X,H.schema))throw new Error('id "'+K+'" resolves to more than one schema')}else if(K!=Y0(M))if(K[0]=="#"){if(Q[K]&&!g9(X,Q[K]))throw new Error('id "'+K+'" resolves to more than one schema');Q[K]=X}else Y._refs[K]=M}P[q]=N,J[q]=M}),Q}});var hQ=z((R$,b9)=>{var q8=FQ();b9.exports={Validation:T9(hq),MissingRef:T9(G8)};function hq(f){this.message="validation failed",this.errors=f,this.ajv=this.validation=!0}G8.message=function(f,v){return"can't resolve reference "+v+" from id "+f};function G8(f,v,P){this.message=P||G8.message(f,v),this.missingRef=q8.url(f,v),this.missingSchema=q8.normalizeId(q8.fullPath(this.missingRef))}function T9(f){return f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f}});var W8=z((E$,u9)=>{u9.exports=function(f,v){if(!v)v={};if(typeof v==="function")v={cmp:v};var P=typeof v.cycles==="boolean"?v.cycles:!1,J=v.cmp&&function(Y){return function(X){return function(q,G){var V={key:q,value:X[q]},B={key:G,value:X[G]};return Y(V,B)}}}(v.cmp),Q=[];return function Y(X){if(X&&X.toJSON&&typeof X.toJSON==="function")X=X.toJSON();if(X===void 0)return;if(typeof X=="number")return isFinite(X)?""+X:"null";if(typeof X!=="object")return JSON.stringify(X);var q,G;if(Array.isArray(X)){G="[";for(q=0;q<X.length;q++){if(q)G+=",";G+=Y(X[q])||"null"}return G+"]"}if(X===null)return"null";if(Q.indexOf(X)!==-1){if(P)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var V=Q.push(X)-1,B=Object.keys(X).sort(J&&J(X));G="";for(q=0;q<B.length;q++){var O=B[q],L=Y(X[O]);if(!L)continue;if(G)G+=",";G+=JSON.stringify(O)+":"+L}return Q.splice(V,1),"{"+G+"}"}(f)}});var D8=z((y$,l9)=>{l9.exports=function f(v,P,J){var Q="",Y=v.schema.$async===!0,X=v.util.schemaHasRulesExcept(v.schema,v.RULES.all,"$ref"),q=v.self._getId(v.schema);if(v.opts.strictKeywords){var G=v.util.schemaUnknownRules(v.schema,v.RULES.keywords);if(G){var V="unknown keyword: "+G;if(v.opts.strictKeywords==="log")v.logger.warn(V);else throw new Error(V)}}if(v.isTop){if(Q+=" var validate = ",Y)v.async=!0,Q+="async ";if(Q+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",q&&(v.opts.sourceCode||v.opts.processCode))Q+=" "+("/*# sourceURL="+q+" */")+" "}if(typeof v.schema=="boolean"||!(X||v.schema.$ref)){var P="false schema",B=v.level,O=v.dataLevel,L=v.schema[P],K=v.schemaPath+v.util.getProperty(P),N=v.errSchemaPath+"/"+P,g=!v.opts.allErrors,m,M="data"+(O||""),U="valid"+B;if(v.schema===!1){if(v.isTop)g=!0;else Q+=" var "+U+" = false; ";var H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(m||"false schema")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(N)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: 'boolean schema is false' ";if(v.opts.verbose)Q+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";Q+=" } "}else Q+=" {} ";var I=Q;if(Q=H.pop(),!v.compositeRule&&g)if(v.async)Q+=" throw new ValidationError(["+I+"]); ";else Q+=" validate.errors = ["+I+"]; return false; ";else Q+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else if(v.isTop)if(Y)Q+=" return data; ";else Q+=" validate.errors = null; return true; ";else Q+=" var "+U+" = true; ";if(v.isTop)Q+=" }; return validate; ";return Q}if(v.isTop){var S=v.isTop,B=v.level=0,O=v.dataLevel=0,M="data";if(v.rootId=v.resolve.fullPath(v.self._getId(v.root.schema)),v.baseId=v.baseId||v.rootId,delete v.isTop,v.dataPathArr=[""],v.schema.default!==void 0&&v.opts.useDefaults&&v.opts.strictDefaults){var E="default is ignored in the schema root";if(v.opts.strictDefaults==="log")v.logger.warn(E);else throw new Error(E)}Q+=" var vErrors = null; ",Q+=" var errors = 0;     ",Q+=" if (rootData === undefined) rootData = data; "}else{var{level:B,dataLevel:O}=v,M="data"+(O||"");if(q)v.baseId=v.resolve.url(v.baseId,q);if(Y&&!v.async)throw new Error("async schema in sync schema");Q+=" var errs_"+B+" = errors;"}var U="valid"+B,g=!v.opts.allErrors,C="",k="",m,T=v.schema.type,n=Array.isArray(T);if(T&&v.opts.nullable&&v.schema.nullable===!0){if(n){if(T.indexOf("null")==-1)T=T.concat("null")}else if(T!="null")T=[T,"null"],n=!0}if(n&&T.length==1)T=T[0],n=!1;if(v.schema.$ref&&X){if(v.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+v.errSchemaPath+'" (see option extendRefs)');else if(v.opts.extendRefs!==!0)X=!1,v.logger.warn('$ref: keywords ignored in schema at path "'+v.errSchemaPath+'"')}if(v.schema.$comment&&v.opts.$comment)Q+=" "+v.RULES.all.$comment.code(v,"$comment");if(T){if(v.opts.coerceTypes)var Z=v.util.coerceToTypes(v.opts.coerceTypes,T);var _=v.RULES.types[T];if(Z||n||_===!0||_&&!j1(_)){var K=v.schemaPath+".type",N=v.errSchemaPath+"/type",K=v.schemaPath+".type",N=v.errSchemaPath+"/type",j=n?"checkDataTypes":"checkDataType";if(Q+=" if ("+v.util[j](T,M,v.opts.strictNumbers,!0)+") { ",Z){var b="dataType"+B,a="coerced"+B;if(Q+=" var "+b+" = typeof "+M+"; var "+a+" = undefined; ",v.opts.coerceTypes=="array")Q+=" if ("+b+" == 'object' && Array.isArray("+M+") && "+M+".length == 1) { "+M+" = "+M+"[0]; "+b+" = typeof "+M+"; if ("+v.util.checkDataType(v.schema.type,M,v.opts.strictNumbers)+") "+a+" = "+M+"; } ";Q+=" if ("+a+" !== undefined) ; ";var K1=Z;if(K1){var Q1,Y1=-1,f1=K1.length-1;while(Y1<f1)if(Q1=K1[Y1+=1],Q1=="string")Q+=" else if ("+b+" == 'number' || "+b+" == 'boolean') "+a+" = '' + "+M+"; else if ("+M+" === null) "+a+" = ''; ";else if(Q1=="number"||Q1=="integer"){if(Q+=" else if ("+b+" == 'boolean' || "+M+" === null || ("+b+" == 'string' && "+M+" && "+M+" == +"+M+" ",Q1=="integer")Q+=" && !("+M+" % 1)";Q+=")) "+a+" = +"+M+"; "}else if(Q1=="boolean")Q+=" else if ("+M+" === 'false' || "+M+" === 0 || "+M+" === null) "+a+" = false; else if ("+M+" === 'true' || "+M+" === 1) "+a+" = true; ";else if(Q1=="null")Q+=" else if ("+M+" === '' || "+M+" === 0 || "+M+" === false) "+a+" = null; ";else if(v.opts.coerceTypes=="array"&&Q1=="array")Q+=" else if ("+b+" == 'string' || "+b+" == 'number' || "+b+" == 'boolean' || "+M+" == null) "+a+" = ["+M+"]; "}Q+=" else {   ";var H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(m||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(N)+" , params: { type: '",n)Q+=""+T.join(",");else Q+=""+T;if(Q+="' } ",v.opts.messages!==!1){if(Q+=" , message: 'should be ",n)Q+=""+T.join(",");else Q+=""+T;Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+K+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";Q+=" } "}else Q+=" {} ";var I=Q;if(Q=H.pop(),!v.compositeRule&&g)if(v.async)Q+=" throw new ValidationError(["+I+"]); ";else Q+=" validate.errors = ["+I+"]; return false; ";else Q+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";Q+=" } if ("+a+" !== undefined) {  ";var c=O?"data"+(O-1||""):"parentData",F1=O?v.dataPathArr[O]:"parentDataProperty";if(Q+=" "+M+" = "+a+"; ",!O)Q+="if ("+c+" !== undefined)";Q+=" "+c+"["+F1+"] = "+a+"; } "}else{var H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(m||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(N)+" , params: { type: '",n)Q+=""+T.join(",");else Q+=""+T;if(Q+="' } ",v.opts.messages!==!1){if(Q+=" , message: 'should be ",n)Q+=""+T.join(",");else Q+=""+T;Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+K+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";Q+=" } "}else Q+=" {} ";var I=Q;if(Q=H.pop(),!v.compositeRule&&g)if(v.async)Q+=" throw new ValidationError(["+I+"]); ";else Q+=" validate.errors = ["+I+"]; return false; ";else Q+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}Q+=" } "}}if(v.schema.$ref&&!X){if(Q+=" "+v.RULES.all.$ref.code(v,"$ref")+" ",g){if(Q+=" } if (errors === ",S)Q+="0";else Q+="errs_"+B;Q+=") { ",k+="}"}}else{var T1=v.RULES;if(T1){var _,l1=-1,G1=T1.length-1;while(l1<G1)if(_=T1[l1+=1],j1(_)){if(_.type)Q+=" if ("+v.util.checkDataType(_.type,M,v.opts.strictNumbers)+") { ";if(v.opts.useDefaults){if(_.type=="object"&&v.schema.properties){var L=v.schema.properties,I1=Object.keys(L),S1=I1;if(S1){var _1,pv=-1,Cv=S1.length-1;while(pv<Cv){_1=S1[pv+=1];var R1=L[_1];if(R1.default!==void 0){var h1=M+v.util.getProperty(_1);if(v.compositeRule){if(v.opts.strictDefaults){var E="default is ignored for: "+h1;if(v.opts.strictDefaults==="log")v.logger.warn(E);else throw new Error(E)}}else{if(Q+=" if ("+h1+" === undefined ",v.opts.useDefaults=="empty")Q+=" || "+h1+" === null || "+h1+" === '' ";if(Q+=" ) "+h1+" = ",v.opts.useDefaults=="shared")Q+=" "+v.useDefault(R1.default)+" ";else Q+=" "+JSON.stringify(R1.default)+" ";Q+="; "}}}}}else if(_.type=="array"&&Array.isArray(v.schema.items)){var N0=v.schema.items;if(N0){var R1,Y1=-1,b1=N0.length-1;while(Y1<b1)if(R1=N0[Y1+=1],R1.default!==void 0){var h1=M+"["+Y1+"]";if(v.compositeRule){if(v.opts.strictDefaults){var E="default is ignored for: "+h1;if(v.opts.strictDefaults==="log")v.logger.warn(E);else throw new Error(E)}}else{if(Q+=" if ("+h1+" === undefined ",v.opts.useDefaults=="empty")Q+=" || "+h1+" === null || "+h1+" === '' ";if(Q+=" ) "+h1+" = ",v.opts.useDefaults=="shared")Q+=" "+v.useDefault(R1.default)+" ";else Q+=" "+JSON.stringify(R1.default)+" ";Q+="; "}}}}}var D1=_.rules;if(D1){var sv,Zv=-1,H0=D1.length-1;while(Zv<H0)if(sv=D1[Zv+=1],Qv(sv)){var L0=sv.code(v,sv.keyword,_.type);if(L0){if(Q+=" "+L0+" ",g)C+="}"}}}if(g)Q+=" "+C+" ",C="";if(_.type){if(Q+=" } ",T&&T===_.type&&!Z){Q+=" else { ";var K=v.schemaPath+".type",N=v.errSchemaPath+"/type",H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(m||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(N)+" , params: { type: '",n)Q+=""+T.join(",");else Q+=""+T;if(Q+="' } ",v.opts.messages!==!1){if(Q+=" , message: 'should be ",n)Q+=""+T.join(",");else Q+=""+T;Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+K+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";Q+=" } "}else Q+=" {} ";var I=Q;if(Q=H.pop(),!v.compositeRule&&g)if(v.async)Q+=" throw new ValidationError(["+I+"]); ";else Q+=" validate.errors = ["+I+"]; return false; ";else Q+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";Q+=" } "}}if(g){if(Q+=" if (errors === ",S)Q+="0";else Q+="errs_"+B;Q+=") { ",k+="}"}}}}if(g)Q+=" "+k+" ";if(S){if(Y)Q+=" if (errors === 0) return data;           ",Q+=" else throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; ",Q+=" return errors === 0;       ";Q+=" }; return validate;"}else Q+=" var "+U+" = errors === errs_"+B+";";function j1(k1){var hv=k1.rules;for(var p1=0;p1<hv.length;p1++)if(Qv(hv[p1]))return!0}function Qv(k1){return v.schema[k1.keyword]!==void 0||k1.implements&&r1(k1)}function r1(k1){var hv=k1.implements;for(var p1=0;p1<hv.length;p1++)if(v.schema[hv[p1]]!==void 0)return!0}return Q}});var n9=z((z$,m9)=>{var wQ=FQ(),RQ=y0(),k9=hQ(),wq=W8(),_9=D8(),Iq=RQ.ucs2length,Rq=$Q(),Eq=k9.Validation;m9.exports=V8;function V8(f,v,P,J){var Q=this,Y=this._opts,X=[void 0],q={},G=[],V={},B=[],O={},L=[];v=v||{schema:f,refVal:X,refs:q};var K=yq.call(this,f,v,J),N=this._compilations[K.index];if(K.compiling)return N.callValidate=E;var M=this._formats,H=this.RULES;try{var I=U(f,v,P,J);N.validate=I;var S=N.callValidate;if(S){if(S.schema=I.schema,S.errors=null,S.refs=I.refs,S.refVal=I.refVal,S.root=I.root,S.$async=I.$async,Y.sourceCode)S.source=I.source}return I}finally{zq.call(this,f,v,J)}function E(){var j=N.validate,b=j.apply(this,arguments);return E.errors=j.errors,b}function U(j,b,a,K1){var Q1=!b||b&&b.schema==j;if(b.schema!=v.schema)return V8.call(Q,j,b,a,K1);var Y1=j.$async===!0,f1=_9({isTop:!0,schema:j,isRoot:Q1,baseId:K1,root:b,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:k9.MissingRef,RULES:H,validate:_9,util:RQ,resolve:wQ,resolveRef:g,usePattern:n,useDefault:Z,useCustomRule:_,opts:Y,formats:M,logger:Q.logger,self:Q});if(f1=IQ(X,gq)+IQ(G,Sq)+IQ(B,Uq)+IQ(L,jq)+f1,Y.processCode)f1=Y.processCode(f1,j);var c;try{var F1=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",f1);c=F1(Q,H,M,v,X,B,L,Rq,Iq,Eq),X[0]=c}catch(T1){throw Q.logger.error("Error compiling schema, function code:",f1),T1}if(c.schema=j,c.errors=null,c.refs=q,c.refVal=X,c.root=Q1?c:b,Y1)c.$async=!0;if(Y.sourceCode===!0)c.source={code:f1,patterns:G,defaults:B};return c}function g(j,b,a){b=wQ.url(j,b);var K1=q[b],Q1,Y1;if(K1!==void 0)return Q1=X[K1],Y1="refVal["+K1+"]",T(Q1,Y1);if(!a&&v.refs){var f1=v.refs[b];if(f1!==void 0)return Q1=v.refVal[f1],Y1=C(b,Q1),T(Q1,Y1)}Y1=C(b);var c=wQ.call(Q,U,v,b);if(c===void 0){var F1=P&&P[b];if(F1)c=wQ.inlineRef(F1,Y.inlineRefs)?F1:V8.call(Q,F1,v,P,j)}if(c===void 0)k(b);else return m(b,c),T(c,Y1)}function C(j,b){var a=X.length;return X[a]=b,q[j]=a,"refVal"+a}function k(j){delete q[j]}function m(j,b){var a=q[j];X[a]=b}function T(j,b){return typeof j=="object"||typeof j=="boolean"?{code:b,schema:j,inline:!0}:{code:b,$async:j&&!!j.$async}}function n(j){var b=V[j];if(b===void 0)b=V[j]=G.length,G[b]=j;return"pattern"+b}function Z(j){switch(typeof j){case"boolean":case"number":return""+j;case"string":return RQ.toQuotedString(j);case"object":if(j===null)return"null";var b=wq(j),a=O[b];if(a===void 0)a=O[b]=B.length,B[a]=j;return"default"+a}}function _(j,b,a,K1){if(Q._opts.validateSchema!==!1){var Q1=j.definition.dependencies;if(Q1&&!Q1.every(function(S1){return Object.prototype.hasOwnProperty.call(a,S1)}))throw new Error("parent schema must have all required keywords: "+Q1.join(","));var Y1=j.definition.validateSchema;if(Y1){var f1=Y1(b);if(!f1){var c="keyword schema is invalid: "+Q.errorsText(Y1.errors);if(Q._opts.validateSchema=="log")Q.logger.error(c);else throw new Error(c)}}}var F1=j.definition.compile,T1=j.definition.inline,l1=j.definition.macro,G1;if(F1)G1=F1.call(Q,b,a,K1);else if(l1){if(G1=l1.call(Q,b,a,K1),Y.validateSchema!==!1)Q.validateSchema(G1,!0)}else if(T1)G1=T1.call(Q,K1,j.keyword,b,a);else if(G1=j.definition.validate,!G1)return;if(G1===void 0)throw new Error('custom keyword "'+j.keyword+'"failed to compile');var I1=L.length;return L[I1]=G1,{code:"customRule"+I1,validate:G1}}}function yq(f,v,P){var J=x9.call(this,f,v,P);if(J>=0)return{index:J,compiling:!0};return J=this._compilations.length,this._compilations[J]={schema:f,root:v,baseId:P},{index:J,compiling:!1}}function zq(f,v,P){var J=x9.call(this,f,v,P);if(J>=0)this._compilations.splice(J,1)}function x9(f,v,P){for(var J=0;J<this._compilations.length;J++){var Q=this._compilations[J];if(Q.schema==f&&Q.root==v&&Q.baseId==P)return J}return-1}function Sq(f,v){return"var pattern"+f+" = new RegExp("+RQ.toQuotedString(v[f])+");"}function Uq(f){return"var default"+f+" = defaults["+f+"];"}function gq(f,v){return v[f]===void 0?"":"var refVal"+f+" = refVal["+f+"];"}function jq(f){return"var customRule"+f+" = customRules["+f+"];"}function IQ(f,v){if(!f.length)return"";var P="";for(var J=0;J<f.length;J++)P+=v(J,f);return P}});var r9=z((S$,a9)=>{var EQ=a9.exports=function f(){this._cache={}};EQ.prototype.put=function f(v,P){this._cache[v]=P};EQ.prototype.get=function f(v){return this._cache[v]};EQ.prototype.del=function f(v){delete this._cache[v]};EQ.prototype.clear=function f(){this._cache={}}});var P6=z((U$,Q6)=>{var Cq=y0(),Zq=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Tq=[0,31,28,31,30,31,30,31,31,30,31,30,31],bq=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,c9=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,uq=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,lq=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,i9=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,d9=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,p9=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,s9=/^(?:\/(?:[^~/]|~0|~1)*)*$/,t9=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,o9=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;Q6.exports=yQ;function yQ(f){return f=f=="full"?"full":"fast",Cq.copy(yQ[f])}yQ.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":i9,url:d9,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:c9,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:f6,uuid:p9,"json-pointer":s9,"json-pointer-uri-fragment":t9,"relative-json-pointer":o9};yQ.full={date:e9,time:v6,"date-time":xq,uri:nq,"uri-reference":lq,"uri-template":i9,url:d9,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:c9,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:f6,uuid:p9,"json-pointer":s9,"json-pointer-uri-fragment":t9,"relative-json-pointer":o9};function _q(f){return f%4===0&&(f%100!==0||f%400===0)}function e9(f){var v=f.match(Zq);if(!v)return!1;var P=+v[1],J=+v[2],Q=+v[3];return J>=1&&J<=12&&Q>=1&&Q<=(J==2&&_q(P)?29:Tq[J])}function v6(f,v){var P=f.match(bq);if(!P)return!1;var J=P[1],Q=P[2],Y=P[3],X=P[5];return(J<=23&&Q<=59&&Y<=59||J==23&&Q==59&&Y==60)&&(!v||X)}var kq=/t|\s/i;function xq(f){var v=f.split(kq);return v.length==2&&e9(v[0])&&v6(v[1],!0)}var mq=/\/|:/;function nq(f){return mq.test(f)&&uq.test(f)}var aq=/[^\\]\\Z/;function f6(f){if(aq.test(f))return!1;try{return new RegExp(f),!0}catch(v){return!1}}});var Y6=z((g$,J6)=>{J6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.errSchemaPath+"/"+P,V=!v.opts.allErrors,B="data"+(X||""),O="valid"+Y,L,K;if(q=="#"||q=="#/")if(v.isRoot)L=v.async,K="validate";else L=v.root.schema.$async===!0,K="root.refVal[0]";else{var N=v.resolveRef(v.baseId,q,v.isRoot);if(N===void 0){var M=v.MissingRefError.message(v.baseId,q);if(v.opts.missingRefs=="fail"){v.logger.error(M);var H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { ref: '"+v.util.escapeQuotes(q)+"' } ",v.opts.messages!==!1)Q+=" , message: 'can\\'t resolve reference "+v.util.escapeQuotes(q)+"' ";if(v.opts.verbose)Q+=" , schema: "+v.util.toQuotedString(q)+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+B+" ";Q+=" } "}else Q+=" {} ";var I=Q;if(Q=H.pop(),!v.compositeRule&&V)if(v.async)Q+=" throw new ValidationError(["+I+"]); ";else Q+=" validate.errors = ["+I+"]; return false; ";else Q+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(V)Q+=" if (false) { "}else if(v.opts.missingRefs=="ignore"){if(v.logger.warn(M),V)Q+=" if (true) { "}else throw new v.MissingRefError(v.baseId,q,M)}else if(N.inline){var S=v.util.copy(v);S.level++;var E="valid"+S.level;S.schema=N.schema,S.schemaPath="",S.errSchemaPath=q;var U=v.validate(S).replace(/validate\.schema/g,N.code);if(Q+=" "+U+" ",V)Q+=" if ("+E+") { "}else L=N.$async===!0||v.async&&N.$async!==!1,K=N.code}if(K){var H=H||[];if(H.push(Q),Q="",v.opts.passContext)Q+=" "+K+".call(this, ";else Q+=" "+K+"( ";if(Q+=" "+B+", (dataPath || '')",v.errorPath!='""')Q+=" + "+v.errorPath;var g=X?"data"+(X-1||""):"parentData",C=X?v.dataPathArr[X]:"parentDataProperty";Q+=" , "+g+" , "+C+", rootData)  ";var k=Q;if(Q=H.pop(),L){if(!v.async)throw new Error("async schema referenced by sync schema");if(V)Q+=" var "+O+"; ";if(Q+=" try { await "+k+"; ",V)Q+=" "+O+" = true; ";if(Q+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",V)Q+=" "+O+" = false; ";if(Q+=" } ",V)Q+=" if ("+O+") { "}else if(Q+=" if (!"+k+") { if (vErrors === null) vErrors = "+K+".errors; else vErrors = vErrors.concat("+K+".errors); errors = vErrors.length; } ",V)Q+=" else { "}return Q}});var q6=z((j$,X6)=>{X6.exports=function f(v,P,J){var Q=" ",Y=v.schema[P],X=v.schemaPath+v.util.getProperty(P),q=v.errSchemaPath+"/"+P,G=!v.opts.allErrors,V=v.util.copy(v),B="";V.level++;var O="valid"+V.level,L=V.baseId,K=!0,N=Y;if(N){var M,H=-1,I=N.length-1;while(H<I)if(M=N[H+=1],v.opts.strictKeywords?typeof M=="object"&&Object.keys(M).length>0||M===!1:v.util.schemaHasRules(M,v.RULES.all)){if(K=!1,V.schema=M,V.schemaPath=X+"["+H+"]",V.errSchemaPath=q+"/"+H,Q+="  "+v.validate(V)+" ",V.baseId=L,G)Q+=" if ("+O+") { ",B+="}"}}if(G)if(K)Q+=" if (true) { ";else Q+=" "+B.slice(0,-1)+" ";return Q}});var W6=z((C$,G6)=>{G6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||""),L="valid"+Y,K="errs__"+Y,N=v.util.copy(v),M="";N.level++;var H="valid"+N.level,I=q.every(function(m){return v.opts.strictKeywords?typeof m=="object"&&Object.keys(m).length>0||m===!1:v.util.schemaHasRules(m,v.RULES.all)});if(I){var S=N.baseId;Q+=" var "+K+" = errors; var "+L+" = false;  ";var E=v.compositeRule;v.compositeRule=N.compositeRule=!0;var U=q;if(U){var g,C=-1,k=U.length-1;while(C<k)g=U[C+=1],N.schema=g,N.schemaPath=G+"["+C+"]",N.errSchemaPath=V+"/"+C,Q+="  "+v.validate(N)+" ",N.baseId=S,Q+=" "+L+" = "+L+" || "+H+"; if (!"+L+") { ",M+="}"}if(v.compositeRule=N.compositeRule=E,Q+=" "+M+" if (!"+L+") {   var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: 'should match some schema in anyOf' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; return false; ";if(Q+=" } else {  errors = "+K+"; if (vErrors !== null) { if ("+K+") vErrors.length = "+K+"; else vErrors = null; } ",v.opts.allErrors)Q+=" } "}else if(B)Q+=" if (true) { ";return Q}});var V6=z((Z$,D6)=>{D6.exports=function f(v,P,J){var Q=" ",Y=v.schema[P],X=v.errSchemaPath+"/"+P,q=!v.opts.allErrors,G=v.util.toQuotedString(Y);if(v.opts.$comment===!0)Q+=" console.log("+G+");";else if(typeof v.opts.$comment=="function")Q+=" self._opts.$comment("+G+", "+v.util.toQuotedString(X)+", validate.root.schema);";return Q}});var B6=z((T$,K6)=>{K6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||""),L="valid"+Y,K=v.opts.$data&&q&&q.$data,N;if(K)Q+=" var schema"+Y+" = "+v.util.getData(q.$data,X,v.dataPathArr)+"; ",N="schema"+Y;else N=q;if(!K)Q+=" var schema"+Y+" = validate.schema"+G+";";Q+="var "+L+" = equal("+O+", schema"+Y+"); if (!"+L+") {   ";var M=M||[];if(M.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'const' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { allowedValue: schema"+Y+" } ",v.opts.messages!==!1)Q+=" , message: 'should be equal to constant' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";var H=Q;if(Q=M.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+H+"]); ";else Q+=" validate.errors = ["+H+"]; return false; ";else Q+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" }",B)Q+=" else { ";return Q}});var O6=z((b$,$6)=>{$6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||""),L="valid"+Y,K="errs__"+Y,N=v.util.copy(v),M="";N.level++;var H="valid"+N.level,I="i"+Y,S=N.dataLevel=v.dataLevel+1,E="data"+S,U=v.baseId,g=v.opts.strictKeywords?typeof q=="object"&&Object.keys(q).length>0||q===!1:v.util.schemaHasRules(q,v.RULES.all);if(Q+="var "+K+" = errors;var "+L+";",g){var C=v.compositeRule;v.compositeRule=N.compositeRule=!0,N.schema=q,N.schemaPath=G,N.errSchemaPath=V,Q+=" var "+H+" = false; for (var "+I+" = 0; "+I+" < "+O+".length; "+I+"++) { ",N.errorPath=v.util.getPathExpr(v.errorPath,I,v.opts.jsonPointers,!0);var k=O+"["+I+"]";N.dataPathArr[S]=I;var m=v.validate(N);if(N.baseId=U,v.util.varOccurences(m,E)<2)Q+=" "+v.util.varReplace(m,E,k)+" ";else Q+=" var "+E+" = "+k+"; "+m+" ";Q+=" if ("+H+") break; }  ",v.compositeRule=N.compositeRule=C,Q+=" "+M+" if (!"+H+") {"}else Q+=" if ("+O+".length == 0) {";var T=T||[];if(T.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: 'should contain a valid item' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";var n=Q;if(Q=T.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+n+"]); ";else Q+=" validate.errors = ["+n+"]; return false; ";else Q+=" var err = "+n+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } else { ",g)Q+="  errors = "+K+"; if (vErrors !== null) { if ("+K+") vErrors.length = "+K+"; else vErrors = null; } ";if(v.opts.allErrors)Q+=" } ";return Q}});var H6=z((u$,N6)=>{N6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||""),L="errs__"+Y,K=v.util.copy(v),N="";K.level++;var M="valid"+K.level,H={},I={},S=v.opts.ownProperties;for(C in q){if(C=="__proto__")continue;var E=q[C],U=Array.isArray(E)?I:H;U[C]=E}Q+="var "+L+" = errors;";var g=v.errorPath;Q+="var missing"+Y+";";for(var C in I)if(U=I[C],U.length){if(Q+=" if ( "+O+v.util.getProperty(C)+" !== undefined ",S)Q+=" && Object.prototype.hasOwnProperty.call("+O+", '"+v.util.escapeQuotes(C)+"') ";if(B){Q+=" && ( ";var k=U;if(k){var m,T=-1,n=k.length-1;while(T<n){if(m=k[T+=1],T)Q+=" || ";var Z=v.util.getProperty(m),_=O+Z;if(Q+=" ( ( "+_+" === undefined ",S)Q+=" || ! Object.prototype.hasOwnProperty.call("+O+", '"+v.util.escapeQuotes(m)+"') ";Q+=") && (missing"+Y+" = "+v.util.toQuotedString(v.opts.jsonPointers?m:Z)+") ) "}}Q+=")) {  ";var j="missing"+Y,b="' + "+j+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.opts.jsonPointers?v.util.getPathExpr(g,j,!0):g+" + "+j;var a=a||[];if(a.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { property: '"+v.util.escapeQuotes(C)+"', missingProperty: '"+b+"', depsCount: "+U.length+", deps: '"+v.util.escapeQuotes(U.length==1?U[0]:U.join(", "))+"' } ",v.opts.messages!==!1){if(Q+=" , message: 'should have ",U.length==1)Q+="property "+v.util.escapeQuotes(U[0]);else Q+="properties "+v.util.escapeQuotes(U.join(", "));Q+=" when property "+v.util.escapeQuotes(C)+" is present' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";var K1=Q;if(Q=a.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+K1+"]); ";else Q+=" validate.errors = ["+K1+"]; return false; ";else Q+=" var err = "+K1+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{Q+=" ) { ";var Q1=U;if(Q1){var m,Y1=-1,f1=Q1.length-1;while(Y1<f1){m=Q1[Y1+=1];var Z=v.util.getProperty(m),b=v.util.escapeQuotes(m),_=O+Z;if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(g,m,v.opts.jsonPointers);if(Q+=" if ( "+_+" === undefined ",S)Q+=" || ! Object.prototype.hasOwnProperty.call("+O+", '"+v.util.escapeQuotes(m)+"') ";if(Q+=") {  var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { property: '"+v.util.escapeQuotes(C)+"', missingProperty: '"+b+"', depsCount: "+U.length+", deps: '"+v.util.escapeQuotes(U.length==1?U[0]:U.join(", "))+"' } ",v.opts.messages!==!1){if(Q+=" , message: 'should have ",U.length==1)Q+="property "+v.util.escapeQuotes(U[0]);else Q+="properties "+v.util.escapeQuotes(U.join(", "));Q+=" when property "+v.util.escapeQuotes(C)+" is present' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}if(Q+=" }   ",B)N+="}",Q+=" else { "}v.errorPath=g;var c=K.baseId;for(var C in H){var E=H[C];if(v.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:v.util.schemaHasRules(E,v.RULES.all)){if(Q+=" "+M+" = true; if ( "+O+v.util.getProperty(C)+" !== undefined ",S)Q+=" && Object.prototype.hasOwnProperty.call("+O+", '"+v.util.escapeQuotes(C)+"') ";if(Q+=") { ",K.schema=E,K.schemaPath=G+v.util.getProperty(C),K.errSchemaPath=V+"/"+v.util.escapeFragment(C),Q+="  "+v.validate(K)+" ",K.baseId=c,Q+=" }  ",B)Q+=" if ("+M+") { ",N+="}"}}if(B)Q+="   "+N+" if ("+L+" == errors) {";return Q}});var M6=z((l$,L6)=>{L6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||""),L="valid"+Y,K=v.opts.$data&&q&&q.$data,N;if(K)Q+=" var schema"+Y+" = "+v.util.getData(q.$data,X,v.dataPathArr)+"; ",N="schema"+Y;else N=q;var M="i"+Y,H="schema"+Y;if(!K)Q+=" var "+H+" = validate.schema"+G+";";if(Q+="var "+L+";",K)Q+=" if (schema"+Y+" === undefined) "+L+" = true; else if (!Array.isArray(schema"+Y+")) "+L+" = false; else {";if(Q+=""+L+" = false;for (var "+M+"=0; "+M+"<"+H+".length; "+M+"++) if (equal("+O+", "+H+"["+M+"])) { "+L+" = true; break; }",K)Q+="  }  ";Q+=" if (!"+L+") {   ";var I=I||[];if(I.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { allowedValues: schema"+Y+" } ",v.opts.messages!==!1)Q+=" , message: 'should be equal to one of the allowed values' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";var S=Q;if(Q=I.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+S+"]); ";else Q+=" validate.errors = ["+S+"]; return false; ";else Q+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" }",B)Q+=" else { ";return Q}});var F6=z((_$,A6)=>{A6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||"");if(v.opts.format===!1){if(B)Q+=" if (true) { ";return Q}var L=v.opts.$data&&q&&q.$data,K;if(L)Q+=" var schema"+Y+" = "+v.util.getData(q.$data,X,v.dataPathArr)+"; ",K="schema"+Y;else K=q;var N=v.opts.unknownFormats,M=Array.isArray(N);if(L){var H="format"+Y,I="isObject"+Y,S="formatType"+Y;if(Q+=" var "+H+" = formats["+K+"]; var "+I+" = typeof "+H+" == 'object' && !("+H+" instanceof RegExp) && "+H+".validate; var "+S+" = "+I+" && "+H+".type || 'string'; if ("+I+") { ",v.async)Q+=" var async"+Y+" = "+H+".async; ";if(Q+=" "+H+" = "+H+".validate; } if (  ",L)Q+=" ("+K+" !== undefined && typeof "+K+" != 'string') || ";if(Q+=" (",N!="ignore"){if(Q+=" ("+K+" && !"+H+" ",M)Q+=" && self._opts.unknownFormats.indexOf("+K+") == -1 ";Q+=") || "}if(Q+=" ("+H+" && "+S+" == '"+J+"' && !(typeof "+H+" == 'function' ? ",v.async)Q+=" (async"+Y+" ? await "+H+"("+O+") : "+H+"("+O+")) ";else Q+=" "+H+"("+O+") ";Q+=" : "+H+".test("+O+"))))) {"}else{var H=v.formats[q];if(!H)if(N=="ignore"){if(v.logger.warn('unknown format "'+q+'" ignored in schema at path "'+v.errSchemaPath+'"'),B)Q+=" if (true) { ";return Q}else if(M&&N.indexOf(q)>=0){if(B)Q+=" if (true) { ";return Q}else throw new Error('unknown format "'+q+'" is used in schema at path "'+v.errSchemaPath+'"');var I=typeof H=="object"&&!(H instanceof RegExp)&&H.validate,S=I&&H.type||"string";if(I){var E=H.async===!0;H=H.validate}if(S!=J){if(B)Q+=" if (true) { ";return Q}if(E){if(!v.async)throw new Error("async format in sync schema");var U="formats"+v.util.getProperty(q)+".validate";Q+=" if (!(await "+U+"("+O+"))) { "}else{Q+=" if (! ";var U="formats"+v.util.getProperty(q);if(I)U+=".validate";if(typeof H=="function")Q+=" "+U+"("+O+") ";else Q+=" "+U+".test("+O+") ";Q+=") { "}}var g=g||[];if(g.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'format' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { format:  ",L)Q+=""+K;else Q+=""+v.util.toQuotedString(q);if(Q+="  } ",v.opts.messages!==!1){if(Q+=` , message: 'should match format "`,L)Q+="' + "+K+" + '";else Q+=""+v.util.escapeQuotes(q);Q+=`"' `}if(v.opts.verbose){if(Q+=" , schema:  ",L)Q+="validate.schema"+G;else Q+=""+v.util.toQuotedString(q);Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" "}Q+=" } "}else Q+=" {} ";var C=Q;if(Q=g.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+C+"]); ";else Q+=" validate.errors = ["+C+"]; return false; ";else Q+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } ",B)Q+=" else { ";return Q}});var w6=z((k$,h6)=>{h6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||""),L="valid"+Y,K="errs__"+Y,N=v.util.copy(v);N.level++;var M="valid"+N.level,H=v.schema.then,I=v.schema.else,S=H!==void 0&&(v.opts.strictKeywords?typeof H=="object"&&Object.keys(H).length>0||H===!1:v.util.schemaHasRules(H,v.RULES.all)),E=I!==void 0&&(v.opts.strictKeywords?typeof I=="object"&&Object.keys(I).length>0||I===!1:v.util.schemaHasRules(I,v.RULES.all)),U=N.baseId;if(S||E){var g;N.createErrors=!1,N.schema=q,N.schemaPath=G,N.errSchemaPath=V,Q+=" var "+K+" = errors; var "+L+" = true;  ";var C=v.compositeRule;if(v.compositeRule=N.compositeRule=!0,Q+="  "+v.validate(N)+" ",N.baseId=U,N.createErrors=!0,Q+="  errors = "+K+"; if (vErrors !== null) { if ("+K+") vErrors.length = "+K+"; else vErrors = null; }  ",v.compositeRule=N.compositeRule=C,S){if(Q+=" if ("+M+") {  ",N.schema=v.schema.then,N.schemaPath=v.schemaPath+".then",N.errSchemaPath=v.errSchemaPath+"/then",Q+="  "+v.validate(N)+" ",N.baseId=U,Q+=" "+L+" = "+M+"; ",S&&E)g="ifClause"+Y,Q+=" var "+g+" = 'then'; ";else g="'then'";if(Q+=" } ",E)Q+=" else { "}else Q+=" if (!"+M+") { ";if(E){if(N.schema=v.schema.else,N.schemaPath=v.schemaPath+".else",N.errSchemaPath=v.errSchemaPath+"/else",Q+="  "+v.validate(N)+" ",N.baseId=U,Q+=" "+L+" = "+M+"; ",S&&E)g="ifClause"+Y,Q+=" var "+g+" = 'else'; ";else g="'else'";Q+=" } "}if(Q+=" if (!"+L+") {   var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'if' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { failingKeyword: "+g+" } ",v.opts.messages!==!1)Q+=` , message: 'should match "' + `+g+` + '" schema' `;if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; return false; ";if(Q+=" }   ",B)Q+=" else { "}else if(B)Q+=" if (true) { ";return Q}});var R6=z((x$,I6)=>{I6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||""),L="valid"+Y,K="errs__"+Y,N=v.util.copy(v),M="";N.level++;var H="valid"+N.level,I="i"+Y,S=N.dataLevel=v.dataLevel+1,E="data"+S,U=v.baseId;if(Q+="var "+K+" = errors;var "+L+";",Array.isArray(q)){var g=v.schema.additionalItems;if(g===!1){Q+=" "+L+" = "+O+".length <= "+q.length+"; ";var C=V;V=v.errSchemaPath+"/additionalItems",Q+="  if (!"+L+") {   ";var k=k||[];if(k.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { limit: "+q.length+" } ",v.opts.messages!==!1)Q+=" , message: 'should NOT have more than "+q.length+" items' ";if(v.opts.verbose)Q+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";var m=Q;if(Q=k.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+m+"]); ";else Q+=" validate.errors = ["+m+"]; return false; ";else Q+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } ",V=C,B)M+="}",Q+=" else { "}var T=q;if(T){var n,Z=-1,_=T.length-1;while(Z<_)if(n=T[Z+=1],v.opts.strictKeywords?typeof n=="object"&&Object.keys(n).length>0||n===!1:v.util.schemaHasRules(n,v.RULES.all)){Q+=" "+H+" = true; if ("+O+".length > "+Z+") { ";var j=O+"["+Z+"]";N.schema=n,N.schemaPath=G+"["+Z+"]",N.errSchemaPath=V+"/"+Z,N.errorPath=v.util.getPathExpr(v.errorPath,Z,v.opts.jsonPointers,!0),N.dataPathArr[S]=Z;var b=v.validate(N);if(N.baseId=U,v.util.varOccurences(b,E)<2)Q+=" "+v.util.varReplace(b,E,j)+" ";else Q+=" var "+E+" = "+j+"; "+b+" ";if(Q+=" }  ",B)Q+=" if ("+H+") { ",M+="}"}}if(typeof g=="object"&&(v.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:v.util.schemaHasRules(g,v.RULES.all))){N.schema=g,N.schemaPath=v.schemaPath+".additionalItems",N.errSchemaPath=v.errSchemaPath+"/additionalItems",Q+=" "+H+" = true; if ("+O+".length > "+q.length+") {  for (var "+I+" = "+q.length+"; "+I+" < "+O+".length; "+I+"++) { ",N.errorPath=v.util.getPathExpr(v.errorPath,I,v.opts.jsonPointers,!0);var j=O+"["+I+"]";N.dataPathArr[S]=I;var b=v.validate(N);if(N.baseId=U,v.util.varOccurences(b,E)<2)Q+=" "+v.util.varReplace(b,E,j)+" ";else Q+=" var "+E+" = "+j+"; "+b+" ";if(B)Q+=" if (!"+H+") break; ";if(Q+=" } }  ",B)Q+=" if ("+H+") { ",M+="}"}}else if(v.opts.strictKeywords?typeof q=="object"&&Object.keys(q).length>0||q===!1:v.util.schemaHasRules(q,v.RULES.all)){N.schema=q,N.schemaPath=G,N.errSchemaPath=V,Q+="  for (var "+I+" = 0; "+I+" < "+O+".length; "+I+"++) { ",N.errorPath=v.util.getPathExpr(v.errorPath,I,v.opts.jsonPointers,!0);var j=O+"["+I+"]";N.dataPathArr[S]=I;var b=v.validate(N);if(N.baseId=U,v.util.varOccurences(b,E)<2)Q+=" "+v.util.varReplace(b,E,j)+" ";else Q+=" var "+E+" = "+j+"; "+b+" ";if(B)Q+=" if (!"+H+") break; ";Q+=" }"}if(B)Q+=" "+M+" if ("+K+" == errors) {";return Q}});var K8=z((m$,E6)=>{E6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,U,O="data"+(X||""),L=v.opts.$data&&q&&q.$data,K;if(L)Q+=" var schema"+Y+" = "+v.util.getData(q.$data,X,v.dataPathArr)+"; ",K="schema"+Y;else K=q;var N=P=="maximum",M=N?"exclusiveMaximum":"exclusiveMinimum",H=v.schema[M],I=v.opts.$data&&H&&H.$data,S=N?"<":">",E=N?">":"<",U=void 0;if(!(L||typeof q=="number"||q===void 0))throw new Error(P+" must be number");if(!(I||H===void 0||typeof H=="number"||typeof H=="boolean"))throw new Error(M+" must be number or boolean");if(I){var g=v.util.getData(H.$data,X,v.dataPathArr),C="exclusive"+Y,k="exclType"+Y,m="exclIsNumber"+Y,T="op"+Y,n="' + "+T+" + '";Q+=" var schemaExcl"+Y+" = "+g+"; ",g="schemaExcl"+Y,Q+=" var "+C+"; var "+k+" = typeof "+g+"; if ("+k+" != 'boolean' && "+k+" != 'undefined' && "+k+" != 'number') { ";var U=M,Z=Z||[];if(Z.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(U||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: '"+M+" should be boolean' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";var _=Q;if(Q=Z.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+_+"]); ";else Q+=" validate.errors = ["+_+"]; return false; ";else Q+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } else if ( ",L)Q+=" ("+K+" !== undefined && typeof "+K+" != 'number') || ";if(Q+=" "+k+" == 'number' ? ( ("+C+" = "+K+" === undefined || "+g+" "+S+"= "+K+") ? "+O+" "+E+"= "+g+" : "+O+" "+E+" "+K+" ) : ( ("+C+" = "+g+" === true) ? "+O+" "+E+"= "+K+" : "+O+" "+E+" "+K+" ) || "+O+" !== "+O+") { var op"+Y+" = "+C+" ? '"+S+"' : '"+S+"='; ",q===void 0)U=M,V=v.errSchemaPath+"/"+M,K=g,L=I}else{var m=typeof H=="number",n=S;if(m&&L){var T="'"+n+"'";if(Q+=" if ( ",L)Q+=" ("+K+" !== undefined && typeof "+K+" != 'number') || ";Q+=" ( "+K+" === undefined || "+H+" "+S+"= "+K+" ? "+O+" "+E+"= "+H+" : "+O+" "+E+" "+K+" ) || "+O+" !== "+O+") { "}else{if(m&&q===void 0)C=!0,U=M,V=v.errSchemaPath+"/"+M,K=H,E+="=";else{if(m)K=Math[N?"min":"max"](H,q);if(H===(m?K:!0))C=!0,U=M,V=v.errSchemaPath+"/"+M,E+="=";else C=!1,n+="="}var T="'"+n+"'";if(Q+=" if ( ",L)Q+=" ("+K+" !== undefined && typeof "+K+" != 'number') || ";Q+=" "+O+" "+E+" "+K+" || "+O+" !== "+O+") { "}}U=U||P;var Z=Z||[];if(Z.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(U||"_limit")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { comparison: "+T+", limit: "+K+", exclusive: "+C+" } ",v.opts.messages!==!1)if(Q+=" , message: 'should be "+n+" ",L)Q+="' + "+K;else Q+=""+K+"'";if(v.opts.verbose){if(Q+=" , schema:  ",L)Q+="validate.schema"+G;else Q+=""+q;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" "}Q+=" } "}else Q+=" {} ";var _=Q;if(Q=Z.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+_+"]); ";else Q+=" validate.errors = ["+_+"]; return false; ";else Q+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } ",B)Q+=" else { ";return Q}});var B8=z((n$,y6)=>{y6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,M,O="data"+(X||""),L=v.opts.$data&&q&&q.$data,K;if(L)Q+=" var schema"+Y+" = "+v.util.getData(q.$data,X,v.dataPathArr)+"; ",K="schema"+Y;else K=q;if(!(L||typeof q=="number"))throw new Error(P+" must be number");var N=P=="maxItems"?">":"<";if(Q+="if ( ",L)Q+=" ("+K+" !== undefined && typeof "+K+" != 'number') || ";Q+=" "+O+".length "+N+" "+K+") { ";var M=P,H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(M||"_limitItems")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { limit: "+K+" } ",v.opts.messages!==!1){if(Q+=" , message: 'should NOT have ",P=="maxItems")Q+="more";else Q+="fewer";if(Q+=" than ",L)Q+="' + "+K+" + '";else Q+=""+q;Q+=" items' "}if(v.opts.verbose){if(Q+=" , schema:  ",L)Q+="validate.schema"+G;else Q+=""+q;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" "}Q+=" } "}else Q+=" {} ";var I=Q;if(Q=H.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+I+"]); ";else Q+=" validate.errors = ["+I+"]; return false; ";else Q+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+="} ",B)Q+=" else { ";return Q}});var $8=z((a$,z6)=>{z6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,M,O="data"+(X||""),L=v.opts.$data&&q&&q.$data,K;if(L)Q+=" var schema"+Y+" = "+v.util.getData(q.$data,X,v.dataPathArr)+"; ",K="schema"+Y;else K=q;if(!(L||typeof q=="number"))throw new Error(P+" must be number");var N=P=="maxLength"?">":"<";if(Q+="if ( ",L)Q+=" ("+K+" !== undefined && typeof "+K+" != 'number') || ";if(v.opts.unicode===!1)Q+=" "+O+".length ";else Q+=" ucs2length("+O+") ";Q+=" "+N+" "+K+") { ";var M=P,H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(M||"_limitLength")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { limit: "+K+" } ",v.opts.messages!==!1){if(Q+=" , message: 'should NOT be ",P=="maxLength")Q+="longer";else Q+="shorter";if(Q+=" than ",L)Q+="' + "+K+" + '";else Q+=""+q;Q+=" characters' "}if(v.opts.verbose){if(Q+=" , schema:  ",L)Q+="validate.schema"+G;else Q+=""+q;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" "}Q+=" } "}else Q+=" {} ";var I=Q;if(Q=H.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+I+"]); ";else Q+=" validate.errors = ["+I+"]; return false; ";else Q+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+="} ",B)Q+=" else { ";return Q}});var O8=z((r$,S6)=>{S6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,M,O="data"+(X||""),L=v.opts.$data&&q&&q.$data,K;if(L)Q+=" var schema"+Y+" = "+v.util.getData(q.$data,X,v.dataPathArr)+"; ",K="schema"+Y;else K=q;if(!(L||typeof q=="number"))throw new Error(P+" must be number");var N=P=="maxProperties"?">":"<";if(Q+="if ( ",L)Q+=" ("+K+" !== undefined && typeof "+K+" != 'number') || ";Q+=" Object.keys("+O+").length "+N+" "+K+") { ";var M=P,H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(M||"_limitProperties")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { limit: "+K+" } ",v.opts.messages!==!1){if(Q+=" , message: 'should NOT have ",P=="maxProperties")Q+="more";else Q+="fewer";if(Q+=" than ",L)Q+="' + "+K+" + '";else Q+=""+q;Q+=" properties' "}if(v.opts.verbose){if(Q+=" , schema:  ",L)Q+="validate.schema"+G;else Q+=""+q;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" "}Q+=" } "}else Q+=" {} ";var I=Q;if(Q=H.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+I+"]); ";else Q+=" validate.errors = ["+I+"]; return false; ";else Q+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+="} ",B)Q+=" else { ";return Q}});var g6=z((c$,U6)=>{U6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||""),L=v.opts.$data&&q&&q.$data,K;if(L)Q+=" var schema"+Y+" = "+v.util.getData(q.$data,X,v.dataPathArr)+"; ",K="schema"+Y;else K=q;if(!(L||typeof q=="number"))throw new Error(P+" must be number");if(Q+="var division"+Y+";if (",L)Q+=" "+K+" !== undefined && ( typeof "+K+" != 'number' || ";if(Q+=" (division"+Y+" = "+O+" / "+K+", ",v.opts.multipleOfPrecision)Q+=" Math.abs(Math.round(division"+Y+") - division"+Y+") > 1e-"+v.opts.multipleOfPrecision+" ";else Q+=" division"+Y+" !== parseInt(division"+Y+") ";if(Q+=" ) ",L)Q+="  )  ";Q+=" ) {   ";var N=N||[];if(N.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { multipleOf: "+K+" } ",v.opts.messages!==!1)if(Q+=" , message: 'should be multiple of ",L)Q+="' + "+K;else Q+=""+K+"'";if(v.opts.verbose){if(Q+=" , schema:  ",L)Q+="validate.schema"+G;else Q+=""+q;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" "}Q+=" } "}else Q+=" {} ";var M=Q;if(Q=N.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+M+"]); ";else Q+=" validate.errors = ["+M+"]; return false; ";else Q+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+="} ",B)Q+=" else { ";return Q}});var C6=z((i$,j6)=>{j6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||""),L="errs__"+Y,K=v.util.copy(v);K.level++;var N="valid"+K.level;if(v.opts.strictKeywords?typeof q=="object"&&Object.keys(q).length>0||q===!1:v.util.schemaHasRules(q,v.RULES.all)){K.schema=q,K.schemaPath=G,K.errSchemaPath=V,Q+=" var "+L+" = errors;  ";var M=v.compositeRule;v.compositeRule=K.compositeRule=!0,K.createErrors=!1;var H;if(K.opts.allErrors)H=K.opts.allErrors,K.opts.allErrors=!1;if(Q+=" "+v.validate(K)+" ",K.createErrors=!0,H)K.opts.allErrors=H;v.compositeRule=K.compositeRule=M,Q+=" if ("+N+") {   ";var I=I||[];if(I.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'not' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: 'should NOT be valid' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";var S=Q;if(Q=I.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+S+"]); ";else Q+=" validate.errors = ["+S+"]; return false; ";else Q+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } else {  errors = "+L+"; if (vErrors !== null) { if ("+L+") vErrors.length = "+L+"; else vErrors = null; } ",v.opts.allErrors)Q+=" } "}else{if(Q+="  var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'not' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: 'should NOT be valid' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",B)Q+=" if (false) { "}return Q}});var T6=z((d$,Z6)=>{Z6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||""),L="valid"+Y,K="errs__"+Y,N=v.util.copy(v),M="";N.level++;var H="valid"+N.level,I=N.baseId,S="prevValid"+Y,E="passingSchemas"+Y;Q+="var "+K+" = errors , "+S+" = false , "+L+" = false , "+E+" = null; ";var U=v.compositeRule;v.compositeRule=N.compositeRule=!0;var g=q;if(g){var C,k=-1,m=g.length-1;while(k<m){if(C=g[k+=1],v.opts.strictKeywords?typeof C=="object"&&Object.keys(C).length>0||C===!1:v.util.schemaHasRules(C,v.RULES.all))N.schema=C,N.schemaPath=G+"["+k+"]",N.errSchemaPath=V+"/"+k,Q+="  "+v.validate(N)+" ",N.baseId=I;else Q+=" var "+H+" = true; ";if(k)Q+=" if ("+H+" && "+S+") { "+L+" = false; "+E+" = ["+E+", "+k+"]; } else { ",M+="}";Q+=" if ("+H+") { "+L+" = "+S+" = true; "+E+" = "+k+"; }"}}if(v.compositeRule=N.compositeRule=U,Q+=""+M+"if (!"+L+") {   var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { passingSchemas: "+E+" } ",v.opts.messages!==!1)Q+=" , message: 'should match exactly one schema in oneOf' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; return false; ";if(Q+="} else {  errors = "+K+"; if (vErrors !== null) { if ("+K+") vErrors.length = "+K+"; else vErrors = null; }",v.opts.allErrors)Q+=" } ";return Q}});var u6=z((p$,b6)=>{b6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||""),L=v.opts.$data&&q&&q.$data,K;if(L)Q+=" var schema"+Y+" = "+v.util.getData(q.$data,X,v.dataPathArr)+"; ",K="schema"+Y;else K=q;var N=L?"(new RegExp("+K+"))":v.usePattern(q);if(Q+="if ( ",L)Q+=" ("+K+" !== undefined && typeof "+K+" != 'string') || ";Q+=" !"+N+".test("+O+") ) {   ";var M=M||[];if(M.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { pattern:  ",L)Q+=""+K;else Q+=""+v.util.toQuotedString(q);if(Q+="  } ",v.opts.messages!==!1){if(Q+=` , message: 'should match pattern "`,L)Q+="' + "+K+" + '";else Q+=""+v.util.escapeQuotes(q);Q+=`"' `}if(v.opts.verbose){if(Q+=" , schema:  ",L)Q+="validate.schema"+G;else Q+=""+v.util.toQuotedString(q);Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" "}Q+=" } "}else Q+=" {} ";var H=Q;if(Q=M.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+H+"]); ";else Q+=" validate.errors = ["+H+"]; return false; ";else Q+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+="} ",B)Q+=" else { ";return Q}});var _6=z((s$,l6)=>{l6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||""),L="errs__"+Y,K=v.util.copy(v),N="";K.level++;var M="valid"+K.level,H="key"+Y,I="idx"+Y,S=K.dataLevel=v.dataLevel+1,E="data"+S,U="dataProperties"+Y,g=Object.keys(q||{}).filter(Y1),C=v.schema.patternProperties||{},k=Object.keys(C).filter(Y1),m=v.schema.additionalProperties,T=g.length||k.length,n=m===!1,Z=typeof m=="object"&&Object.keys(m).length,_=v.opts.removeAdditional,j=n||Z||_,b=v.opts.ownProperties,a=v.baseId,K1=v.schema.required;if(K1&&!(v.opts.$data&&K1.$data)&&K1.length<v.opts.loopRequired)var Q1=v.util.toHash(K1);function Y1(Bv){return Bv!=="__proto__"}if(Q+="var "+L+" = errors;var "+M+" = true;",b)Q+=" var "+U+" = undefined;";if(j){if(b)Q+=" "+U+" = "+U+" || Object.keys("+O+"); for (var "+I+"=0; "+I+"<"+U+".length; "+I+"++) { var "+H+" = "+U+"["+I+"]; ";else Q+=" for (var "+H+" in "+O+") { ";if(T){if(Q+=" var isAdditional"+Y+" = !(false ",g.length)if(g.length>8)Q+=" || validate.schema"+G+".hasOwnProperty("+H+") ";else{var f1=g;if(f1){var c,F1=-1,T1=f1.length-1;while(F1<T1)c=f1[F1+=1],Q+=" || "+H+" == "+v.util.toQuotedString(c)+" "}}if(k.length){var l1=k;if(l1){var G1,I1=-1,S1=l1.length-1;while(I1<S1)G1=l1[I1+=1],Q+=" || "+v.usePattern(G1)+".test("+H+") "}}Q+=" ); if (isAdditional"+Y+") { "}if(_=="all")Q+=" delete "+O+"["+H+"]; ";else{var _1=v.errorPath,pv="' + "+H+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(v.errorPath,H,v.opts.jsonPointers);if(n)if(_)Q+=" delete "+O+"["+H+"]; ";else{Q+=" "+M+" = false; ";var Cv=V;V=v.errSchemaPath+"/additionalProperties";var R1=R1||[];if(R1.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { additionalProperty: '"+pv+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is an invalid additional property";else Q+="should NOT have additional properties";Q+="' "}if(v.opts.verbose)Q+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";var h1=Q;if(Q=R1.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+h1+"]); ";else Q+=" validate.errors = ["+h1+"]; return false; ";else Q+=" var err = "+h1+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(V=Cv,B)Q+=" break; "}else if(Z)if(_=="failing"){Q+=" var "+L+" = errors;  ";var N0=v.compositeRule;v.compositeRule=K.compositeRule=!0,K.schema=m,K.schemaPath=v.schemaPath+".additionalProperties",K.errSchemaPath=v.errSchemaPath+"/additionalProperties",K.errorPath=v.opts._errorDataPathProperty?v.errorPath:v.util.getPathExpr(v.errorPath,H,v.opts.jsonPointers);var b1=O+"["+H+"]";K.dataPathArr[S]=H;var D1=v.validate(K);if(K.baseId=a,v.util.varOccurences(D1,E)<2)Q+=" "+v.util.varReplace(D1,E,b1)+" ";else Q+=" var "+E+" = "+b1+"; "+D1+" ";Q+=" if (!"+M+") { errors = "+L+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+O+"["+H+"]; }  ",v.compositeRule=K.compositeRule=N0}else{K.schema=m,K.schemaPath=v.schemaPath+".additionalProperties",K.errSchemaPath=v.errSchemaPath+"/additionalProperties",K.errorPath=v.opts._errorDataPathProperty?v.errorPath:v.util.getPathExpr(v.errorPath,H,v.opts.jsonPointers);var b1=O+"["+H+"]";K.dataPathArr[S]=H;var D1=v.validate(K);if(K.baseId=a,v.util.varOccurences(D1,E)<2)Q+=" "+v.util.varReplace(D1,E,b1)+" ";else Q+=" var "+E+" = "+b1+"; "+D1+" ";if(B)Q+=" if (!"+M+") break; "}v.errorPath=_1}if(T)Q+=" } ";if(Q+=" }  ",B)Q+=" if ("+M+") { ",N+="}"}var sv=v.opts.useDefaults&&!v.compositeRule;if(g.length){var Zv=g;if(Zv){var c,H0=-1,L0=Zv.length-1;while(H0<L0){c=Zv[H0+=1];var j1=q[c];if(v.opts.strictKeywords?typeof j1=="object"&&Object.keys(j1).length>0||j1===!1:v.util.schemaHasRules(j1,v.RULES.all)){var Qv=v.util.getProperty(c),b1=O+Qv,r1=sv&&j1.default!==void 0;K.schema=j1,K.schemaPath=G+Qv,K.errSchemaPath=V+"/"+v.util.escapeFragment(c),K.errorPath=v.util.getPath(v.errorPath,c,v.opts.jsonPointers),K.dataPathArr[S]=v.util.toQuotedString(c);var D1=v.validate(K);if(K.baseId=a,v.util.varOccurences(D1,E)<2){D1=v.util.varReplace(D1,E,b1);var k1=b1}else{var k1=E;Q+=" var "+E+" = "+b1+"; "}if(r1)Q+=" "+D1+" ";else{if(Q1&&Q1[c]){if(Q+=" if ( "+k1+" === undefined ",b)Q+=" || ! Object.prototype.hasOwnProperty.call("+O+", '"+v.util.escapeQuotes(c)+"') ";Q+=") { "+M+" = false; ";var _1=v.errorPath,Cv=V,hv=v.util.escapeQuotes(c);if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(_1,c,v.opts.jsonPointers);V=v.errSchemaPath+"/required";var R1=R1||[];if(R1.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { missingProperty: '"+hv+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+hv+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";var h1=Q;if(Q=R1.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+h1+"]); ";else Q+=" validate.errors = ["+h1+"]; return false; ";else Q+=" var err = "+h1+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";V=Cv,v.errorPath=_1,Q+=" } else { "}else if(B){if(Q+=" if ( "+k1+" === undefined ",b)Q+=" || ! Object.prototype.hasOwnProperty.call("+O+", '"+v.util.escapeQuotes(c)+"') ";Q+=") { "+M+" = true; } else { "}else{if(Q+=" if ("+k1+" !== undefined ",b)Q+=" &&   Object.prototype.hasOwnProperty.call("+O+", '"+v.util.escapeQuotes(c)+"') ";Q+=" ) { "}Q+=" "+D1+" } "}}if(B)Q+=" if ("+M+") { ",N+="}"}}}if(k.length){var p1=k;if(p1){var G1,PQ=-1,uP=p1.length-1;while(PQ<uP){G1=p1[PQ+=1];var j1=C[G1];if(v.opts.strictKeywords?typeof j1=="object"&&Object.keys(j1).length>0||j1===!1:v.util.schemaHasRules(j1,v.RULES.all)){if(K.schema=j1,K.schemaPath=v.schemaPath+".patternProperties"+v.util.getProperty(G1),K.errSchemaPath=v.errSchemaPath+"/patternProperties/"+v.util.escapeFragment(G1),b)Q+=" "+U+" = "+U+" || Object.keys("+O+"); for (var "+I+"=0; "+I+"<"+U+".length; "+I+"++) { var "+H+" = "+U+"["+I+"]; ";else Q+=" for (var "+H+" in "+O+") { ";Q+=" if ("+v.usePattern(G1)+".test("+H+")) { ",K.errorPath=v.util.getPathExpr(v.errorPath,H,v.opts.jsonPointers);var b1=O+"["+H+"]";K.dataPathArr[S]=H;var D1=v.validate(K);if(K.baseId=a,v.util.varOccurences(D1,E)<2)Q+=" "+v.util.varReplace(D1,E,b1)+" ";else Q+=" var "+E+" = "+b1+"; "+D1+" ";if(B)Q+=" if (!"+M+") break; ";if(Q+=" } ",B)Q+=" else "+M+" = true; ";if(Q+=" }  ",B)Q+=" if ("+M+") { ",N+="}"}}}}if(B)Q+=" "+N+" if ("+L+" == errors) {";return Q}});var x6=z((t$,k6)=>{k6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||""),L="errs__"+Y,K=v.util.copy(v),N="";K.level++;var M="valid"+K.level;if(Q+="var "+L+" = errors;",v.opts.strictKeywords?typeof q=="object"&&Object.keys(q).length>0||q===!1:v.util.schemaHasRules(q,v.RULES.all)){K.schema=q,K.schemaPath=G,K.errSchemaPath=V;var H="key"+Y,I="idx"+Y,S="i"+Y,E="' + "+H+" + '",U=K.dataLevel=v.dataLevel+1,g="data"+U,C="dataProperties"+Y,k=v.opts.ownProperties,m=v.baseId;if(k)Q+=" var "+C+" = undefined; ";if(k)Q+=" "+C+" = "+C+" || Object.keys("+O+"); for (var "+I+"=0; "+I+"<"+C+".length; "+I+"++) { var "+H+" = "+C+"["+I+"]; ";else Q+=" for (var "+H+" in "+O+") { ";Q+=" var startErrs"+Y+" = errors; ";var T=H,n=v.compositeRule;v.compositeRule=K.compositeRule=!0;var Z=v.validate(K);if(K.baseId=m,v.util.varOccurences(Z,g)<2)Q+=" "+v.util.varReplace(Z,g,T)+" ";else Q+=" var "+g+" = "+T+"; "+Z+" ";if(v.compositeRule=K.compositeRule=n,Q+=" if (!"+M+") { for (var "+S+"=startErrs"+Y+"; "+S+"<errors; "+S+"++) { vErrors["+S+"].propertyName = "+H+"; }   var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { propertyName: '"+E+"' } ",v.opts.messages!==!1)Q+=" , message: 'property name \\'"+E+"\\' is invalid' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; return false; ";if(B)Q+=" break; ";Q+=" } }"}if(B)Q+=" "+N+" if ("+L+" == errors) {";return Q}});var n6=z((o$,m6)=>{m6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||""),L="valid"+Y,K=v.opts.$data&&q&&q.$data,N;if(K)Q+=" var schema"+Y+" = "+v.util.getData(q.$data,X,v.dataPathArr)+"; ",N="schema"+Y;else N=q;var M="schema"+Y;if(!K)if(q.length<v.opts.loopRequired&&v.schema.properties&&Object.keys(v.schema.properties).length){var H=[],I=q;if(I){var S,E=-1,U=I.length-1;while(E<U){S=I[E+=1];var g=v.schema.properties[S];if(!(g&&(v.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:v.util.schemaHasRules(g,v.RULES.all))))H[H.length]=S}}}else var H=q;if(K||H.length){var C=v.errorPath,k=K||H.length>=v.opts.loopRequired,m=v.opts.ownProperties;if(B)if(Q+=" var missing"+Y+"; ",k){if(!K)Q+=" var "+M+" = validate.schema"+G+"; ";var T="i"+Y,n="schema"+Y+"["+T+"]",Z="' + "+n+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(C,n,v.opts.jsonPointers);if(Q+=" var "+L+" = true; ",K)Q+=" if (schema"+Y+" === undefined) "+L+" = true; else if (!Array.isArray(schema"+Y+")) "+L+" = false; else {";if(Q+=" for (var "+T+" = 0; "+T+" < "+M+".length; "+T+"++) { "+L+" = "+O+"["+M+"["+T+"]] !== undefined ",m)Q+=" &&   Object.prototype.hasOwnProperty.call("+O+", "+M+"["+T+"]) ";if(Q+="; if (!"+L+") break; } ",K)Q+="  }  ";Q+="  if (!"+L+") {   ";var _=_||[];if(_.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { missingProperty: '"+Z+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+Z+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";var j=Q;if(Q=_.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+j+"]); ";else Q+=" validate.errors = ["+j+"]; return false; ";else Q+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";Q+=" } else { "}else{Q+=" if ( ";var b=H;if(b){var a,T=-1,K1=b.length-1;while(T<K1){if(a=b[T+=1],T)Q+=" || ";var Q1=v.util.getProperty(a),Y1=O+Q1;if(Q+=" ( ( "+Y1+" === undefined ",m)Q+=" || ! Object.prototype.hasOwnProperty.call("+O+", '"+v.util.escapeQuotes(a)+"') ";Q+=") && (missing"+Y+" = "+v.util.toQuotedString(v.opts.jsonPointers?a:Q1)+") ) "}}Q+=") {  ";var n="missing"+Y,Z="' + "+n+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.opts.jsonPointers?v.util.getPathExpr(C,n,!0):C+" + "+n;var _=_||[];if(_.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { missingProperty: '"+Z+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+Z+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";var j=Q;if(Q=_.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+j+"]); ";else Q+=" validate.errors = ["+j+"]; return false; ";else Q+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";Q+=" } else { "}else if(k){if(!K)Q+=" var "+M+" = validate.schema"+G+"; ";var T="i"+Y,n="schema"+Y+"["+T+"]",Z="' + "+n+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(C,n,v.opts.jsonPointers);if(K){if(Q+=" if ("+M+" && !Array.isArray("+M+")) {  var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { missingProperty: '"+Z+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+Z+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+M+" !== undefined) { "}if(Q+=" for (var "+T+" = 0; "+T+" < "+M+".length; "+T+"++) { if ("+O+"["+M+"["+T+"]] === undefined ",m)Q+=" || ! Object.prototype.hasOwnProperty.call("+O+", "+M+"["+T+"]) ";if(Q+=") {  var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { missingProperty: '"+Z+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+Z+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",K)Q+="  }  "}else{var f1=H;if(f1){var a,c=-1,F1=f1.length-1;while(c<F1){a=f1[c+=1];var Q1=v.util.getProperty(a),Z=v.util.escapeQuotes(a),Y1=O+Q1;if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(C,a,v.opts.jsonPointers);if(Q+=" if ( "+Y1+" === undefined ",m)Q+=" || ! Object.prototype.hasOwnProperty.call("+O+", '"+v.util.escapeQuotes(a)+"') ";if(Q+=") {  var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { missingProperty: '"+Z+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+Z+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" ";Q+=" } "}else Q+=" {} ";Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}v.errorPath=C}else if(B)Q+=" if (true) {";return Q}});var r6=z((e$,a6)=>{a6.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O="data"+(X||""),L="valid"+Y,K=v.opts.$data&&q&&q.$data,N;if(K)Q+=" var schema"+Y+" = "+v.util.getData(q.$data,X,v.dataPathArr)+"; ",N="schema"+Y;else N=q;if((q||K)&&v.opts.uniqueItems!==!1){if(K)Q+=" var "+L+"; if ("+N+" === false || "+N+" === undefined) "+L+" = true; else if (typeof "+N+" != 'boolean') "+L+" = false; else { ";Q+=" var i = "+O+".length , "+L+" = true , j; if (i > 1) { ";var M=v.schema.items&&v.schema.items.type,H=Array.isArray(M);if(!M||M=="object"||M=="array"||H&&(M.indexOf("object")>=0||M.indexOf("array")>=0))Q+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+O+"[i], "+O+"[j])) { "+L+" = false; break outer; } } } ";else{Q+=" var itemIndices = {}, item; for (;i--;) { var item = "+O+"[i]; ";var I="checkDataType"+(H?"s":"");if(Q+=" if ("+v.util[I](M,"item",v.opts.strictNumbers,!0)+") continue; ",H)Q+=` if (typeof item == 'string') item = '"' + item; `;Q+=" if (typeof itemIndices[item] == 'number') { "+L+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}if(Q+=" } ",K)Q+="  }  ";Q+=" if (!"+L+") {   ";var S=S||[];if(S.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { i: i, j: j } ",v.opts.messages!==!1)Q+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' ";if(v.opts.verbose){if(Q+=" , schema:  ",K)Q+="validate.schema"+G;else Q+=""+q;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+O+" "}Q+=" } "}else Q+=" {} ";var E=Q;if(Q=S.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+E+"]); ";else Q+=" validate.errors = ["+E+"]; return false; ";else Q+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } ",B)Q+=" else { "}else if(B)Q+=" if (true) { ";return Q}});var i6=z((vO,c6)=>{c6.exports={$ref:Y6(),allOf:q6(),anyOf:W6(),$comment:V6(),const:B6(),contains:O6(),dependencies:H6(),enum:M6(),format:F6(),if:w6(),items:R6(),maximum:K8(),minimum:K8(),maxItems:B8(),minItems:B8(),maxLength:$8(),minLength:$8(),maxProperties:O8(),minProperties:O8(),multipleOf:g6(),not:C6(),oneOf:T6(),pattern:u6(),properties:_6(),propertyNames:x6(),required:n6(),uniqueItems:r6(),validate:D8()}});var s6=z((fO,p6)=>{var d6=i6(),N8=y0().toHash;p6.exports=function f(){var v=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],P=["type","$comment"],J=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],Q=["number","integer","string","array","object","boolean","null"];return v.all=N8(P),v.types=N8(Q),v.forEach(function(Y){if(Y.rules=Y.rules.map(function(X){var q;if(typeof X=="object"){var G=Object.keys(X)[0];q=X[G],X=G,q.forEach(function(B){P.push(B),v.all[B]=!0})}P.push(X);var V=v.all[X]={keyword:X,code:d6[X],implements:q};return V}),v.all.$comment={keyword:"$comment",code:d6.$comment},Y.type)v.types[Y.type]=Y}),v.keywords=N8(P.concat(J)),v.custom={},v}});var e6=z((QO,o6)=>{var t6=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];o6.exports=function(f,v){for(var P=0;P<v.length;P++){f=JSON.parse(JSON.stringify(f));var J=v[P].split("/"),Q=f,Y;for(Y=1;Y<J.length;Y++)Q=Q[J[Y]];for(Y=0;Y<t6.length;Y++){var X=t6[Y],q=Q[X];if(q)Q[X]={anyOf:[q,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}}}return f}});var Q5=z((PO,f5)=>{var rq=hQ().MissingRef;f5.exports=v5;function v5(f,v,P){var J=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");if(typeof v=="function")P=v,v=void 0;var Q=Y(f).then(function(){var q=J._addSchema(f,void 0,v);return q.validate||X(q)});if(P)Q.then(function(q){P(null,q)},P);return Q;function Y(q){var G=q.$schema;return G&&!J.getSchema(G)?v5.call(J,{$ref:G},!0):Promise.resolve()}function X(q){try{return J._compile(q)}catch(V){if(V instanceof rq)return G(V);throw V}function G(V){var B=V.missingSchema;if(K(B))throw new Error("Schema "+B+" is loaded but "+V.missingRef+" cannot be resolved");var O=J._loadingSchemas[B];if(!O)O=J._loadingSchemas[B]=J._opts.loadSchema(B),O.then(L,L);return O.then(function(N){if(!K(B))return Y(N).then(function(){if(!K(B))J.addSchema(N,B,void 0,v)})}).then(function(){return X(q)});function L(){delete J._loadingSchemas[B]}function K(N){return J._refs[N]||J._schemas[N]}}}}});var J5=z((JO,P5)=>{P5.exports=function f(v,P,J){var Q=" ",Y=v.level,X=v.dataLevel,q=v.schema[P],G=v.schemaPath+v.util.getProperty(P),V=v.errSchemaPath+"/"+P,B=!v.opts.allErrors,O,L="data"+(X||""),K="valid"+Y,N="errs__"+Y,M=v.opts.$data&&q&&q.$data,H;if(M)Q+=" var schema"+Y+" = "+v.util.getData(q.$data,X,v.dataPathArr)+"; ",H="schema"+Y;else H=q;var I=this,S="definition"+Y,E=I.definition,U="",g,C,k,m,T;if(M&&E.$data){T="keywordValidate"+Y;var n=E.validateSchema;Q+=" var "+S+" = RULES.custom['"+P+"'].definition; var "+T+" = "+S+".validate;"}else{if(m=v.useCustomRule(I,q,v.schema,v),!m)return;H="validate.schema"+G,T=m.code,g=E.compile,C=E.inline,k=E.macro}var Z=T+".errors",_="i"+Y,j="ruleErr"+Y,b=E.async;if(b&&!v.async)throw new Error("async keyword in sync schema");if(!(C||k))Q+=""+Z+" = null;";if(Q+="var "+N+" = errors;var "+K+";",M&&E.$data){if(U+="}",Q+=" if ("+H+" === undefined) { "+K+" = true; } else { ",n)U+="}",Q+=" "+K+" = "+S+".validateSchema("+H+"); if ("+K+") { "}if(C)if(E.statements)Q+=" "+m.validate+" ";else Q+=" "+K+" = "+m.validate+"; ";else if(k){var a=v.util.copy(v),U="";a.level++;var K1="valid"+a.level;a.schema=m.validate,a.schemaPath="";var Q1=v.compositeRule;v.compositeRule=a.compositeRule=!0;var Y1=v.validate(a).replace(/validate\.schema/g,T);v.compositeRule=a.compositeRule=Q1,Q+=" "+Y1}else{var f1=f1||[];if(f1.push(Q),Q="",Q+="  "+T+".call( ",v.opts.passContext)Q+="this";else Q+="self";if(g||E.schema===!1)Q+=" , "+L+" ";else Q+=" , "+H+" , "+L+" , validate.schema"+v.schemaPath+" ";if(Q+=" , (dataPath || '')",v.errorPath!='""')Q+=" + "+v.errorPath;var c=X?"data"+(X-1||""):"parentData",F1=X?v.dataPathArr[X]:"parentDataProperty";Q+=" , "+c+" , "+F1+" , rootData )  ";var T1=Q;if(Q=f1.pop(),E.errors===!1){if(Q+=" "+K+" = ",b)Q+="await ";Q+=""+T1+"; "}else if(b)Z="customErrors"+Y,Q+=" var "+Z+" = null; try { "+K+" = await "+T1+"; } catch (e) { "+K+" = false; if (e instanceof ValidationError) "+Z+" = e.errors; else throw e; } ";else Q+=" "+Z+" = null; "+K+" = "+T1+"; "}if(E.modifying)Q+=" if ("+c+") "+L+" = "+c+"["+F1+"];";if(Q+=""+U,E.valid){if(B)Q+=" if (true) { "}else{if(Q+=" if ( ",E.valid===void 0)if(Q+=" !",k)Q+=""+K1;else Q+=""+K;else Q+=" "+!E.valid+" ";Q+=") { ",O=I.keyword;var f1=f1||[];f1.push(Q),Q="";var f1=f1||[];if(f1.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(O||"custom")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { keyword: '"+I.keyword+"' } ",v.opts.messages!==!1)Q+=` , message: 'should pass "`+I.keyword+`" keyword validation' `;if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+L+" ";Q+=" } "}else Q+=" {} ";var l1=Q;if(Q=f1.pop(),!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(["+l1+"]); ";else Q+=" validate.errors = ["+l1+"]; return false; ";else Q+=" var err = "+l1+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var G1=Q;if(Q=f1.pop(),C)if(E.errors){if(E.errors!="full"){if(Q+="  for (var "+_+"="+N+"; "+_+"<errors; "+_+"++) { var "+j+" = vErrors["+_+"]; if ("+j+".dataPath === undefined) "+j+".dataPath = (dataPath || '') + "+v.errorPath+"; if ("+j+".schemaPath === undefined) { "+j+'.schemaPath = "'+V+'"; } ',v.opts.verbose)Q+=" "+j+".schema = "+H+"; "+j+".data = "+L+"; ";Q+=" } "}}else if(E.errors===!1)Q+=" "+G1+" ";else{if(Q+=" if ("+N+" == errors) { "+G1+" } else {  for (var "+_+"="+N+"; "+_+"<errors; "+_+"++) { var "+j+" = vErrors["+_+"]; if ("+j+".dataPath === undefined) "+j+".dataPath = (dataPath || '') + "+v.errorPath+"; if ("+j+".schemaPath === undefined) { "+j+'.schemaPath = "'+V+'"; } ',v.opts.verbose)Q+=" "+j+".schema = "+H+"; "+j+".data = "+L+"; ";Q+=" } } "}else if(k){if(Q+="   var err =   ",v.createErrors!==!1){if(Q+=" { keyword: '"+(O||"custom")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(V)+" , params: { keyword: '"+I.keyword+"' } ",v.opts.messages!==!1)Q+=` , message: 'should pass "`+I.keyword+`" keyword validation' `;if(v.opts.verbose)Q+=" , schema: validate.schema"+G+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+L+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&B)if(v.async)Q+=" throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; return false; "}else if(E.errors===!1)Q+=" "+G1+" ";else{if(Q+=" if (Array.isArray("+Z+")) { if (vErrors === null) vErrors = "+Z+"; else vErrors = vErrors.concat("+Z+"); errors = vErrors.length;  for (var "+_+"="+N+"; "+_+"<errors; "+_+"++) { var "+j+" = vErrors["+_+"]; if ("+j+".dataPath === undefined) "+j+".dataPath = (dataPath || '') + "+v.errorPath+";  "+j+'.schemaPath = "'+V+'";  ',v.opts.verbose)Q+=" "+j+".schema = "+H+"; "+j+".data = "+L+"; ";Q+=" } } else { "+G1+" } "}if(Q+=" } ",B)Q+=" else { "}return Q}});var H8=z((YO,cq)=>{cq.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var q5=z((XO,X5)=>{var Y5=H8();X5.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Y5.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Y5.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var W5=z((qO,G5)=>{var iq=/^[a-z_$][a-z0-9_$-]*$/i,dq=J5(),pq=q5();G5.exports={add:sq,get:tq,remove:oq,validate:L8};function sq(f,v){var P=this.RULES;if(P.keywords[f])throw new Error("Keyword "+f+" is already defined");if(!iq.test(f))throw new Error("Keyword "+f+" is not a valid identifier");if(v){this.validateKeyword(v,!0);var J=v.type;if(Array.isArray(J))for(var Q=0;Q<J.length;Q++)X(f,J[Q],v);else X(f,J,v);var Y=v.metaSchema;if(Y){if(v.$data&&this._opts.$data)Y={anyOf:[Y,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]};v.validateSchema=this.compile(Y,!0)}}P.keywords[f]=P.all[f]=!0;function X(q,G,V){var B;for(var O=0;O<P.length;O++){var L=P[O];if(L.type==G){B=L;break}}if(!B)B={type:G,rules:[]},P.push(B);var K={keyword:q,definition:V,custom:!0,code:dq,implements:V.implements};B.rules.push(K),P.custom[q]=K}return this}function tq(f){var v=this.RULES.custom[f];return v?v.definition:this.RULES.keywords[f]||!1}function oq(f){var v=this.RULES;delete v.keywords[f],delete v.all[f],delete v.custom[f];for(var P=0;P<v.length;P++){var J=v[P].rules;for(var Q=0;Q<J.length;Q++)if(J[Q].keyword==f){J.splice(Q,1);break}}return this}function L8(f,v){L8.errors=null;var P=this._validateKeyword=this._validateKeyword||this.compile(pq,!0);if(P(f))return!0;if(L8.errors=P.errors,v)throw new Error("custom keyword definition is invalid: "+this.errorsText(P.errors));else return!1}});var D5=z((GO,eq)=>{eq.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var A5=z((WO,M5)=>{var K5=n9(),z0=FQ(),vG=r9(),B5=P8(),fG=W8(),QG=P6(),PG=s6(),$5=e6(),O5=y0();M5.exports=w1;w1.prototype.validate=YG;w1.prototype.compile=XG;w1.prototype.addSchema=qG;w1.prototype.addMetaSchema=GG;w1.prototype.validateSchema=WG;w1.prototype.getSchema=VG;w1.prototype.removeSchema=BG;w1.prototype.addFormat=FG;w1.prototype.errorsText=AG;w1.prototype._addSchema=$G;w1.prototype._compile=OG;w1.prototype.compileAsync=Q5();var UQ=W5();w1.prototype.addKeyword=UQ.add;w1.prototype.getKeyword=UQ.get;w1.prototype.removeKeyword=UQ.remove;w1.prototype.validateKeyword=UQ.validate;var N5=hQ();w1.ValidationError=N5.Validation;w1.MissingRefError=N5.MissingRef;w1.$dataMetaSchema=$5;var SQ="http://json-schema.org/draft-07/schema",V5=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],JG=["/properties"];function w1(f){if(!(this instanceof w1))return new w1(f);if(f=this._opts=O5.copy(f)||{},yG(this),this._schemas={},this._refs={},this._fragments={},this._formats=QG(f.format),this._cache=f.cache||new vG,this._loadingSchemas={},this._compilations=[],this.RULES=PG(),this._getId=NG(f),f.loopRequired=f.loopRequired||1/0,f.errorDataPath=="property")f._errorDataPathProperty=!0;if(f.serialize===void 0)f.serialize=fG;if(this._metaOpts=EG(this),f.formats)IG(this);if(f.keywords)RG(this);if(hG(this),typeof f.meta=="object")this.addMetaSchema(f.meta);if(f.nullable)this.addKeyword("nullable",{metaSchema:{type:"boolean"}});wG(this)}function YG(f,v){var P;if(typeof f=="string"){if(P=this.getSchema(f),!P)throw new Error('no schema with key or ref "'+f+'"')}else{var J=this._addSchema(f);P=J.validate||this._compile(J)}var Q=P(v);if(P.$async!==!0)this.errors=P.errors;return Q}function XG(f,v){var P=this._addSchema(f,void 0,v);return P.validate||this._compile(P)}function qG(f,v,P,J){if(Array.isArray(f)){for(var Q=0;Q<f.length;Q++)this.addSchema(f[Q],void 0,P,J);return this}var Y=this._getId(f);if(Y!==void 0&&typeof Y!="string")throw new Error("schema id must be string");return v=z0.normalizeId(v||Y),L5(this,v),this._schemas[v]=this._addSchema(f,P,J,!0),this}function GG(f,v,P){return this.addSchema(f,v,P,!0),this}function WG(f,v){var P=f.$schema;if(P!==void 0&&typeof P!="string")throw new Error("$schema must be a string");if(P=P||this._opts.defaultMeta||DG(this),!P)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var J=this.validate(P,f);if(!J&&v){var Q="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(Q);else throw new Error(Q)}return J}function DG(f){var v=f._opts.meta;return f._opts.defaultMeta=typeof v=="object"?f._getId(v)||v:f.getSchema(SQ)?SQ:void 0,f._opts.defaultMeta}function VG(f){var v=H5(this,f);switch(typeof v){case"object":return v.validate||this._compile(v);case"string":return this.getSchema(v);case"undefined":return KG(this,f)}}function KG(f,v){var P=z0.schema.call(f,{schema:{}},v);if(P){var{schema:J,root:Q,baseId:Y}=P,X=K5.call(f,J,Q,void 0,Y);return f._fragments[v]=new B5({ref:v,fragment:!0,schema:J,root:Q,baseId:Y,validate:X}),X}}function H5(f,v){return v=z0.normalizeId(v),f._schemas[v]||f._refs[v]||f._fragments[v]}function BG(f){if(f instanceof RegExp)return zQ(this,this._schemas,f),zQ(this,this._refs,f),this;switch(typeof f){case"undefined":return zQ(this,this._schemas),zQ(this,this._refs),this._cache.clear(),this;case"string":var v=H5(this,f);if(v)this._cache.del(v.cacheKey);return delete this._schemas[f],delete this._refs[f],this;case"object":var P=this._opts.serialize,J=P?P(f):f;this._cache.del(J);var Q=this._getId(f);if(Q)Q=z0.normalizeId(Q),delete this._schemas[Q],delete this._refs[Q]}return this}function zQ(f,v,P){for(var J in v){var Q=v[J];if(!Q.meta&&(!P||P.test(J)))f._cache.del(Q.cacheKey),delete v[J]}}function $G(f,v,P,J){if(typeof f!="object"&&typeof f!="boolean")throw new Error("schema should be object or boolean");var Q=this._opts.serialize,Y=Q?Q(f):f,X=this._cache.get(Y);if(X)return X;J=J||this._opts.addUsedSchema!==!1;var q=z0.normalizeId(this._getId(f));if(q&&J)L5(this,q);var G=this._opts.validateSchema!==!1&&!v,V;if(G&&!(V=q&&q==z0.normalizeId(f.$schema)))this.validateSchema(f,!0);var B=z0.ids.call(this,f),O=new B5({id:q,schema:f,localRefs:B,cacheKey:Y,meta:P});if(q[0]!="#"&&J)this._refs[q]=O;if(this._cache.put(Y,O),G&&V)this.validateSchema(f,!0);return O}function OG(f,v){if(f.compiling){if(f.validate=Q,Q.schema=f.schema,Q.errors=null,Q.root=v?v:Q,f.schema.$async===!0)Q.$async=!0;return Q}f.compiling=!0;var P;if(f.meta)P=this._opts,this._opts=this._metaOpts;var J;try{J=K5.call(this,f.schema,v,f.localRefs)}catch(Y){throw delete f.validate,Y}finally{if(f.compiling=!1,f.meta)this._opts=P}return f.validate=J,f.refs=J.refs,f.refVal=J.refVal,f.root=J.root,J;function Q(){var Y=f.validate,X=Y.apply(this,arguments);return Q.errors=Y.errors,X}}function NG(f){switch(f.schemaId){case"auto":return MG;case"id":return HG;default:return LG}}function HG(f){if(f.$id)this.logger.warn("schema $id ignored",f.$id);return f.id}function LG(f){if(f.id)this.logger.warn("schema id ignored",f.id);return f.$id}function MG(f){if(f.$id&&f.id&&f.$id!=f.id)throw new Error("schema $id is different from id");return f.$id||f.id}function AG(f,v){if(f=f||this.errors,!f)return"No errors";v=v||{};var P=v.separator===void 0?", ":v.separator,J=v.dataVar===void 0?"data":v.dataVar,Q="";for(var Y=0;Y<f.length;Y++){var X=f[Y];if(X)Q+=J+X.dataPath+" "+X.message+P}return Q.slice(0,-P.length)}function FG(f,v){if(typeof v=="string")v=new RegExp(v);return this._formats[f]=v,this}function hG(f){var v;if(f._opts.$data)v=D5(),f.addMetaSchema(v,v.$id,!0);if(f._opts.meta===!1)return;var P=H8();if(f._opts.$data)P=$5(P,JG);f.addMetaSchema(P,SQ,!0),f._refs["http://json-schema.org/schema"]=SQ}function wG(f){var v=f._opts.schemas;if(!v)return;if(Array.isArray(v))f.addSchema(v);else for(var P in v)f.addSchema(v[P],P)}function IG(f){for(var v in f._opts.formats){var P=f._opts.formats[v];f.addFormat(v,P)}}function RG(f){for(var v in f._opts.keywords){var P=f._opts.keywords[v];f.addKeyword(v,P)}}function L5(f,v){if(f._schemas[v]||f._refs[v])throw new Error('schema with key or id "'+v+'" already exists')}function EG(f){var v=O5.copy(f._opts);for(var P=0;P<V5.length;P++)delete v[V5[P]];return v}function yG(f){var v=f._opts.logger;if(v===!1)f.logger={log:M8,warn:M8,error:M8};else{if(v===void 0)v=console;if(!(typeof v=="object"&&v.log&&v.warn&&v.error))throw new Error("logger must implement log, warn and error methods");f.logger=v}}function M8(){}});var w5=z((qf)=>{var zG=qf&&qf.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(qf,"__esModule",{value:!0});qf.Server=void 0;var F5=M9(),o1=_f(),SG=zG(A5());class h5 extends F5.Protocol{constructor(f,v){var P;super(v);this._serverInfo=f,this._capabilities=(P=v===null||v===void 0?void 0:v.capabilities)!==null&&P!==void 0?P:{},this._instructions=v===null||v===void 0?void 0:v.instructions,this.setRequestHandler(o1.InitializeRequestSchema,(J)=>this._oninitialize(J)),this.setNotificationHandler(o1.InitializedNotificationSchema,()=>{var J;return(J=this.oninitialized)===null||J===void 0?void 0:J.call(this)})}registerCapabilities(f){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=F5.mergeCapabilities(this._capabilities,f)}assertCapabilityForMethod(f){var v,P,J;switch(f){case"sampling/createMessage":if(!((v=this._clientCapabilities)===null||v===void 0?void 0:v.sampling))throw new Error(`Client does not support sampling (required for ${f})`);break;case"elicitation/create":if(!((P=this._clientCapabilities)===null||P===void 0?void 0:P.elicitation))throw new Error(`Client does not support elicitation (required for ${f})`);break;case"roots/list":if(!((J=this._clientCapabilities)===null||J===void 0?void 0:J.roots))throw new Error(`Client does not support listing roots (required for ${f})`);break;case"ping":break}}assertNotificationCapability(f){switch(f){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${f})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${f})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${f})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${f})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(f){switch(f){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Server does not support sampling (required for ${f})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${f})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${f})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${f})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${f})`);break;case"ping":case"initialize":break}}async _oninitialize(f){let v=f.params.protocolVersion;return this._clientCapabilities=f.params.capabilities,this._clientVersion=f.params.clientInfo,{protocolVersion:o1.SUPPORTED_PROTOCOL_VERSIONS.includes(v)?v:o1.LATEST_PROTOCOL_VERSION,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},o1.EmptyResultSchema)}async createMessage(f,v){return this.request({method:"sampling/createMessage",params:f},o1.CreateMessageResultSchema,v)}async elicitInput(f,v){let P=await this.request({method:"elicitation/create",params:f},o1.ElicitResultSchema,v);if(P.action==="accept"&&P.content)try{let J=new SG.default,Q=J.compile(f.requestedSchema);if(!Q(P.content))throw new o1.McpError(o1.ErrorCode.InvalidParams,`Elicitation response content does not match requested schema: ${J.errorsText(Q.errors)}`)}catch(J){if(J instanceof o1.McpError)throw J;throw new o1.McpError(o1.ErrorCode.InternalError,`Error validating elicitation response: ${J}`)}return P}async listRoots(f,v){return this.request({method:"roots/list",params:f},o1.ListRootsResultSchema,v)}async sendLoggingMessage(f){return this.notification({method:"notifications/message",params:f})}async sendResourceUpdated(f){return this.notification({method:"notifications/resources/updated",params:f})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}}qf.Server=h5});var gQ=z((Wv)=>{Object.defineProperty(Wv,"__esModule",{value:!0});Wv.getDefaultOptions=Wv.defaultOptions=Wv.jsonDescription=Wv.ignoreOverride=void 0;Wv.ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use");var UG=(f,v)=>{if(v.description)try{return{...f,...JSON.parse(v.description)}}catch{}return f};Wv.jsonDescription=UG;Wv.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"};var gG=(f)=>typeof f==="string"?{...Wv.defaultOptions,name:f}:{...Wv.defaultOptions,...f};Wv.getDefaultOptions=gG});var A8=z((jQ)=>{Object.defineProperty(jQ,"__esModule",{value:!0});jQ.getRefs=void 0;var jG=gQ(),CG=(f)=>{let v=jG.getDefaultOptions(f),P=v.name!==void 0?[...v.basePath,v.definitionPath,v.name]:v.basePath;return{...v,currentPath:P,propertyPath:void 0,seen:new Map(Object.entries(v.definitions).map(([J,Q])=>[Q._def,{def:Q._def,path:[...v.basePath,v.definitionPath,J],jsonSchema:void 0}]))}};jQ.getRefs=CG});var q0=z((Gf)=>{Object.defineProperty(Gf,"__esModule",{value:!0});Gf.setResponseValueAndErrors=Gf.addErrorMessage=void 0;function I5(f,v,P,J){if(!J?.errorMessages)return;if(P)f.errorMessage={...f.errorMessage,[v]:P}}Gf.addErrorMessage=I5;function ZG(f,v,P,J,Q){f[v]=P,I5(f,v,J,Q)}Gf.setResponseValueAndErrors=ZG});var F8=z((CQ)=>{Object.defineProperty(CQ,"__esModule",{value:!0});CQ.parseAnyDef=void 0;function TG(){return{}}CQ.parseAnyDef=TG});var h8=z((TQ)=>{Object.defineProperty(TQ,"__esModule",{value:!0});TQ.parseArrayDef=void 0;var bG=kv(),ZQ=q0(),uG=z1();function lG(f,v){let P={type:"array"};if(f.type?._def&&f.type?._def?.typeName!==bG.ZodFirstPartyTypeKind.ZodAny)P.items=uG.parseDef(f.type._def,{...v,currentPath:[...v.currentPath,"items"]});if(f.minLength)ZQ.setResponseValueAndErrors(P,"minItems",f.minLength.value,f.minLength.message,v);if(f.maxLength)ZQ.setResponseValueAndErrors(P,"maxItems",f.maxLength.value,f.maxLength.message,v);if(f.exactLength)ZQ.setResponseValueAndErrors(P,"minItems",f.exactLength.value,f.exactLength.message,v),ZQ.setResponseValueAndErrors(P,"maxItems",f.exactLength.value,f.exactLength.message,v);return P}TQ.parseArrayDef=lG});var w8=z((bQ)=>{Object.defineProperty(bQ,"__esModule",{value:!0});bQ.parseBigintDef=void 0;var S0=q0();function _G(f,v){let P={type:"integer",format:"int64"};if(!f.checks)return P;for(let J of f.checks)switch(J.kind){case"min":if(v.target==="jsonSchema7")if(J.inclusive)S0.setResponseValueAndErrors(P,"minimum",J.value,J.message,v);else S0.setResponseValueAndErrors(P,"exclusiveMinimum",J.value,J.message,v);else{if(!J.inclusive)P.exclusiveMinimum=!0;S0.setResponseValueAndErrors(P,"minimum",J.value,J.message,v)}break;case"max":if(v.target==="jsonSchema7")if(J.inclusive)S0.setResponseValueAndErrors(P,"maximum",J.value,J.message,v);else S0.setResponseValueAndErrors(P,"exclusiveMaximum",J.value,J.message,v);else{if(!J.inclusive)P.exclusiveMaximum=!0;S0.setResponseValueAndErrors(P,"maximum",J.value,J.message,v)}break;case"multipleOf":S0.setResponseValueAndErrors(P,"multipleOf",J.value,J.message,v);break}return P}bQ.parseBigintDef=_G});var I8=z((uQ)=>{Object.defineProperty(uQ,"__esModule",{value:!0});uQ.parseBooleanDef=void 0;function kG(){return{type:"boolean"}}uQ.parseBooleanDef=kG});var _Q=z((lQ)=>{Object.defineProperty(lQ,"__esModule",{value:!0});lQ.parseBrandedDef=void 0;var xG=z1();function mG(f,v){return xG.parseDef(f.type._def,v)}lQ.parseBrandedDef=mG});var R8=z((kQ)=>{Object.defineProperty(kQ,"__esModule",{value:!0});kQ.parseCatchDef=void 0;var nG=z1(),aG=(f,v)=>{return nG.parseDef(f.innerType._def,v)};kQ.parseCatchDef=aG});var E8=z((xQ)=>{Object.defineProperty(xQ,"__esModule",{value:!0});xQ.parseDateDef=void 0;var R5=q0();function E5(f,v,P){let J=P??v.dateStrategy;if(Array.isArray(J))return{anyOf:J.map((Q,Y)=>E5(f,v,Q))};switch(J){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return rG(f,v)}}xQ.parseDateDef=E5;var rG=(f,v)=>{let P={type:"integer",format:"unix-time"};if(v.target==="openApi3")return P;for(let J of f.checks)switch(J.kind){case"min":R5.setResponseValueAndErrors(P,"minimum",J.value,J.message,v);break;case"max":R5.setResponseValueAndErrors(P,"maximum",J.value,J.message,v);break}return P}});var y8=z((mQ)=>{Object.defineProperty(mQ,"__esModule",{value:!0});mQ.parseDefaultDef=void 0;var cG=z1();function iG(f,v){return{...cG.parseDef(f.innerType._def,v),default:f.defaultValue()}}mQ.parseDefaultDef=iG});var z8=z((nQ)=>{Object.defineProperty(nQ,"__esModule",{value:!0});nQ.parseEffectsDef=void 0;var dG=z1();function pG(f,v){return v.effectStrategy==="input"?dG.parseDef(f.schema._def,v):{}}nQ.parseEffectsDef=pG});var S8=z((aQ)=>{Object.defineProperty(aQ,"__esModule",{value:!0});aQ.parseEnumDef=void 0;function sG(f){return{type:"string",enum:Array.from(f.values)}}aQ.parseEnumDef=sG});var U8=z((rQ)=>{Object.defineProperty(rQ,"__esModule",{value:!0});rQ.parseIntersectionDef=void 0;var y5=z1(),tG=(f)=>{if("type"in f&&f.type==="string")return!1;return"allOf"in f};function oG(f,v){let P=[y5.parseDef(f.left._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),y5.parseDef(f.right._def,{...v,currentPath:[...v.currentPath,"allOf","1"]})].filter((Y)=>!!Y),J=v.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,Q=[];return P.forEach((Y)=>{if(tG(Y)){if(Q.push(...Y.allOf),Y.unevaluatedProperties===void 0)J=void 0}else{let X=Y;if("additionalProperties"in Y&&Y.additionalProperties===!1){let{additionalProperties:q,...G}=Y;X=G}else J=void 0;Q.push(X)}}),Q.length?{allOf:Q,...J}:void 0}rQ.parseIntersectionDef=oG});var g8=z((cQ)=>{Object.defineProperty(cQ,"__esModule",{value:!0});cQ.parseLiteralDef=void 0;function eG(f,v){let P=typeof f.value;if(P!=="bigint"&&P!=="number"&&P!=="boolean"&&P!=="string")return{type:Array.isArray(f.value)?"array":"object"};if(v.target==="openApi3")return{type:P==="bigint"?"integer":P,enum:[f.value]};return{type:P==="bigint"?"integer":P,const:f.value}}cQ.parseLiteralDef=eG});var iQ=z((Z1)=>{Object.defineProperty(Z1,"__esModule",{value:!0});Z1.parseStringDef=Z1.zodPatterns=void 0;var U0=q0(),j8=void 0;Z1.zodPatterns={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>{if(j8===void 0)j8=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u");return j8},uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function vW(f,v){let P={type:"string"};if(f.checks)for(let J of f.checks)switch(J.kind){case"min":U0.setResponseValueAndErrors(P,"minLength",typeof P.minLength==="number"?Math.max(P.minLength,J.value):J.value,J.message,v);break;case"max":U0.setResponseValueAndErrors(P,"maxLength",typeof P.maxLength==="number"?Math.min(P.maxLength,J.value):J.value,J.message,v);break;case"email":switch(v.emailStrategy){case"format:email":Lv(P,"email",J.message,v);break;case"format:idn-email":Lv(P,"idn-email",J.message,v);break;case"pattern:zod":x1(P,Z1.zodPatterns.email,J.message,v);break}break;case"url":Lv(P,"uri",J.message,v);break;case"uuid":Lv(P,"uuid",J.message,v);break;case"regex":x1(P,J.regex,J.message,v);break;case"cuid":x1(P,Z1.zodPatterns.cuid,J.message,v);break;case"cuid2":x1(P,Z1.zodPatterns.cuid2,J.message,v);break;case"startsWith":x1(P,RegExp(`^${C8(J.value,v)}`),J.message,v);break;case"endsWith":x1(P,RegExp(`${C8(J.value,v)}$`),J.message,v);break;case"datetime":Lv(P,"date-time",J.message,v);break;case"date":Lv(P,"date",J.message,v);break;case"time":Lv(P,"time",J.message,v);break;case"duration":Lv(P,"duration",J.message,v);break;case"length":U0.setResponseValueAndErrors(P,"minLength",typeof P.minLength==="number"?Math.max(P.minLength,J.value):J.value,J.message,v),U0.setResponseValueAndErrors(P,"maxLength",typeof P.maxLength==="number"?Math.min(P.maxLength,J.value):J.value,J.message,v);break;case"includes":{x1(P,RegExp(C8(J.value,v)),J.message,v);break}case"ip":{if(J.version!=="v6")Lv(P,"ipv4",J.message,v);if(J.version!=="v4")Lv(P,"ipv6",J.message,v);break}case"base64url":x1(P,Z1.zodPatterns.base64url,J.message,v);break;case"jwt":x1(P,Z1.zodPatterns.jwt,J.message,v);break;case"cidr":{if(J.version!=="v6")x1(P,Z1.zodPatterns.ipv4Cidr,J.message,v);if(J.version!=="v4")x1(P,Z1.zodPatterns.ipv6Cidr,J.message,v);break}case"emoji":x1(P,Z1.zodPatterns.emoji(),J.message,v);break;case"ulid":{x1(P,Z1.zodPatterns.ulid,J.message,v);break}case"base64":{switch(v.base64Strategy){case"format:binary":{Lv(P,"binary",J.message,v);break}case"contentEncoding:base64":{U0.setResponseValueAndErrors(P,"contentEncoding","base64",J.message,v);break}case"pattern:zod":{x1(P,Z1.zodPatterns.base64,J.message,v);break}}break}case"nanoid":x1(P,Z1.zodPatterns.nanoid,J.message,v);case"toLowerCase":case"toUpperCase":case"trim":break;default:((Q)=>{})(J)}return P}Z1.parseStringDef=vW;function C8(f,v){return v.patternStrategy==="escape"?QW(f):f}var fW=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function QW(f){let v="";for(let P=0;P<f.length;P++){if(!fW.has(f[P]))v+="\\";v+=f[P]}return v}function Lv(f,v,P,J){if(f.format||f.anyOf?.some((Q)=>Q.format)){if(!f.anyOf)f.anyOf=[];if(f.format){if(f.anyOf.push({format:f.format,...f.errorMessage&&J.errorMessages&&{errorMessage:{format:f.errorMessage.format}}}),delete f.format,f.errorMessage){if(delete f.errorMessage.format,Object.keys(f.errorMessage).length===0)delete f.errorMessage}}f.anyOf.push({format:v,...P&&J.errorMessages&&{errorMessage:{format:P}}})}else U0.setResponseValueAndErrors(f,"format",v,P,J)}function x1(f,v,P,J){if(f.pattern||f.allOf?.some((Q)=>Q.pattern)){if(!f.allOf)f.allOf=[];if(f.pattern){if(f.allOf.push({pattern:f.pattern,...f.errorMessage&&J.errorMessages&&{errorMessage:{pattern:f.errorMessage.pattern}}}),delete f.pattern,f.errorMessage){if(delete f.errorMessage.pattern,Object.keys(f.errorMessage).length===0)delete f.errorMessage}}f.allOf.push({pattern:z5(v,J),...P&&J.errorMessages&&{errorMessage:{pattern:P}}})}else U0.setResponseValueAndErrors(f,"pattern",z5(v,J),P,J)}function z5(f,v){if(!v.applyRegexFlags||!f.flags)return f.source;let P={i:f.flags.includes("i"),m:f.flags.includes("m"),s:f.flags.includes("s")},J=P.i?f.source.toLowerCase():f.source,Q="",Y=!1,X=!1,q=!1;for(let G=0;G<J.length;G++){if(Y){Q+=J[G],Y=!1;continue}if(P.i){if(X){if(J[G].match(/[a-z]/)){if(q)Q+=J[G],Q+=`${J[G-2]}-${J[G]}`.toUpperCase(),q=!1;else if(J[G+1]==="-"&&J[G+2]?.match(/[a-z]/))Q+=J[G],q=!0;else Q+=`${J[G]}${J[G].toUpperCase()}`;continue}}else if(J[G].match(/[a-z]/)){Q+=`[${J[G]}${J[G].toUpperCase()}]`;continue}}if(P.m){if(J[G]==="^"){Q+=`(^|(?<=[\r
]))`;continue}else if(J[G]==="$"){Q+=`($|(?=[\r
]))`;continue}}if(P.s&&J[G]==="."){Q+=X?`${J[G]}\r
`:`[${J[G]}\r
]`;continue}if(Q+=J[G],J[G]==="\\")Y=!0;else if(X&&J[G]==="]")X=!1;else if(!X&&J[G]==="[")X=!0}try{new RegExp(Q)}catch{return console.warn(`Could not convert regex pattern at ${v.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),f.source}return Q}});var pQ=z((dQ)=>{Object.defineProperty(dQ,"__esModule",{value:!0});dQ.parseRecordDef=void 0;var xf=kv(),S5=z1(),PW=iQ(),JW=_Q();function YW(f,v){if(v.target==="openAi")console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead.");if(v.target==="openApi3"&&f.keyType?._def.typeName===xf.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:f.keyType._def.values,properties:f.keyType._def.values.reduce((J,Q)=>({...J,[Q]:S5.parseDef(f.valueType._def,{...v,currentPath:[...v.currentPath,"properties",Q]})??{}}),{}),additionalProperties:v.rejectedAdditionalProperties};let P={type:"object",additionalProperties:S5.parseDef(f.valueType._def,{...v,currentPath:[...v.currentPath,"additionalProperties"]})??v.allowedAdditionalProperties};if(v.target==="openApi3")return P;if(f.keyType?._def.typeName===xf.ZodFirstPartyTypeKind.ZodString&&f.keyType._def.checks?.length){let{type:J,...Q}=PW.parseStringDef(f.keyType._def,v);return{...P,propertyNames:Q}}else if(f.keyType?._def.typeName===xf.ZodFirstPartyTypeKind.ZodEnum)return{...P,propertyNames:{enum:f.keyType._def.values}};else if(f.keyType?._def.typeName===xf.ZodFirstPartyTypeKind.ZodBranded&&f.keyType._def.type._def.typeName===xf.ZodFirstPartyTypeKind.ZodString&&f.keyType._def.type._def.checks?.length){let{type:J,...Q}=JW.parseBrandedDef(f.keyType._def,v);return{...P,propertyNames:Q}}return P}dQ.parseRecordDef=YW});var Z8=z((sQ)=>{Object.defineProperty(sQ,"__esModule",{value:!0});sQ.parseMapDef=void 0;var U5=z1(),XW=pQ();function qW(f,v){if(v.mapStrategy==="record")return XW.parseRecordDef(f,v);let P=U5.parseDef(f.keyType._def,{...v,currentPath:[...v.currentPath,"items","items","0"]})||{},J=U5.parseDef(f.valueType._def,{...v,currentPath:[...v.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[P,J],minItems:2,maxItems:2}}}sQ.parseMapDef=qW});var T8=z((tQ)=>{Object.defineProperty(tQ,"__esModule",{value:!0});tQ.parseNativeEnumDef=void 0;function GW(f){let v=f.values,J=Object.keys(f.values).filter((Y)=>{return typeof v[v[Y]]!=="number"}).map((Y)=>v[Y]),Q=Array.from(new Set(J.map((Y)=>typeof Y)));return{type:Q.length===1?Q[0]==="string"?"string":"number":["string","number"],enum:J}}tQ.parseNativeEnumDef=GW});var b8=z((oQ)=>{Object.defineProperty(oQ,"__esModule",{value:!0});oQ.parseNeverDef=void 0;function WW(){return{not:{}}}oQ.parseNeverDef=WW});var u8=z((eQ)=>{Object.defineProperty(eQ,"__esModule",{value:!0});eQ.parseNullDef=void 0;function DW(f){return f.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}eQ.parseNullDef=DW});var vP=z((G0)=>{Object.defineProperty(G0,"__esModule",{value:!0});G0.parseUnionDef=G0.primitiveMappings=void 0;var VW=z1();G0.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function KW(f,v){if(v.target==="openApi3")return g5(f,v);let P=f.options instanceof Map?Array.from(f.options.values()):f.options;if(P.every((J)=>(J._def.typeName in G0.primitiveMappings)&&(!J._def.checks||!J._def.checks.length))){let J=P.reduce((Q,Y)=>{let X=G0.primitiveMappings[Y._def.typeName];return X&&!Q.includes(X)?[...Q,X]:Q},[]);return{type:J.length>1?J:J[0]}}else if(P.every((J)=>J._def.typeName==="ZodLiteral"&&!J.description)){let J=P.reduce((Q,Y)=>{let X=typeof Y._def.value;switch(X){case"string":case"number":case"boolean":return[...Q,X];case"bigint":return[...Q,"integer"];case"object":if(Y._def.value===null)return[...Q,"null"];case"symbol":case"undefined":case"function":default:return Q}},[]);if(J.length===P.length){let Q=J.filter((Y,X,q)=>q.indexOf(Y)===X);return{type:Q.length>1?Q:Q[0],enum:P.reduce((Y,X)=>{return Y.includes(X._def.value)?Y:[...Y,X._def.value]},[])}}}else if(P.every((J)=>J._def.typeName==="ZodEnum"))return{type:"string",enum:P.reduce((J,Q)=>[...J,...Q._def.values.filter((Y)=>!J.includes(Y))],[])};return g5(f,v)}G0.parseUnionDef=KW;var g5=(f,v)=>{let P=(f.options instanceof Map?Array.from(f.options.values()):f.options).map((J,Q)=>VW.parseDef(J._def,{...v,currentPath:[...v.currentPath,"anyOf",`${Q}`]})).filter((J)=>!!J&&(!v.strictUnions||typeof J==="object"&&Object.keys(J).length>0));return P.length?{anyOf:P}:void 0}});var l8=z((fP)=>{Object.defineProperty(fP,"__esModule",{value:!0});fP.parseNullableDef=void 0;var j5=z1(),C5=vP();function BW(f,v){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(f.innerType._def.typeName)&&(!f.innerType._def.checks||!f.innerType._def.checks.length)){if(v.target==="openApi3")return{type:C5.primitiveMappings[f.innerType._def.typeName],nullable:!0};return{type:[C5.primitiveMappings[f.innerType._def.typeName],"null"]}}if(v.target==="openApi3"){let J=j5.parseDef(f.innerType._def,{...v,currentPath:[...v.currentPath]});if(J&&"$ref"in J)return{allOf:[J],nullable:!0};return J&&{...J,nullable:!0}}let P=j5.parseDef(f.innerType._def,{...v,currentPath:[...v.currentPath,"anyOf","0"]});return P&&{anyOf:[P,{type:"null"}]}}fP.parseNullableDef=BW});var _8=z((QP)=>{Object.defineProperty(QP,"__esModule",{value:!0});QP.parseNumberDef=void 0;var W0=q0();function $W(f,v){let P={type:"number"};if(!f.checks)return P;for(let J of f.checks)switch(J.kind){case"int":P.type="integer",W0.addErrorMessage(P,"type",J.message,v);break;case"min":if(v.target==="jsonSchema7")if(J.inclusive)W0.setResponseValueAndErrors(P,"minimum",J.value,J.message,v);else W0.setResponseValueAndErrors(P,"exclusiveMinimum",J.value,J.message,v);else{if(!J.inclusive)P.exclusiveMinimum=!0;W0.setResponseValueAndErrors(P,"minimum",J.value,J.message,v)}break;case"max":if(v.target==="jsonSchema7")if(J.inclusive)W0.setResponseValueAndErrors(P,"maximum",J.value,J.message,v);else W0.setResponseValueAndErrors(P,"exclusiveMaximum",J.value,J.message,v);else{if(!J.inclusive)P.exclusiveMaximum=!0;W0.setResponseValueAndErrors(P,"maximum",J.value,J.message,v)}break;case"multipleOf":W0.setResponseValueAndErrors(P,"multipleOf",J.value,J.message,v);break}return P}QP.parseNumberDef=$W});var k8=z((PP)=>{Object.defineProperty(PP,"__esModule",{value:!0});PP.parseObjectDef=void 0;var OW=kv(),Z5=z1();function NW(f,v){let P=v.target==="openAi",J={type:"object",properties:{}},Q=[],Y=f.shape();for(let q in Y){let G=Y[q];if(G===void 0||G._def===void 0)continue;let V=LW(G);if(V&&P){if(G instanceof OW.ZodOptional)G=G._def.innerType;if(!G.isNullable())G=G.nullable();V=!1}let B=Z5.parseDef(G._def,{...v,currentPath:[...v.currentPath,"properties",q],propertyPath:[...v.currentPath,"properties",q]});if(B===void 0)continue;if(J.properties[q]=B,!V)Q.push(q)}if(Q.length)J.required=Q;let X=HW(f,v);if(X!==void 0)J.additionalProperties=X;return J}PP.parseObjectDef=NW;function HW(f,v){if(f.catchall._def.typeName!=="ZodNever")return Z5.parseDef(f.catchall._def,{...v,currentPath:[...v.currentPath,"additionalProperties"]});switch(f.unknownKeys){case"passthrough":return v.allowedAdditionalProperties;case"strict":return v.rejectedAdditionalProperties;case"strip":return v.removeAdditionalStrategy==="strict"?v.allowedAdditionalProperties:v.rejectedAdditionalProperties}}function LW(f){try{return f.isOptional()}catch{return!0}}});var x8=z((JP)=>{Object.defineProperty(JP,"__esModule",{value:!0});JP.parseOptionalDef=void 0;var T5=z1(),MW=(f,v)=>{if(v.currentPath.toString()===v.propertyPath?.toString())return T5.parseDef(f.innerType._def,v);let P=T5.parseDef(f.innerType._def,{...v,currentPath:[...v.currentPath,"anyOf","1"]});return P?{anyOf:[{not:{}},P]}:{}};JP.parseOptionalDef=MW});var m8=z((XP)=>{Object.defineProperty(XP,"__esModule",{value:!0});XP.parsePipelineDef=void 0;var YP=z1(),AW=(f,v)=>{if(v.pipeStrategy==="input")return YP.parseDef(f.in._def,v);else if(v.pipeStrategy==="output")return YP.parseDef(f.out._def,v);let P=YP.parseDef(f.in._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),J=YP.parseDef(f.out._def,{...v,currentPath:[...v.currentPath,"allOf",P?"1":"0"]});return{allOf:[P,J].filter((Q)=>Q!==void 0)}};XP.parsePipelineDef=AW});var n8=z((qP)=>{Object.defineProperty(qP,"__esModule",{value:!0});qP.parsePromiseDef=void 0;var FW=z1();function hW(f,v){return FW.parseDef(f.type._def,v)}qP.parsePromiseDef=hW});var a8=z((GP)=>{Object.defineProperty(GP,"__esModule",{value:!0});GP.parseSetDef=void 0;var b5=q0(),wW=z1();function IW(f,v){let J={type:"array",uniqueItems:!0,items:wW.parseDef(f.valueType._def,{...v,currentPath:[...v.currentPath,"items"]})};if(f.minSize)b5.setResponseValueAndErrors(J,"minItems",f.minSize.value,f.minSize.message,v);if(f.maxSize)b5.setResponseValueAndErrors(J,"maxItems",f.maxSize.value,f.maxSize.message,v);return J}GP.parseSetDef=IW});var c8=z((WP)=>{Object.defineProperty(WP,"__esModule",{value:!0});WP.parseTupleDef=void 0;var r8=z1();function RW(f,v){if(f.rest)return{type:"array",minItems:f.items.length,items:f.items.map((P,J)=>r8.parseDef(P._def,{...v,currentPath:[...v.currentPath,"items",`${J}`]})).reduce((P,J)=>J===void 0?P:[...P,J],[]),additionalItems:r8.parseDef(f.rest._def,{...v,currentPath:[...v.currentPath,"additionalItems"]})};else return{type:"array",minItems:f.items.length,maxItems:f.items.length,items:f.items.map((P,J)=>r8.parseDef(P._def,{...v,currentPath:[...v.currentPath,"items",`${J}`]})).reduce((P,J)=>J===void 0?P:[...P,J],[])}}WP.parseTupleDef=RW});var i8=z((DP)=>{Object.defineProperty(DP,"__esModule",{value:!0});DP.parseUndefinedDef=void 0;function EW(){return{not:{}}}DP.parseUndefinedDef=EW});var d8=z((VP)=>{Object.defineProperty(VP,"__esModule",{value:!0});VP.parseUnknownDef=void 0;function yW(){return{}}VP.parseUnknownDef=yW});var p8=z((KP)=>{Object.defineProperty(KP,"__esModule",{value:!0});KP.parseReadonlyDef=void 0;var zW=z1(),SW=(f,v)=>{return zW.parseDef(f.innerType._def,v)};KP.parseReadonlyDef=SW});var s8=z((BP)=>{Object.defineProperty(BP,"__esModule",{value:!0});BP.selectParser=void 0;var J1=kv(),UW=F8(),gW=h8(),jW=w8(),CW=I8(),ZW=_Q(),TW=R8(),bW=E8(),uW=y8(),lW=z8(),_W=S8(),kW=U8(),xW=g8(),mW=Z8(),nW=T8(),aW=b8(),rW=u8(),cW=l8(),iW=_8(),dW=k8(),pW=x8(),sW=m8(),tW=n8(),oW=pQ(),eW=a8(),vD=iQ(),fD=c8(),QD=i8(),PD=vP(),JD=d8(),YD=p8(),XD=(f,v,P)=>{switch(v){case J1.ZodFirstPartyTypeKind.ZodString:return vD.parseStringDef(f,P);case J1.ZodFirstPartyTypeKind.ZodNumber:return iW.parseNumberDef(f,P);case J1.ZodFirstPartyTypeKind.ZodObject:return dW.parseObjectDef(f,P);case J1.ZodFirstPartyTypeKind.ZodBigInt:return jW.parseBigintDef(f,P);case J1.ZodFirstPartyTypeKind.ZodBoolean:return CW.parseBooleanDef();case J1.ZodFirstPartyTypeKind.ZodDate:return bW.parseDateDef(f,P);case J1.ZodFirstPartyTypeKind.ZodUndefined:return QD.parseUndefinedDef();case J1.ZodFirstPartyTypeKind.ZodNull:return rW.parseNullDef(P);case J1.ZodFirstPartyTypeKind.ZodArray:return gW.parseArrayDef(f,P);case J1.ZodFirstPartyTypeKind.ZodUnion:case J1.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return PD.parseUnionDef(f,P);case J1.ZodFirstPartyTypeKind.ZodIntersection:return kW.parseIntersectionDef(f,P);case J1.ZodFirstPartyTypeKind.ZodTuple:return fD.parseTupleDef(f,P);case J1.ZodFirstPartyTypeKind.ZodRecord:return oW.parseRecordDef(f,P);case J1.ZodFirstPartyTypeKind.ZodLiteral:return xW.parseLiteralDef(f,P);case J1.ZodFirstPartyTypeKind.ZodEnum:return _W.parseEnumDef(f);case J1.ZodFirstPartyTypeKind.ZodNativeEnum:return nW.parseNativeEnumDef(f);case J1.ZodFirstPartyTypeKind.ZodNullable:return cW.parseNullableDef(f,P);case J1.ZodFirstPartyTypeKind.ZodOptional:return pW.parseOptionalDef(f,P);case J1.ZodFirstPartyTypeKind.ZodMap:return mW.parseMapDef(f,P);case J1.ZodFirstPartyTypeKind.ZodSet:return eW.parseSetDef(f,P);case J1.ZodFirstPartyTypeKind.ZodLazy:return()=>f.getter()._def;case J1.ZodFirstPartyTypeKind.ZodPromise:return tW.parsePromiseDef(f,P);case J1.ZodFirstPartyTypeKind.ZodNaN:case J1.ZodFirstPartyTypeKind.ZodNever:return aW.parseNeverDef();case J1.ZodFirstPartyTypeKind.ZodEffects:return lW.parseEffectsDef(f,P);case J1.ZodFirstPartyTypeKind.ZodAny:return UW.parseAnyDef();case J1.ZodFirstPartyTypeKind.ZodUnknown:return JD.parseUnknownDef();case J1.ZodFirstPartyTypeKind.ZodDefault:return uW.parseDefaultDef(f,P);case J1.ZodFirstPartyTypeKind.ZodBranded:return ZW.parseBrandedDef(f,P);case J1.ZodFirstPartyTypeKind.ZodReadonly:return YD.parseReadonlyDef(f,P);case J1.ZodFirstPartyTypeKind.ZodCatch:return TW.parseCatchDef(f,P);case J1.ZodFirstPartyTypeKind.ZodPipeline:return sW.parsePipelineDef(f,P);case J1.ZodFirstPartyTypeKind.ZodFunction:case J1.ZodFirstPartyTypeKind.ZodVoid:case J1.ZodFirstPartyTypeKind.ZodSymbol:return;default:return((J)=>{return})(v)}};BP.selectParser=XD});var z1=z(($P)=>{Object.defineProperty($P,"__esModule",{value:!0});$P.parseDef=void 0;var qD=gQ(),GD=s8();function u5(f,v,P=!1){let J=v.seen.get(f);if(v.override){let q=v.override?.(f,v,J,P);if(q!==qD.ignoreOverride)return q}if(J&&!P){let q=WD(J,v);if(q!==void 0)return q}let Q={def:f,path:v.currentPath,jsonSchema:void 0};v.seen.set(f,Q);let Y=GD.selectParser(f,f.typeName,v),X=typeof Y==="function"?u5(Y(),v):Y;if(X)VD(f,v,X);if(v.postProcess){let q=v.postProcess(X,f,v);return Q.jsonSchema=X,q}return Q.jsonSchema=X,X}$P.parseDef=u5;var WD=(f,v)=>{switch(v.$refStrategy){case"root":return{$ref:f.path.join("/")};case"relative":return{$ref:DD(v.currentPath,f.path)};case"none":case"seen":{if(f.path.length<v.currentPath.length&&f.path.every((P,J)=>v.currentPath[J]===P))return console.warn(`Recursive reference detected at ${v.currentPath.join("/")}! Defaulting to any`),{};return v.$refStrategy==="seen"?{}:void 0}}},DD=(f,v)=>{let P=0;for(;P<f.length&&P<v.length;P++)if(f[P]!==v[P])break;return[(f.length-P).toString(),...v.slice(P)].join("/")},VD=(f,v,P)=>{if(f.description){if(P.description=f.description,v.markdownDescription)P.markdownDescription=f.description}return P}});var _5=z((l5)=>{Object.defineProperty(l5,"__esModule",{value:!0})});var t8=z((OP)=>{Object.defineProperty(OP,"__esModule",{value:!0});OP.zodToJsonSchema=void 0;var k5=z1(),KD=A8(),BD=(f,v)=>{let P=KD.getRefs(v),J=typeof v==="object"&&v.definitions?Object.entries(v.definitions).reduce((G,[V,B])=>({...G,[V]:k5.parseDef(B._def,{...P,currentPath:[...P.basePath,P.definitionPath,V]},!0)??{}}),{}):void 0,Q=typeof v==="string"?v:v?.nameStrategy==="title"?void 0:v?.name,Y=k5.parseDef(f._def,Q===void 0?P:{...P,currentPath:[...P.basePath,P.definitionPath,Q]},!1)??{},X=typeof v==="object"&&v.name!==void 0&&v.nameStrategy==="title"?v.name:void 0;if(X!==void 0)Y.title=X;let q=Q===void 0?J?{...Y,[P.definitionPath]:J}:Y:{$ref:[...P.$refStrategy==="relative"?[]:P.basePath,P.definitionPath,Q].join("/"),[P.definitionPath]:{...J,[Q]:Y}};if(P.target==="jsonSchema7")q.$schema="http://json-schema.org/draft-07/schema#";else if(P.target==="jsonSchema2019-09"||P.target==="openAi")q.$schema="https://json-schema.org/draft/2019-09/schema#";if(P.target==="openAi"&&(("anyOf"in q)||("oneOf"in q)||("allOf"in q)||("type"in q)&&Array.isArray(q.type)))console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.");return q};OP.zodToJsonSchema=BD});var x5=z((d)=>{var $D=d&&d.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),P1=d&&d.__exportStar||function(f,v){for(var P in f)if(P!=="default"&&!Object.prototype.hasOwnProperty.call(v,P))$D(v,f,P)};Object.defineProperty(d,"__esModule",{value:!0});P1(gQ(),d);P1(A8(),d);P1(q0(),d);P1(z1(),d);P1(_5(),d);P1(F8(),d);P1(h8(),d);P1(w8(),d);P1(I8(),d);P1(_Q(),d);P1(R8(),d);P1(E8(),d);P1(y8(),d);P1(z8(),d);P1(S8(),d);P1(U8(),d);P1(g8(),d);P1(Z8(),d);P1(T8(),d);P1(b8(),d);P1(u8(),d);P1(l8(),d);P1(_8(),d);P1(k8(),d);P1(x8(),d);P1(m8(),d);P1(n8(),d);P1(p8(),d);P1(pQ(),d);P1(a8(),d);P1(iQ(),d);P1(c8(),d);P1(i8(),d);P1(vP(),d);P1(d8(),d);P1(s8(),d);P1(t8(),d);var OD=t8();d.default=OD.zodToJsonSchema});var m5=z((g0)=>{Object.defineProperty(g0,"__esModule",{value:!0});g0.Completable=g0.McpZodTypeKind=void 0;g0.completable=HD;var ND=kv(),o8;(function(f){f.Completable="McpCompletable"})(o8||(g0.McpZodTypeKind=o8={}));class mf extends ND.ZodType{_parse(f){let{ctx:v}=this._processInputParams(f),P=v.data;return this._def.type._parse({data:P,path:v.path,parent:v})}unwrap(){return this._def.type}}g0.Completable=mf;mf.create=(f,v)=>{return new mf({type:f,typeName:o8.Completable,complete:v.complete,...LD(v)})};function HD(f,v){return mf.create(f,{...f._def,complete:v})}function LD(f){if(!f)return{};let{errorMap:v,invalid_type_error:P,required_error:J,description:Q}=f;if(v&&(P||J))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(v)return{errorMap:v,description:Q};return{errorMap:(X,q)=>{var G,V;let{message:B}=f;if(X.code==="invalid_enum_value")return{message:B!==null&&B!==void 0?B:q.defaultError};if(typeof q.data==="undefined")return{message:(G=B!==null&&B!==void 0?B:J)!==null&&G!==void 0?G:q.defaultError};if(X.code!=="invalid_type")return{message:q.defaultError};return{message:(V=B!==null&&B!==void 0?B:P)!==null&&V!==void 0?V:q.defaultError}},description:Q}}});var r5=z((NP)=>{Object.defineProperty(NP,"__esModule",{value:!0});NP.UriTemplate=void 0;var n5=1e6,e8=1e6,a5=1e4,MD=1e6;class D0{static isTemplate(f){return/\{[^}\s]+\}/.test(f)}static validateLength(f,v,P){if(f.length>v)throw new Error(`${P} exceeds maximum length of ${v} characters (got ${f.length})`)}get variableNames(){return this.parts.flatMap((f)=>typeof f==="string"?[]:f.names)}constructor(f){D0.validateLength(f,n5,"Template"),this.template=f,this.parts=this.parse(f)}toString(){return this.template}parse(f){let v=[],P="",J=0,Q=0;while(J<f.length)if(f[J]==="{"){if(P)v.push(P),P="";let Y=f.indexOf("}",J);if(Y===-1)throw new Error("Unclosed template expression");if(Q++,Q>a5)throw new Error(`Template contains too many expressions (max ${a5})`);let X=f.slice(J+1,Y),q=this.getOperator(X),G=X.includes("*"),V=this.getNames(X),B=V[0];for(let O of V)D0.validateLength(O,e8,"Variable name");v.push({name:B,operator:q,names:V,exploded:G}),J=Y+1}else P+=f[J],J++;if(P)v.push(P);return v}getOperator(f){return["+","#",".","/","?","&"].find((P)=>f.startsWith(P))||""}getNames(f){let v=this.getOperator(f);return f.slice(v.length).split(",").map((P)=>P.replace("*","").trim()).filter((P)=>P.length>0)}encodeValue(f,v){if(D0.validateLength(f,e8,"Variable value"),v==="+"||v==="#")return encodeURI(f);return encodeURIComponent(f)}expandPart(f,v){if(f.operator==="?"||f.operator==="&"){let Y=f.names.map((q)=>{let G=v[q];if(G===void 0)return"";let V=Array.isArray(G)?G.map((B)=>this.encodeValue(B,f.operator)).join(","):this.encodeValue(G.toString(),f.operator);return`${q}=${V}`}).filter((q)=>q.length>0);if(Y.length===0)return"";return(f.operator==="?"?"?":"&")+Y.join("&")}if(f.names.length>1){let Y=f.names.map((X)=>v[X]).filter((X)=>X!==void 0);if(Y.length===0)return"";return Y.map((X)=>Array.isArray(X)?X[0]:X).join(",")}let P=v[f.name];if(P===void 0)return"";let Q=(Array.isArray(P)?P:[P]).map((Y)=>this.encodeValue(Y,f.operator));switch(f.operator){case"":return Q.join(",");case"+":return Q.join(",");case"#":return"#"+Q.join(",");case".":return"."+Q.join(".");case"/":return"/"+Q.join("/");default:return Q.join(",")}}expand(f){let v="",P=!1;for(let J of this.parts){if(typeof J==="string"){v+=J;continue}let Q=this.expandPart(J,f);if(!Q)continue;if((J.operator==="?"||J.operator==="&")&&P)v+=Q.replace("?","&");else v+=Q;if(J.operator==="?"||J.operator==="&")P=!0}return v}escapeRegExp(f){return f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}partToRegExp(f){let v=[];for(let Q of f.names)D0.validateLength(Q,e8,"Variable name");if(f.operator==="?"||f.operator==="&"){for(let Q=0;Q<f.names.length;Q++){let Y=f.names[Q],X=Q===0?"\\"+f.operator:"&";v.push({pattern:X+this.escapeRegExp(Y)+"=([^&]+)",name:Y})}return v}let P,J=f.name;switch(f.operator){case"":P=f.exploded?"([^/]+(?:,[^/]+)*)":"([^/,]+)";break;case"+":case"#":P="(.+)";break;case".":P="\\.([^/,]+)";break;case"/":P="/"+(f.exploded?"([^/]+(?:,[^/]+)*)":"([^/,]+)");break;default:P="([^/]+)"}return v.push({pattern:P,name:J}),v}match(f){D0.validateLength(f,n5,"URI");let v="^",P=[];for(let X of this.parts)if(typeof X==="string")v+=this.escapeRegExp(X);else{let q=this.partToRegExp(X);for(let{pattern:G,name:V}of q)v+=G,P.push({name:V,exploded:X.exploded})}v+="$",D0.validateLength(v,MD,"Generated regex pattern");let J=new RegExp(v),Q=f.match(J);if(!Q)return null;let Y={};for(let X=0;X<P.length;X++){let{name:q,exploded:G}=P[X],V=Q[X+1],B=q.replace("*","");if(G&&V.includes(","))Y[B]=V.split(",");else Y[B]=V}return Y}}NP.UriTemplate=D0});var t5=z((Wf)=>{Object.defineProperty(Wf,"__esModule",{value:!0});Wf.ResourceTemplate=Wf.McpServer=void 0;var AD=w5(),c5=x5(),nf=kv(),p=_f(),FD=m5(),hD=r5();class p5{constructor(f,v){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new AD.Server(f,v)}async connect(f){return await this.server.connect(f)}async close(){await this.server.close()}setToolRequestHandlers(){if(this._toolHandlersInitialized)return;this.server.assertCanSetRequestHandler(p.ListToolsRequestSchema.shape.method.value),this.server.assertCanSetRequestHandler(p.CallToolRequestSchema.shape.method.value),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(p.ListToolsRequestSchema,()=>({tools:Object.entries(this._registeredTools).filter(([,f])=>f.enabled).map(([f,v])=>{let P={name:f,title:v.title,description:v.description,inputSchema:v.inputSchema?c5.zodToJsonSchema(v.inputSchema,{strictUnions:!0}):wD,annotations:v.annotations};if(v.outputSchema)P.outputSchema=c5.zodToJsonSchema(v.outputSchema,{strictUnions:!0});return P})})),this.server.setRequestHandler(p.CallToolRequestSchema,async(f,v)=>{let P=this._registeredTools[f.params.name];if(!P)throw new p.McpError(p.ErrorCode.InvalidParams,`Tool ${f.params.name} not found`);if(!P.enabled)throw new p.McpError(p.ErrorCode.InvalidParams,`Tool ${f.params.name} disabled`);let J;if(P.inputSchema){let Q=await P.inputSchema.safeParseAsync(f.params.arguments);if(!Q.success)throw new p.McpError(p.ErrorCode.InvalidParams,`Invalid arguments for tool ${f.params.name}: ${Q.error.message}`);let Y=Q.data,X=P.callback;try{J=await Promise.resolve(X(Y,v))}catch(q){J={content:[{type:"text",text:q instanceof Error?q.message:String(q)}],isError:!0}}}else{let Q=P.callback;try{J=await Promise.resolve(Q(v))}catch(Y){J={content:[{type:"text",text:Y instanceof Error?Y.message:String(Y)}],isError:!0}}}if(P.outputSchema&&!J.isError){if(!J.structuredContent)throw new p.McpError(p.ErrorCode.InvalidParams,`Tool ${f.params.name} has an output schema but no structured content was provided`);let Q=await P.outputSchema.safeParseAsync(J.structuredContent);if(!Q.success)throw new p.McpError(p.ErrorCode.InvalidParams,`Invalid structured content for tool ${f.params.name}: ${Q.error.message}`)}return J}),this._toolHandlersInitialized=!0}setCompletionRequestHandler(){if(this._completionHandlerInitialized)return;this.server.assertCanSetRequestHandler(p.CompleteRequestSchema.shape.method.value),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(p.CompleteRequestSchema,async(f)=>{switch(f.params.ref.type){case"ref/prompt":return this.handlePromptCompletion(f,f.params.ref);case"ref/resource":return this.handleResourceCompletion(f,f.params.ref);default:throw new p.McpError(p.ErrorCode.InvalidParams,`Invalid completion reference: ${f.params.ref}`)}}),this._completionHandlerInitialized=!0}async handlePromptCompletion(f,v){let P=this._registeredPrompts[v.name];if(!P)throw new p.McpError(p.ErrorCode.InvalidParams,`Prompt ${v.name} not found`);if(!P.enabled)throw new p.McpError(p.ErrorCode.InvalidParams,`Prompt ${v.name} disabled`);if(!P.argsSchema)return HP;let J=P.argsSchema.shape[f.params.argument.name];if(!(J instanceof FD.Completable))return HP;let Y=await J._def.complete(f.params.argument.value,f.params.context);return d5(Y)}async handleResourceCompletion(f,v){let P=Object.values(this._registeredResourceTemplates).find((Y)=>Y.resourceTemplate.uriTemplate.toString()===v.uri);if(!P){if(this._registeredResources[v.uri])return HP;throw new p.McpError(p.ErrorCode.InvalidParams,`Resource template ${f.params.ref.uri} not found`)}let J=P.resourceTemplate.completeCallback(f.params.argument.name);if(!J)return HP;let Q=await J(f.params.argument.value,f.params.context);return d5(Q)}setResourceRequestHandlers(){if(this._resourceHandlersInitialized)return;this.server.assertCanSetRequestHandler(p.ListResourcesRequestSchema.shape.method.value),this.server.assertCanSetRequestHandler(p.ListResourceTemplatesRequestSchema.shape.method.value),this.server.assertCanSetRequestHandler(p.ReadResourceRequestSchema.shape.method.value),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(p.ListResourcesRequestSchema,async(f,v)=>{let P=Object.entries(this._registeredResources).filter(([Q,Y])=>Y.enabled).map(([Q,Y])=>({uri:Q,name:Y.name,...Y.metadata})),J=[];for(let Q of Object.values(this._registeredResourceTemplates)){if(!Q.resourceTemplate.listCallback)continue;let Y=await Q.resourceTemplate.listCallback(v);for(let X of Y.resources)J.push({...Q.metadata,...X})}return{resources:[...P,...J]}}),this.server.setRequestHandler(p.ListResourceTemplatesRequestSchema,async()=>{return{resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([v,P])=>({name:v,uriTemplate:P.resourceTemplate.uriTemplate.toString(),...P.metadata}))}}),this.server.setRequestHandler(p.ReadResourceRequestSchema,async(f,v)=>{let P=new URL(f.params.uri),J=this._registeredResources[P.toString()];if(J){if(!J.enabled)throw new p.McpError(p.ErrorCode.InvalidParams,`Resource ${P} disabled`);return J.readCallback(P,v)}for(let Q of Object.values(this._registeredResourceTemplates)){let Y=Q.resourceTemplate.uriTemplate.match(P.toString());if(Y)return Q.readCallback(P,Y,v)}throw new p.McpError(p.ErrorCode.InvalidParams,`Resource ${P} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0}setPromptRequestHandlers(){if(this._promptHandlersInitialized)return;this.server.assertCanSetRequestHandler(p.ListPromptsRequestSchema.shape.method.value),this.server.assertCanSetRequestHandler(p.GetPromptRequestSchema.shape.method.value),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(p.ListPromptsRequestSchema,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,f])=>f.enabled).map(([f,v])=>{return{name:f,title:v.title,description:v.description,arguments:v.argsSchema?RD(v.argsSchema):void 0}})})),this.server.setRequestHandler(p.GetPromptRequestSchema,async(f,v)=>{let P=this._registeredPrompts[f.params.name];if(!P)throw new p.McpError(p.ErrorCode.InvalidParams,`Prompt ${f.params.name} not found`);if(!P.enabled)throw new p.McpError(p.ErrorCode.InvalidParams,`Prompt ${f.params.name} disabled`);if(P.argsSchema){let J=await P.argsSchema.safeParseAsync(f.params.arguments);if(!J.success)throw new p.McpError(p.ErrorCode.InvalidParams,`Invalid arguments for prompt ${f.params.name}: ${J.error.message}`);let Q=J.data,Y=P.callback;return await Promise.resolve(Y(Q,v))}else{let J=P.callback;return await Promise.resolve(J(v))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0}resource(f,v,...P){let J;if(typeof P[0]==="object")J=P.shift();let Q=P[0];if(typeof v==="string"){if(this._registeredResources[v])throw new Error(`Resource ${v} is already registered`);let Y=this._createRegisteredResource(f,void 0,v,J,Q);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),Y}else{if(this._registeredResourceTemplates[f])throw new Error(`Resource template ${f} is already registered`);let Y=this._createRegisteredResourceTemplate(f,void 0,v,J,Q);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),Y}}registerResource(f,v,P,J){if(typeof v==="string"){if(this._registeredResources[v])throw new Error(`Resource ${v} is already registered`);let Q=this._createRegisteredResource(f,P.title,v,P,J);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),Q}else{if(this._registeredResourceTemplates[f])throw new Error(`Resource template ${f} is already registered`);let Q=this._createRegisteredResourceTemplate(f,P.title,v,P,J);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),Q}}_createRegisteredResource(f,v,P,J,Q){let Y={name:f,title:v,metadata:J,readCallback:Q,enabled:!0,disable:()=>Y.update({enabled:!1}),enable:()=>Y.update({enabled:!0}),remove:()=>Y.update({uri:null}),update:(X)=>{if(typeof X.uri!=="undefined"&&X.uri!==P){if(delete this._registeredResources[P],X.uri)this._registeredResources[X.uri]=Y}if(typeof X.name!=="undefined")Y.name=X.name;if(typeof X.title!=="undefined")Y.title=X.title;if(typeof X.metadata!=="undefined")Y.metadata=X.metadata;if(typeof X.callback!=="undefined")Y.readCallback=X.callback;if(typeof X.enabled!=="undefined")Y.enabled=X.enabled;this.sendResourceListChanged()}};return this._registeredResources[P]=Y,Y}_createRegisteredResourceTemplate(f,v,P,J,Q){let Y={resourceTemplate:P,title:v,metadata:J,readCallback:Q,enabled:!0,disable:()=>Y.update({enabled:!1}),enable:()=>Y.update({enabled:!0}),remove:()=>Y.update({name:null}),update:(X)=>{if(typeof X.name!=="undefined"&&X.name!==f){if(delete this._registeredResourceTemplates[f],X.name)this._registeredResourceTemplates[X.name]=Y}if(typeof X.title!=="undefined")Y.title=X.title;if(typeof X.template!=="undefined")Y.resourceTemplate=X.template;if(typeof X.metadata!=="undefined")Y.metadata=X.metadata;if(typeof X.callback!=="undefined")Y.readCallback=X.callback;if(typeof X.enabled!=="undefined")Y.enabled=X.enabled;this.sendResourceListChanged()}};return this._registeredResourceTemplates[f]=Y,Y}_createRegisteredPrompt(f,v,P,J,Q){let Y={title:v,description:P,argsSchema:J===void 0?void 0:nf.z.object(J),callback:Q,enabled:!0,disable:()=>Y.update({enabled:!1}),enable:()=>Y.update({enabled:!0}),remove:()=>Y.update({name:null}),update:(X)=>{if(typeof X.name!=="undefined"&&X.name!==f){if(delete this._registeredPrompts[f],X.name)this._registeredPrompts[X.name]=Y}if(typeof X.title!=="undefined")Y.title=X.title;if(typeof X.description!=="undefined")Y.description=X.description;if(typeof X.argsSchema!=="undefined")Y.argsSchema=nf.z.object(X.argsSchema);if(typeof X.callback!=="undefined")Y.callback=X.callback;if(typeof X.enabled!=="undefined")Y.enabled=X.enabled;this.sendPromptListChanged()}};return this._registeredPrompts[f]=Y,Y}_createRegisteredTool(f,v,P,J,Q,Y,X){let q={title:v,description:P,inputSchema:J===void 0?void 0:nf.z.object(J),outputSchema:Q===void 0?void 0:nf.z.object(Q),annotations:Y,callback:X,enabled:!0,disable:()=>q.update({enabled:!1}),enable:()=>q.update({enabled:!0}),remove:()=>q.update({name:null}),update:(G)=>{if(typeof G.name!=="undefined"&&G.name!==f){if(delete this._registeredTools[f],G.name)this._registeredTools[G.name]=q}if(typeof G.title!=="undefined")q.title=G.title;if(typeof G.description!=="undefined")q.description=G.description;if(typeof G.paramsSchema!=="undefined")q.inputSchema=nf.z.object(G.paramsSchema);if(typeof G.callback!=="undefined")q.callback=G.callback;if(typeof G.annotations!=="undefined")q.annotations=G.annotations;if(typeof G.enabled!=="undefined")q.enabled=G.enabled;this.sendToolListChanged()}};return this._registeredTools[f]=q,this.setToolRequestHandlers(),this.sendToolListChanged(),q}tool(f,...v){if(this._registeredTools[f])throw new Error(`Tool ${f} is already registered`);let P,J,Q,Y;if(typeof v[0]==="string")P=v.shift();if(v.length>1){let q=v[0];if(i5(q)){if(J=v.shift(),v.length>1&&typeof v[0]==="object"&&v[0]!==null&&!i5(v[0]))Y=v.shift()}else if(typeof q==="object"&&q!==null)Y=v.shift()}let X=v[0];return this._createRegisteredTool(f,void 0,P,J,Q,Y,X)}registerTool(f,v,P){if(this._registeredTools[f])throw new Error(`Tool ${f} is already registered`);let{title:J,description:Q,inputSchema:Y,outputSchema:X,annotations:q}=v;return this._createRegisteredTool(f,J,Q,Y,X,q,P)}prompt(f,...v){if(this._registeredPrompts[f])throw new Error(`Prompt ${f} is already registered`);let P;if(typeof v[0]==="string")P=v.shift();let J;if(v.length>1)J=v.shift();let Q=v[0],Y=this._createRegisteredPrompt(f,void 0,P,J,Q);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),Y}registerPrompt(f,v,P){if(this._registeredPrompts[f])throw new Error(`Prompt ${f} is already registered`);let{title:J,description:Q,argsSchema:Y}=v,X=this._createRegisteredPrompt(f,J,Q,Y,P);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),X}isConnected(){return this.server.transport!==void 0}sendResourceListChanged(){if(this.isConnected())this.server.sendResourceListChanged()}sendToolListChanged(){if(this.isConnected())this.server.sendToolListChanged()}sendPromptListChanged(){if(this.isConnected())this.server.sendPromptListChanged()}}Wf.McpServer=p5;class s5{constructor(f,v){this._callbacks=v,this._uriTemplate=typeof f==="string"?new hD.UriTemplate(f):f}get uriTemplate(){return this._uriTemplate}get listCallback(){return this._callbacks.list}completeCallback(f){var v;return(v=this._callbacks.complete)===null||v===void 0?void 0:v[f]}}Wf.ResourceTemplate=s5;var wD={type:"object",properties:{}};function i5(f){if(typeof f!=="object"||f===null)return!1;return Object.keys(f).length===0||Object.values(f).some(ID)}function ID(f){return f!==null&&typeof f==="object"&&"parse"in f&&typeof f.parse==="function"&&"safeParse"in f&&typeof f.safeParse==="function"}function RD(f){return Object.entries(f.shape).map(([v,P])=>({name:v,description:P.description,required:!P.isOptional()}))}function d5(f){return{completion:{values:f.slice(0,100),total:f.length,hasMore:f.length>100}}}var HP={completion:{values:[],hasMore:!1}}});var o5=z((vJ)=>{Object.defineProperty(vJ,"__esModule",{value:!0});vJ.convertPosixPathToWindowsPath=yD;var ED=require("node:child_process");function yD(f){let v=f;if(f.startsWith("file://"))v=f.substring(7);if(!v.startsWith("/")||/^\/[a-zA-Z]:/.test(v))return f;try{return ED.execFileSync("wsl.exe",["-e","wslpath","-w",v],{encoding:"utf8",stdio:["pipe","pipe","ignore"]}).trim()}catch{return f}}});var e5=z((xv)=>{var zD=xv&&xv.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),SD=xv&&xv.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),UD=xv&&xv.__importStar||function(){var f=function(v){return f=Object.getOwnPropertyNames||function(P){var J=[];for(var Q in P)if(Object.prototype.hasOwnProperty.call(P,Q))J[J.length]=Q;return J},f(v)};return function(v){if(v&&v.__esModule)return v;var P={};if(v!=null){for(var J=f(v),Q=0;Q<J.length;Q++)if(J[Q]!=="default")zD(P,v,J[Q])}return SD(P,v),P}}();Object.defineProperty(xv,"__esModule",{value:!0});xv.createVscodeUri=jD;var fJ=UD(require("vscode")),gD=o5();function jD(f){if(process.platform==="win32"){let v=gD.convertPosixPathToWindowsPath(f);return v.startsWith("file://")?fJ.Uri.parse(v):fJ.Uri.file(v)}else return fJ.Uri.parse(f)}});var QJ=z((i1)=>{var CD=i1&&i1.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),ZD=i1&&i1.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),TD=i1&&i1.__importStar||function(){var f=function(v){return f=Object.getOwnPropertyNames||function(P){var J=[];for(var Q in P)if(Object.prototype.hasOwnProperty.call(P,Q))J[J.length]=Q;return J},f(v)};return function(v){if(v&&v.__esModule)return v;var P={};if(v!=null){for(var J=f(v),Q=0;Q<J.length;Q++)if(J[Q]!=="default")CD(P,v,J[Q])}return ZD(P,v),P}}();Object.defineProperty(i1,"__esModule",{value:!0});i1.DiagnosticSubscriptionManager=i1.DiagnosticStreamManager=void 0;i1.transformVsCodeDiagnostics=vY;i1.getDiagnostics=uD;var LP=TD(require("vscode")),bD=e5();function vY(f){return f.map((v)=>({message:v.message,severity:LP.DiagnosticSeverity[v.severity],range:{start:{line:v.range.start.line,character:v.range.start.character},end:{line:v.range.end.line,character:v.range.end.character}},source:v.source,code:v.code?.toString()}))}function uD(f){return(f?(()=>{let J=bD.createVscodeUri(f);return[[J,LP.languages.getDiagnostics(J)]]})():LP.languages.getDiagnostics()).map(([J,Q])=>({uri:J.toString(!0),diagnostics:vY(Q)}))}class j0{static instance;listener;clients;clientCounter;output;constructor(f){this.clients=new Map,this.clientCounter=0,this.output=f}static getInstance(f){if(!j0.instance)j0.instance=new j0(f);return j0.instance}registerClient(f){let v=`client_${this.clientCounter++}`;return this.clients.set(v,f),this.startStreaming(),v}unregisterClient(f){if(this.clients.delete(f)){if(this.output.info(`[DiagnosticStreamManager] Unregistered client ${f}. Total clients: ${this.clients.size}`),this.clients.size===0)this.stopStreaming()}}startStreaming(){if(!this.listener)this.listener=LP.languages.onDidChangeDiagnostics((f)=>{this.notifyDiagnosticsChanged(f.uris)}),this.output.info("[DiagnosticStreamManager] Started streaming diagnostics")}stopStreaming(){if(this.listener)this.listener.dispose(),this.listener=void 0,this.output.info("[DiagnosticStreamManager] Stopped streaming diagnostics")}notifyDiagnosticsChanged(f){if(this.clients.size===0)return;let v=f.map((P)=>P.toString());this.output.info(`[DiagnosticStreamManager] Notifying ${this.clients.size} clients about diagnostics change for ${f.length} files`),this.clients.forEach((P,J)=>{try{P(v)}catch(Q){this.output.error(`[DiagnosticStreamManager] Error notifying client ${J}: ${Q}`)}})}dispose(){this.clients.clear(),this.stopStreaming()}}i1.DiagnosticStreamManager=j0;i1.DiagnosticSubscriptionManager=j0});var QY=z((m1)=>{var lD=m1&&m1.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),_D=m1&&m1.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),fY=m1&&m1.__importStar||function(){var f=function(v){return f=Object.getOwnPropertyNames||function(P){var J=[];for(var Q in P)if(Object.prototype.hasOwnProperty.call(P,Q))J[J.length]=Q;return J},f(v)};return function(v){if(v&&v.__esModule)return v;var P={};if(v!=null){for(var J=f(v),Q=0;Q<J.length;Q++)if(J[Q]!=="default")lD(P,v,J[Q])}return _D(P,v),P}}();Object.defineProperty(m1,"__esModule",{value:!0});m1.handleGetDiagnostics=xD;m1.handleOpenFile=mD;m1.handleGetOpenEditors=nD;m1.handleGetCurrentSelection=aD;m1.handleGetWorkspaceFolders=rD;m1.handleCheckDocumentDirty=cD;m1.handleSaveDocument=iD;var v1=fY(require("vscode")),Df=fY(require("path")),kD=QJ();async function xD(f={}){try{let v=kD.getDiagnostics(f.uri);return{content:[{type:"text",text:JSON.stringify(v,null,2)}]}}catch(v){throw console.error("Error getting diagnostics through MCP:",v),v}}async function mD({filePath:f,preview:v,startText:P,endText:J,selectToEndOfLine:Q,makeFrontmost:Y=!0}){try{if(!f)throw new Error("File path is required");let X;if(!Df.isAbsolute(f)&&v1.workspace.workspaceFolders&&v1.workspace.workspaceFolders.length>0){let q=v1.workspace.workspaceFolders[0].uri.fsPath,G=Df.join(q,f);X=v1.Uri.file(G),console.log(`Converted relative path '${f}' to absolute: '${G}'`)}else X=v1.Uri.file(f);try{await v1.workspace.fs.stat(X);let q=await v1.workspace.openTextDocument(X),G=v1.window.visibleTextEditors.some((O)=>O.document.uri.toString()===X.toString()),V;if(Y||!G)V=await v1.window.showTextDocument(q,{preview:v,preserveFocus:!Y});else V=v1.window.visibleTextEditors.find((O)=>O.document.uri.toString()===X.toString());if(P&&V){let O=q.getText(),L={success:!0,filePath:X.fsPath,message:`Opened file: ${X.fsPath}`},K=O.indexOf(P);if(K!==-1){let N=q.positionAt(K),M;if(J){let I=O.substring(K+P.length).indexOf(J);if(I!==-1){let S=K+P.length+I+J.length;if(M=q.positionAt(S),Q)M=new v1.Position(M.line,Number.MAX_SAFE_INTEGER);V.selection=new v1.Selection(N,M),V.revealRange(new v1.Range(N,M),v1.TextEditorRevealType.InCenter),L.message=`Opened file and selected text from "${P}" to "${J}"`}else V.selection=new v1.Selection(N,N),V.revealRange(new v1.Range(N,N),v1.TextEditorRevealType.InCenter),L.message=`Opened file and positioned at "${P}" (end text "${J}" not found)`}else M=q.positionAt(K+P.length),V.selection=new v1.Selection(N,M),V.revealRange(new v1.Range(N,M),v1.TextEditorRevealType.InCenter),L.message=`Opened file and selected text "${P}"`}else L.message=`Opened file, but text "${P}" not found`;return{content:[{type:"text",text:L.message}]}}let B={success:!0,filePath:X.fsPath,fileUrl:q.uri.toString(),message:`Opened file: ${X.fsPath}`};if(!Y)B.languageId=q.languageId,B.lineCount=q.lineCount,B.isDirty=q.isDirty,B.isUntitled=q.isUntitled,B.isClosed=q.isClosed;return{content:[{type:"text",text:Y?B.message:JSON.stringify(B,null,2)}]}}catch(q){throw new Error(`File not found: ${X.fsPath}`)}}catch(X){throw console.error("Error opening file through MCP:",X),X}}async function nD(){try{let f=v1.window.activeTextEditor,v=[];for(let J of v1.window.tabGroups.all)for(let Q of J.tabs)if(Q.input instanceof v1.TabInputText){let Y=Q.input.uri,X=v1.workspace.textDocuments.find((G)=>G.uri.toString()===Y.toString()),q={uri:Y.toString(),isActive:Q.isActive,isPinned:Q.isPinned,isPreview:Q.isPreview,isDirty:Q.isDirty,label:Q.label,groupIndex:J.viewColumn?J.viewColumn-1:0,viewColumn:J.viewColumn,isGroupActive:J.isActive};if(X){if(q.fileName=X.fileName,q.languageId=X.languageId,q.lineCount=X.lineCount,q.isUntitled=X.isUntitled,f&&f.document.uri.toString()===Y.toString())q.selection={start:{line:f.selection.start.line,character:f.selection.start.character},end:{line:f.selection.end.line,character:f.selection.end.character},isReversed:f.selection.isReversed}}v.push(q)}return{content:[{type:"text",text:JSON.stringify({tabs:v},null,2)}]}}catch(f){throw console.error("Error getting open editors through MCP:",f),f}}async function aD(){try{let f=v1.window.activeTextEditor;if(!f)return{content:[{type:"text",text:JSON.stringify({success:!1,message:"No active editor found"},null,2)}]};let{selection:v,document:P}=f,J=P.getText(v),Q=P.uri.fsPath;return{content:[{type:"text",text:JSON.stringify({success:!0,text:J,filePath:Q,fileUrl:P.uri.toString(),selection:{start:{line:v.start.line,character:v.start.character},end:{line:v.end.line,character:v.end.character},isEmpty:v.isEmpty}},null,2)}]}}catch(f){throw console.error("Error getting current selection through MCP:",f),f}}async function rD(){try{let v=(v1.workspace.workspaceFolders||[]).map((P)=>({name:P.name,uri:P.uri.toString(),path:P.uri.fsPath,index:P.index}));return{content:[{type:"text",text:JSON.stringify({success:!0,folders:v,rootPath:v1.workspace.rootPath||null,workspaceFile:v1.workspace.workspaceFile?.toString()||null},null,2)}]}}catch(f){throw console.error("Error getting workspace folders through MCP:",f),f}}async function cD({filePath:f}){try{if(!f)throw new Error("File path is required");let v;if(!Df.isAbsolute(f)&&v1.workspace.workspaceFolders&&v1.workspace.workspaceFolders.length>0){let J=v1.workspace.workspaceFolders[0].uri.fsPath,Q=Df.join(J,f);v=v1.Uri.file(Q),console.log(`Converted relative path '${f}' to absolute: '${Q}'`)}else v=v1.Uri.file(f);let P=v1.workspace.textDocuments.find((J)=>J.uri.toString()===v.toString());if(!P)return{content:[{type:"text",text:JSON.stringify({success:!1,message:`Document not open: ${v.fsPath}`},null,2)}]};return{content:[{type:"text",text:JSON.stringify({success:!0,filePath:v.fsPath,isDirty:P.isDirty,isUntitled:P.isUntitled},null,2)}]}}catch(v){throw console.error("Error checking document dirty state through MCP:",v),v}}async function iD({filePath:f}){try{if(!f)throw new Error("File path is required");let v;if(!Df.isAbsolute(f)&&v1.workspace.workspaceFolders&&v1.workspace.workspaceFolders.length>0){let Q=v1.workspace.workspaceFolders[0].uri.fsPath,Y=Df.join(Q,f);v=v1.Uri.file(Y),console.log(`Converted relative path '${f}' to absolute: '${Y}'`)}else v=v1.Uri.file(f);let P=v1.workspace.textDocuments.find((Q)=>Q.uri.toString()===v.toString());if(!P)return{content:[{type:"text",text:JSON.stringify({success:!1,message:`Document not open: ${v.fsPath}`},null,2)}]};let J=await P.save();return{content:[{type:"text",text:JSON.stringify({success:!0,filePath:v.fsPath,saved:J,message:J?"Document saved successfully":"Document was not dirty or save failed"},null,2)}]}}catch(v){throw console.error("Error saving document through MCP:",v),v}}});var PY=z((mv)=>{var dD=mv&&mv.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),pD=mv&&mv.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),sD=mv&&mv.__importStar||function(){var f=function(v){return f=Object.getOwnPropertyNames||function(P){var J=[];for(var Q in P)if(Object.prototype.hasOwnProperty.call(P,Q))J[J.length]=Q;return J},f(v)};return function(v){if(v&&v.__esModule)return v;var P={};if(v!=null){for(var J=f(v),Q=0;Q<J.length;Q++)if(J[Q]!=="default")dD(P,v,J[Q])}return pD(P,v),P}}();Object.defineProperty(mv,"__esModule",{value:!0});mv.handleExecuteCode=oD;var Dv=sD(require("vscode")),PJ;async function tD(){if(!PJ){let f=Dv.extensions.getExtension("ms-toolsai.jupyter");if(!f)throw new Error("Jupyter extension not installed");PJ=Promise.resolve(f.activate())}return PJ}function Vf(f,v){return f.error(v),{content:[{type:"text",text:v}]}}async function oD(f,v){let P=Dv.window.activeNotebookEditor;if(!P)return Vf(f,"No active notebook editor found.");let J;try{J=await tD()}catch(X){return Vf(f,"Unable to request Jupyter extension API. It is either not installed or not activated.")}let Q=await J.kernels.getKernel(P.notebook.uri);if(!Q)return Vf(f,"No kernel found for the active notebook. Please connect to a kernel.");if(Q.language!=="python")return Vf(f,`Kernel language is ${Q?.language}, not python.`);let Y={content:[]};try{f.info(`Executing ${v}`);let X=new TextDecoder,q=await vV(v,P.notebook),G=P.notebook.getCells().find((O)=>O.metadata.id===q);if(!G)return Vf(f,"No cell found in the notebook.");let V=P.notebook.getCells().indexOf(G);if(P.revealRange(new Dv.NotebookRange(V,V+1),Dv.NotebookEditorRevealType.InCenter),!await eD(f))return Vf(f,"Code execution cancelled by user. Ask the user how they would like to proceed.");await Dv.commands.executeCommand("notebook.cell.execute",{ranges:[{start:V,end:V+1}],document:P.notebook.uri});for(let O of G.outputs)for(let L of O.items)if(L.mime===fV){let K=JSON.parse(X.decode(L.data));f.appendLine(`Error executing code ${K.name}: ${K.message},/n ${K.stack}`),Y.content.push({type:"text",text:`Error: ${K.name}: ${K.message},/n ${K.stack}`})}else if(L.mime===QV){let K=Buffer.from(L.data).toString("base64");Y.content.push({type:"image",data:K,mimeType:L.mime})}else Y.content.push({type:"text",text:X.decode(L.data)});f.info("Code execution completed")}catch(X){f.error(`Code execution failed with an error '${X}'`)}return Y}async function eD(f){return(await Dv.window.showQuickPick([{label:"Execute",description:"Run the code in the notebook"},{label:"Cancel",description:"Do not execute the code"}],{title:"Claude Code Execution",placeHolder:"Choose whether to execute the code"}))?.label==="Execute"}async function vV(f,v){let P=new Dv.NotebookCellData(Dv.NotebookCellKind.Code,f,"python"),J=Math.random().toString(36).substring(2,15);P.metadata={id:J};let Q=v.getCells().length,Y=Dv.NotebookEdit.insertCells(Q,[P]),X=new Dv.WorkspaceEdit;return X.set(v.uri,[Y]),await Dv.workspace.applyEdit(X),J}var fV=Dv.NotebookCellOutputItem.error(new Error("")).mime,QV="image/png"});var qY=z((d1)=>{var PV=d1&&d1.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),JV=d1&&d1.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),af=d1&&d1.__importStar||function(){var f=function(v){return f=Object.getOwnPropertyNames||function(P){var J=[];for(var Q in P)if(Object.prototype.hasOwnProperty.call(P,Q))J[J.length]=Q;return J},f(v)};return function(v){if(v&&v.__esModule)return v;var P={};if(v!=null){for(var J=f(v),Q=0;Q<J.length;Q++)if(J[Q]!=="default")PV(P,v,J[Q])}return JV(P,v),P}}();Object.defineProperty(d1,"__esModule",{value:!0});d1.getRandomPort=YY;d1.ensureLockFileDirectory=YJ;d1.createLockFile=qV;d1.deleteLockFile=GV;d1.isPortAvailable=XY;d1.findAvailablePort=WV;var JY=af(require("vscode")),Kf=af(require("fs")),JJ=af(require("path")),YV=af(require("os")),XV=af(require("http"));function YY(){return Math.floor(Math.random()*55536)+1e4}function YJ(){let f=JJ.join(YV.homedir(),".claude","ide");if(!Kf.existsSync(f))Kf.mkdirSync(f,{recursive:!0});return f}function qV(f,v){let P=YJ(),J=JJ.join(P,`${f}.lock`),Q=Kf.existsSync(J),Y=JY.workspace.workspaceFolders?.map((q)=>q.uri.fsPath)||[],X={pid:process.ppid,workspaceFolders:Y,ideName:JY.env.appName,transport:"ws",runningInWindows:process.platform==="win32",authToken:v};if(Kf.writeFileSync(J,JSON.stringify(X)),Q)console.log(`Updated lock file with new workspace folders: ${J}`);return J}function GV(f){let v=YJ(),P=JJ.join(v,`${f}.lock`);if(Kf.existsSync(P))try{Kf.unlinkSync(P)}catch(J){console.error(`Failed to delete lock file ${P}:`,J)}}function XY(f){return new Promise((v)=>{let P=XV.createServer();P.once("error",()=>{v(!1)}),P.once("listening",()=>{P.close(),v(!0)}),P.listen(f)})}async function WV(){for(let f=0;f<50;f++){let v=YY();if(await XY(v))return v}throw new Error("Failed to find an available port after multiple attempts")}});var GY=z((e1)=>{var DV=e1&&e1.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),VV=e1&&e1.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),KV=e1&&e1.__importStar||function(){var f=function(v){return f=Object.getOwnPropertyNames||function(P){var J=[];for(var Q in P)if(Object.prototype.hasOwnProperty.call(P,Q))J[J.length]=Q;return J},f(v)};return function(v){if(v&&v.__esModule)return v;var P={};if(v!=null){for(var J=f(v),Q=0;Q<J.length;Q++)if(J[Q]!=="default")DV(P,v,J[Q])}return VV(P,v),P}}();Object.defineProperty(e1,"__esModule",{value:!0});e1.findRunningClaudeProcesses=BV;e1.getProcessTree=$V;e1.getDirectChildren=OV;e1.getProcessCommand=NV;e1.isShellCommand=HV;var nv=KV(require("node:child_process"));async function BV(){return new Promise(async(f)=>{try{let v=process.platform==="win32"?nv.spawn("powershell.exe",["-NoProfile","-Command",`Get-CimInstance Win32_Process | Where-Object { $_.CommandLine -match '(node.*bin/claude|/claude|\\$claude)(\\$| )' -and $_.CommandLine -notmatch 'grep' } | ForEach-Object { "$($_.ProcessId) $($_.ParentProcessId)" }`]):nv.spawn("bash",["-c",'ps -eo pid,ppid,command | grep -E "(node.*bin/claude|/claude|$claude)($| )" | grep -v "grep" || echo "no_claude_found"']),P="";v.stdout.on("data",(J)=>{P+=J.toString()}),v.on("close",()=>{if(P.includes("no_claude_found")||P.trim()===""){console.log("No Claude processes found running"),f([]);return}let J=[];if(process.platform==="win32")J=P.trim().split(/\r?\n/).filter((Q)=>Q.trim()).map((Q)=>{let Y=Q.trim().split(/\s+/);return{pid:Y[0],ppid:Y[1]}});else J=P.trim().split(/\r?\n/).map((Q)=>{let Y=Q.trim().split(/\s+/);return{pid:Y[0],ppid:Y[1]}});console.log(`Found ${J.length} Claude processes running`),f(J)}),v.on("error",(J)=>{console.error(`Error checking for Claude processes: ${J}`),f([])})}catch(v){console.error(`Error in process check: ${v}`),f([])}})}async function $V(f){let v="",P=process.platform==="win32"?nv.spawn("powershell.exe",["-NoProfile","-Command",`$p=${f};while($p -gt 0){$p;$p=(Get-CimInstance Win32_Process -Filter "ProcessId=$p").ParentProcessId}`]):nv.spawn("bash",["-c",`pid=${f}; while [ "$pid" -ne 0 ]; do echo $pid; pid=$(ps -o ppid= -p $pid 2>/dev/null | tr -d ' '); [ -z "$pid" ] && break; done`]);return P.stdout.on("data",(J)=>{v+=J.toString()}),new Promise((J)=>{P.on("close",()=>{let Q=v.trim().split(/\r?\n/).map((Y)=>Y.trim()).filter((Y)=>Y.length>0);J(Q)}),P.on("error",(Q)=>{console.error(`Error getting process tree: ${Q}`),J([])})})}async function OV(f){return new Promise(async(v)=>{try{let P=process.platform==="win32"?nv.spawn("powershell.exe",["-NoProfile","-Command",`(Get-CimInstance Win32_Process -Filter "ParentProcessId=${f}").ProcessId`]):process.platform==="darwin"?nv.spawn("bash",["-c",`ps -eo pid,ppid | awk '$2 == ${f} {print $1}'`]):nv.spawn("bash",["-c",`ps -o pid= --ppid ${f}`]),J="";P.stdout.on("data",(Q)=>{J+=Q.toString()}),P.on("close",()=>{let Q=J.trim().split(/\r?\n/).map((Y)=>Y.trim()).filter((Y)=>Y.length>0);v(Q)}),P.on("error",(Q)=>{console.error(`Error finding children: ${Q}`),v([])})}catch(P){console.error(`Error checking for child processes: ${P}`),v([])}})}async function NV(f){return new Promise((v)=>{try{let P=process.platform==="win32"?nv.spawn("powershell.exe",["-NoProfile","-Command",`(Get-CimInstance Win32_Process -Filter "ProcessId=${f}").CommandLine`]):nv.spawn("bash",["-c",`ps -p ${f} -o command=`]),J="";P.stdout.on("data",(Q)=>{J+=Q.toString()}),P.on("close",()=>{v(J.trim())}),P.on("error",(Q)=>{console.error(`Error getting process command: ${Q}`),v("")})}catch(P){console.error(`Error checking process command: ${P}`),v("")}})}function HV(f){return f.includes("bash")||f.includes("sh")||f.includes("zsh")||f.includes("cmd.exe")||f.includes("powershell")}});var rf=z((zv)=>{var LV=zv&&zv.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),MV=zv&&zv.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),AV=zv&&zv.__importStar||function(){var f=function(v){return f=Object.getOwnPropertyNames||function(P){var J=[];for(var Q in P)if(Object.prototype.hasOwnProperty.call(P,Q))J[J.length]=Q;return J},f(v)};return function(v){if(v&&v.__esModule)return v;var P={};if(v!=null){for(var J=f(v),Q=0;Q<J.length;Q++)if(J[Q]!=="default")LV(P,v,J[Q])}return MV(P,v),P}}();Object.defineProperty(zv,"__esModule",{value:!0});zv.isClaudeRunningInTerminal=hV;zv.focusTerminal=wV;var FV=AV(require("vscode")),C0=GY();async function hV(f,v){let P={claudeRunning:!1,terminalProcessTree:[],runningClaudeProcesses:[],isChildOfThisTerminal:!1};try{let J=await v.processId;if(!J)return f.info("Could not get terminal process ID"),P;P.runningClaudeProcesses=await C0.findRunningClaudeProcesses();let Q=P.runningClaudeProcesses.length>0;P.terminalProcessTree=await C0.getProcessTree(J);let Y=await C0.getDirectChildren(J);for(let X of P.runningClaudeProcesses){if(X.ppid===J.toString()){P.isChildOfThisTerminal=!0;break}if(Y.includes(X.ppid)){P.isChildOfThisTerminal=!0;break}let q=X.ppid;if(q===J.toString()){P.isChildOfThisTerminal=!0;break}if(J.toString()===q){P.isChildOfThisTerminal=!0;break}try{let G=await C0.getProcessCommand(q);if(C0.isShellCommand(G)){if(v.name!=="Claude Code")if(J.toString()===q)P.isChildOfThisTerminal=!0;else{let V=await C0.getProcessCommand(J.toString());if(C0.isShellCommand(V)&&v.name!=="Claude Code")P.isChildOfThisTerminal=!0}}}catch(G){f.error(`Error checking Claude's parent process: ${G}`)}if(P.isChildOfThisTerminal)break}if(!P.isChildOfThisTerminal&&v.name==="Claude Code")return P.claudeRunning=!1,P;if(Q&&P.isChildOfThisTerminal)P.claudeRunning=!0;else P.claudeRunning=!1;return P}catch(J){return f.error("Error checking if Claude is running:",J),P}}function wV(){try{let f=FV.window.activeTerminal;if(f)f.show()}catch(f){console.error("Error focusing terminal:",f)}}});var DY=z((Mv)=>{var IV=Mv&&Mv.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),RV=Mv&&Mv.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),WY=Mv&&Mv.__importStar||function(){var f=function(v){return f=Object.getOwnPropertyNames||function(P){var J=[];for(var Q in P)if(Object.prototype.hasOwnProperty.call(P,Q))J[J.length]=Q;return J},f(v)};return function(v){if(v&&v.__esModule)return v;var P={};if(v!=null){for(var J=f(v),Q=0;Q<J.length;Q++)if(J[Q]!=="default")IV(P,v,J[Q])}return RV(P,v),P}}();Object.defineProperty(Mv,"__esModule",{value:!0});Mv.openDiff=SV;Mv.listAllOpenTabs=cf;Mv.waitFor=XJ;var n1=WY(require("vscode")),EV=WY(require("fs")),yV=rf(),zV=MP(),V0;async function SV(f,v,P,J,Q,Y,X,q,G){f.info("diff from",J,"to",Q,"as",X);let V=n1.Uri.file(J);try{if((await n1.workspace.openTextDocument(V)).isDirty){let _=EV.readFileSync(J,"utf8");V=v.createFile(J,_).uri}}catch(Z){f.info("leftTempFileProvider.createFile",J),V=v.createFile(J,"").uri}let O=P.createFile(Q,Y).uri,L=await n1.workspace.openTextDocument(O),K=(Z)=>{return Z.input instanceof n1.TabInputTextDiff&&Z.input.modified.toString()===O.toString()};if(await zV.closeAllDiffTabs(f)>0)await new Promise((Z)=>setTimeout(Z,200));let M={preview:!1},H=Y,I=Y,S=void 0;n1.workspace.onDidChangeTextDocument((Z)=>{if(Z.document.uri.toString()===O.toString()){if(H=I,I=Z.document.getText(),Z.contentChanges.length>3&&Z.reason!==n1.TextDocumentChangeReason.Undo&&Z.reason!==n1.TextDocumentChangeReason.Redo)S={time:Date.now(),contents:H}}});let E=new Promise((Z)=>{G.push(n1.workspace.onWillSaveTextDocument((_)=>{if(_.document.uri.toString()===O.toString()){let j=_.document.getText();if(S&&Date.now()-S.time<500)j=S.contents;Z(j)}}))}),U=!0;if(V0)V0.dispose(),V0=void 0;try{V0=n1.commands.registerCommand("type",(Z)=>{if(U&&n1.window.activeTextEditor?.document.uri.toString()===O.toString())return;return n1.commands.executeCommand("default:type",Z)}),setTimeout(()=>{if(U=!1,V0)V0.dispose(),V0=void 0},1000),G.push(V0)}catch(Z){f.warn("Could not register type command interceptor:",Z)}let g=cf(),C=await n1.commands.executeCommand("vscode.diff",V,O,X,M);f.info("diff result",C,X,V,O,M);try{await XJ(()=>{return cf().some((Z)=>Z.label===X)},1000)}catch(Z){let _=cf().filter((j)=>!g.some((b)=>b.label===j.label)).map((j)=>{return{label:j.label,isDiff:j.isDiff}});throw f.error(`Failed to open diff tab, possibly new tabs: ${JSON.stringify(_)}`),Z}yV.focusTerminal();let k=new Promise((Z)=>{G.push(q((_)=>{if(_.activeTab&&K(_.activeTab))Z(_)}))}).then((Z)=>{if(Z.accepted)return f.info("diff_accepted",X),{content:[{type:"text",text:"FILE_SAVED"},{type:"text",text:L.getText()}]};else return{content:[{type:"text",text:"DIFF_REJECTED"},{type:"text",text:X}]}}),m=XJ(()=>{return!cf().some((Z)=>Z.label===X)}).then(()=>{return f.info("tab_closed",X),{content:[{type:"text",text:"DIFF_REJECTED"},{type:"text",text:X}]}}),T=E.then(async(Z)=>{return f.info("file_saved",X),{content:[{type:"text",text:"FILE_SAVED"},{type:"text",text:Z}]}}),n=[m,k];if(n1.workspace.getConfiguration("files").get("autoSave")==="off")n.push(T);return await Promise.race(n)}function cf(){return n1.window.tabGroups.all.flatMap((f)=>f.tabs.map((v)=>({tab:v,label:v.label,isDiff:v.input instanceof n1.TabInputTextDiff,viewColumn:f.viewColumn,isActive:v.isActive})))}function XJ(f,v){return new Promise((P,J)=>{let Q,Y=setInterval(()=>{if(f()){if(clearInterval(Y),Q)clearTimeout(Q);P()}},100);if(v)Q=setTimeout(()=>{clearInterval(Y),J(new Error(`Timeout waiting after ${v}ms`))},v)})}});var VY=z((AP)=>{Object.defineProperty(AP,"__esModule",{value:!0});AP.setTerminalEnvironmentVariable=UV;AP.getTerminalEnvironmentVariable=gV;async function UV(f,v,P){f.environmentVariableCollection.replace(v,P),console.log(`Set ${v}=${P} in terminal environment (in-memory)`)}function gV(f,v){return f.environmentVariableCollection.get(v)?.value}});var av=z((GN,$Y)=>{var KY=["nodebuffer","arraybuffer","fragments"],BY=typeof Blob!=="undefined";if(BY)KY.push("blob");$Y.exports={BINARY_TYPES:KY,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:BY,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var df=z((WN,FP)=>{var{EMPTY_BUFFER:jV}=av(),qJ=Buffer[Symbol.species];function CV(f,v){if(f.length===0)return jV;if(f.length===1)return f[0];let P=Buffer.allocUnsafe(v),J=0;for(let Q=0;Q<f.length;Q++){let Y=f[Q];P.set(Y,J),J+=Y.length}if(J<v)return new qJ(P.buffer,P.byteOffset,J);return P}function OY(f,v,P,J,Q){for(let Y=0;Y<Q;Y++)P[J+Y]=f[Y]^v[Y&3]}function NY(f,v){for(let P=0;P<f.length;P++)f[P]^=v[P&3]}function ZV(f){if(f.length===f.buffer.byteLength)return f.buffer;return f.buffer.slice(f.byteOffset,f.byteOffset+f.length)}function GJ(f){if(GJ.readOnly=!0,Buffer.isBuffer(f))return f;let v;if(f instanceof ArrayBuffer)v=new qJ(f);else if(ArrayBuffer.isView(f))v=new qJ(f.buffer,f.byteOffset,f.byteLength);else v=Buffer.from(f),GJ.readOnly=!1;return v}FP.exports={concat:CV,mask:OY,toArrayBuffer:ZV,toBuffer:GJ,unmask:NY};if(!process.env.WS_NO_BUFFER_UTIL)try{let f=(()=>{throw new Error("Cannot require module "+"bufferutil");})();FP.exports.mask=function(v,P,J,Q,Y){if(Y<48)OY(v,P,J,Q,Y);else f.mask(v,P,J,Q,Y)},FP.exports.unmask=function(v,P){if(v.length<32)NY(v,P);else f.unmask(v,P)}}catch(f){}});var AY=z((DN,MY)=>{var HY=Symbol("kDone"),WJ=Symbol("kRun");class LY{constructor(f){this[HY]=()=>{this.pending--,this[WJ]()},this.concurrency=f||1/0,this.jobs=[],this.pending=0}add(f){this.jobs.push(f),this[WJ]()}[WJ](){if(this.pending===this.concurrency)return;if(this.jobs.length){let f=this.jobs.shift();this.pending++,f(this[HY])}}}MY.exports=LY});var sf=z((VN,RY)=>{var pf=require("zlib"),FY=df(),TV=AY(),{kStatusCode:hY}=av(),bV=Buffer[Symbol.species],uV=Buffer.from([0,0,255,255]),wP=Symbol("permessage-deflate"),rv=Symbol("total-length"),Bf=Symbol("callback"),K0=Symbol("buffers"),$f=Symbol("error"),hP;class wY{constructor(f,v,P){if(this._maxPayload=P|0,this._options=f||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!v,this._deflate=null,this._inflate=null,this.params=null,!hP){let J=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;hP=new TV(J)}}static get extensionName(){return"permessage-deflate"}offer(){let f={};if(this._options.serverNoContextTakeover)f.server_no_context_takeover=!0;if(this._options.clientNoContextTakeover)f.client_no_context_takeover=!0;if(this._options.serverMaxWindowBits)f.server_max_window_bits=this._options.serverMaxWindowBits;if(this._options.clientMaxWindowBits)f.client_max_window_bits=this._options.clientMaxWindowBits;else if(this._options.clientMaxWindowBits==null)f.client_max_window_bits=!0;return f}accept(f){return f=this.normalizeParams(f),this.params=this._isServer?this.acceptAsServer(f):this.acceptAsClient(f),this.params}cleanup(){if(this._inflate)this._inflate.close(),this._inflate=null;if(this._deflate){let f=this._deflate[Bf];if(this._deflate.close(),this._deflate=null,f)f(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(f){let v=this._options,P=f.find((J)=>{if(v.serverNoContextTakeover===!1&&J.server_no_context_takeover||J.server_max_window_bits&&(v.serverMaxWindowBits===!1||typeof v.serverMaxWindowBits==="number"&&v.serverMaxWindowBits>J.server_max_window_bits)||typeof v.clientMaxWindowBits==="number"&&!J.client_max_window_bits)return!1;return!0});if(!P)throw new Error("None of the extension offers can be accepted");if(v.serverNoContextTakeover)P.server_no_context_takeover=!0;if(v.clientNoContextTakeover)P.client_no_context_takeover=!0;if(typeof v.serverMaxWindowBits==="number")P.server_max_window_bits=v.serverMaxWindowBits;if(typeof v.clientMaxWindowBits==="number")P.client_max_window_bits=v.clientMaxWindowBits;else if(P.client_max_window_bits===!0||v.clientMaxWindowBits===!1)delete P.client_max_window_bits;return P}acceptAsClient(f){let v=f[0];if(this._options.clientNoContextTakeover===!1&&v.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!v.client_max_window_bits){if(typeof this._options.clientMaxWindowBits==="number")v.client_max_window_bits=this._options.clientMaxWindowBits}else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits==="number"&&v.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return v}normalizeParams(f){return f.forEach((v)=>{Object.keys(v).forEach((P)=>{let J=v[P];if(J.length>1)throw new Error(`Parameter "${P}" must have only a single value`);if(J=J[0],P==="client_max_window_bits"){if(J!==!0){let Q=+J;if(!Number.isInteger(Q)||Q<8||Q>15)throw new TypeError(`Invalid value for parameter "${P}": ${J}`);J=Q}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${P}": ${J}`)}else if(P==="server_max_window_bits"){let Q=+J;if(!Number.isInteger(Q)||Q<8||Q>15)throw new TypeError(`Invalid value for parameter "${P}": ${J}`);J=Q}else if(P==="client_no_context_takeover"||P==="server_no_context_takeover"){if(J!==!0)throw new TypeError(`Invalid value for parameter "${P}": ${J}`)}else throw new Error(`Unknown parameter "${P}"`);v[P]=J})}),f}decompress(f,v,P){hP.add((J)=>{this._decompress(f,v,(Q,Y)=>{J(),P(Q,Y)})})}compress(f,v,P){hP.add((J)=>{this._compress(f,v,(Q,Y)=>{J(),P(Q,Y)})})}_decompress(f,v,P){let J=this._isServer?"client":"server";if(!this._inflate){let Q=`${J}_max_window_bits`,Y=typeof this.params[Q]!=="number"?pf.Z_DEFAULT_WINDOWBITS:this.params[Q];this._inflate=pf.createInflateRaw({...this._options.zlibInflateOptions,windowBits:Y}),this._inflate[wP]=this,this._inflate[rv]=0,this._inflate[K0]=[],this._inflate.on("error",_V),this._inflate.on("data",IY)}if(this._inflate[Bf]=P,this._inflate.write(f),v)this._inflate.write(uV);this._inflate.flush(()=>{let Q=this._inflate[$f];if(Q){this._inflate.close(),this._inflate=null,P(Q);return}let Y=FY.concat(this._inflate[K0],this._inflate[rv]);if(this._inflate._readableState.endEmitted)this._inflate.close(),this._inflate=null;else if(this._inflate[rv]=0,this._inflate[K0]=[],v&&this.params[`${J}_no_context_takeover`])this._inflate.reset();P(null,Y)})}_compress(f,v,P){let J=this._isServer?"server":"client";if(!this._deflate){let Q=`${J}_max_window_bits`,Y=typeof this.params[Q]!=="number"?pf.Z_DEFAULT_WINDOWBITS:this.params[Q];this._deflate=pf.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:Y}),this._deflate[rv]=0,this._deflate[K0]=[],this._deflate.on("data",lV)}this._deflate[Bf]=P,this._deflate.write(f),this._deflate.flush(pf.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let Q=FY.concat(this._deflate[K0],this._deflate[rv]);if(v)Q=new bV(Q.buffer,Q.byteOffset,Q.length-4);if(this._deflate[Bf]=null,this._deflate[rv]=0,this._deflate[K0]=[],v&&this.params[`${J}_no_context_takeover`])this._deflate.reset();P(null,Q)})}}RY.exports=wY;function lV(f){this[K0].push(f),this[rv]+=f.length}function IY(f){if(this[rv]+=f.length,this[wP]._maxPayload<1||this[rv]<=this[wP]._maxPayload){this[K0].push(f);return}this[$f]=new RangeError("Max payload size exceeded"),this[$f].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[$f][hY]=1009,this.removeListener("data",IY),this.reset()}function _V(f){if(this[wP]._inflate=null,this[$f]){this[Bf](this[$f]);return}f[hY]=1007,this[Bf](f)}});var Of=z((KN,IP)=>{var{isUtf8:EY}=require("buffer"),{hasBlob:kV}=av(),xV=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function mV(f){return f>=1000&&f<=1014&&f!==1004&&f!==1005&&f!==1006||f>=3000&&f<=4999}function DJ(f){let v=f.length,P=0;while(P<v)if((f[P]&128)===0)P++;else if((f[P]&224)===192){if(P+1===v||(f[P+1]&192)!==128||(f[P]&254)===192)return!1;P+=2}else if((f[P]&240)===224){if(P+2>=v||(f[P+1]&192)!==128||(f[P+2]&192)!==128||f[P]===224&&(f[P+1]&224)===128||f[P]===237&&(f[P+1]&224)===160)return!1;P+=3}else if((f[P]&248)===240){if(P+3>=v||(f[P+1]&192)!==128||(f[P+2]&192)!==128||(f[P+3]&192)!==128||f[P]===240&&(f[P+1]&240)===128||f[P]===244&&f[P+1]>143||f[P]>244)return!1;P+=4}else return!1;return!0}function nV(f){return kV&&typeof f==="object"&&typeof f.arrayBuffer==="function"&&typeof f.type==="string"&&typeof f.stream==="function"&&(f[Symbol.toStringTag]==="Blob"||f[Symbol.toStringTag]==="File")}IP.exports={isBlob:nV,isValidStatusCode:mV,isValidUTF8:DJ,tokenChars:xV};if(EY)IP.exports.isValidUTF8=function(f){return f.length<24?DJ(f):EY(f)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let f=(()=>{throw new Error("Cannot require module "+"utf-8-validate");})();IP.exports.isValidUTF8=function(v){return v.length<32?DJ(v):f(v)}}catch(f){}});var KJ=z((BN,gY)=>{var{Writable:aV}=require("stream"),yY=sf(),{BINARY_TYPES:rV,EMPTY_BUFFER:zY,kStatusCode:cV,kWebSocket:iV}=av(),{concat:VJ,toArrayBuffer:dV,unmask:pV}=df(),{isValidStatusCode:sV,isValidUTF8:SY}=Of(),RP=Buffer[Symbol.species];class UY extends aV{constructor(f={}){super();this._allowSynchronousEvents=f.allowSynchronousEvents!==void 0?f.allowSynchronousEvents:!0,this._binaryType=f.binaryType||rV[0],this._extensions=f.extensions||{},this._isServer=!!f.isServer,this._maxPayload=f.maxPayload|0,this._skipUTF8Validation=!!f.skipUTF8Validation,this[iV]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(f,v,P){if(this._opcode===8&&this._state==0)return P();this._bufferedBytes+=f.length,this._buffers.push(f),this.startLoop(P)}consume(f){if(this._bufferedBytes-=f,f===this._buffers[0].length)return this._buffers.shift();if(f<this._buffers[0].length){let P=this._buffers[0];return this._buffers[0]=new RP(P.buffer,P.byteOffset+f,P.length-f),new RP(P.buffer,P.byteOffset,f)}let v=Buffer.allocUnsafe(f);do{let P=this._buffers[0],J=v.length-f;if(f>=P.length)v.set(this._buffers.shift(),J);else v.set(new Uint8Array(P.buffer,P.byteOffset,f),J),this._buffers[0]=new RP(P.buffer,P.byteOffset+f,P.length-f);f-=P.length}while(f>0);return v}startLoop(f){this._loop=!0;do switch(this._state){case 0:this.getInfo(f);break;case 1:this.getPayloadLength16(f);break;case 2:this.getPayloadLength64(f);break;case 3:this.getMask();break;case 4:this.getData(f);break;case 5:case 6:this._loop=!1;return}while(this._loop);if(!this._errored)f()}getInfo(f){if(this._bufferedBytes<2){this._loop=!1;return}let v=this.consume(2);if((v[0]&48)!==0){let J=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");f(J);return}let P=(v[0]&64)===64;if(P&&!this._extensions[yY.extensionName]){let J=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");f(J);return}if(this._fin=(v[0]&128)===128,this._opcode=v[0]&15,this._payloadLength=v[1]&127,this._opcode===0){if(P){let J=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");f(J);return}if(!this._fragmented){let J=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");f(J);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let J=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");f(J);return}this._compressed=P}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let J=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");f(J);return}if(P){let J=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");f(J);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let J=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");f(J);return}}else{let J=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");f(J);return}if(!this._fin&&!this._fragmented)this._fragmented=this._opcode;if(this._masked=(v[1]&128)===128,this._isServer){if(!this._masked){let J=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");f(J);return}}else if(this._masked){let J=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");f(J);return}if(this._payloadLength===126)this._state=1;else if(this._payloadLength===127)this._state=2;else this.haveLength(f)}getPayloadLength16(f){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(f)}getPayloadLength64(f){if(this._bufferedBytes<8){this._loop=!1;return}let v=this.consume(8),P=v.readUInt32BE(0);if(P>Math.pow(2,21)-1){let J=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");f(J);return}this._payloadLength=P*Math.pow(2,32)+v.readUInt32BE(4),this.haveLength(f)}haveLength(f){if(this._payloadLength&&this._opcode<8){if(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0){let v=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");f(v);return}}if(this._masked)this._state=3;else this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(f){let v=zY;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}if(v=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0)pV(v,this._mask)}if(this._opcode>7){this.controlMessage(v,f);return}if(this._compressed){this._state=5,this.decompress(v,f);return}if(v.length)this._messageLength=this._totalPayloadLength,this._fragments.push(v);this.dataMessage(f)}decompress(f,v){this._extensions[yY.extensionName].decompress(f,this._fin,(J,Q)=>{if(J)return v(J);if(Q.length){if(this._messageLength+=Q.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let Y=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");v(Y);return}this._fragments.push(Q)}if(this.dataMessage(v),this._state===0)this.startLoop(v)})}dataMessage(f){if(!this._fin){this._state=0;return}let v=this._messageLength,P=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let J;if(this._binaryType==="nodebuffer")J=VJ(P,v);else if(this._binaryType==="arraybuffer")J=dV(VJ(P,v));else if(this._binaryType==="blob")J=new Blob(P);else J=P;if(this._allowSynchronousEvents)this.emit("message",J,!0),this._state=0;else this._state=6,setImmediate(()=>{this.emit("message",J,!0),this._state=0,this.startLoop(f)})}else{let J=VJ(P,v);if(!this._skipUTF8Validation&&!SY(J)){let Q=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");f(Q);return}if(this._state===5||this._allowSynchronousEvents)this.emit("message",J,!1),this._state=0;else this._state=6,setImmediate(()=>{this.emit("message",J,!1),this._state=0,this.startLoop(f)})}}controlMessage(f,v){if(this._opcode===8){if(f.length===0)this._loop=!1,this.emit("conclude",1005,zY),this.end();else{let P=f.readUInt16BE(0);if(!sV(P)){let Q=this.createError(RangeError,`invalid status code ${P}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");v(Q);return}let J=new RP(f.buffer,f.byteOffset+2,f.length-2);if(!this._skipUTF8Validation&&!SY(J)){let Q=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");v(Q);return}this._loop=!1,this.emit("conclude",P,J),this.end()}this._state=0;return}if(this._allowSynchronousEvents)this.emit(this._opcode===9?"ping":"pong",f),this._state=0;else this._state=6,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",f),this._state=0,this.startLoop(v)})}createError(f,v,P,J,Q){this._loop=!1,this._errored=!0;let Y=new f(P?`Invalid WebSocket frame: ${v}`:v);return Error.captureStackTrace(Y,this.createError),Y.code=Q,Y[cV]=J,Y}}gY.exports=UY});var $J=z((ON,ZY)=>{var{Duplex:$N}=require("stream"),{randomFillSync:tV}=require("crypto"),jY=sf(),{EMPTY_BUFFER:oV,kWebSocket:eV,NOOP:vK}=av(),{isBlob:Nf,isValidStatusCode:fK}=Of(),{mask:CY,toBuffer:Z0}=df(),Vv=Symbol("kByteLength"),QK=Buffer.alloc(4),T0,Hf=8192,Av=0,PK=1,JK=2;class B0{constructor(f,v,P){if(this._extensions=v||{},P)this._generateMask=P,this._maskBuffer=Buffer.alloc(4);this._socket=f,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=Av,this.onerror=vK,this[eV]=void 0}static frame(f,v){let P,J=!1,Q=2,Y=!1;if(v.mask){if(P=v.maskBuffer||QK,v.generateMask)v.generateMask(P);else{if(Hf===8192){if(T0===void 0)T0=Buffer.alloc(8192);tV(T0,0,8192),Hf=0}P[0]=T0[Hf++],P[1]=T0[Hf++],P[2]=T0[Hf++],P[3]=T0[Hf++]}Y=(P[0]|P[1]|P[2]|P[3])===0,Q=6}let X;if(typeof f==="string")if((!v.mask||Y)&&v[Vv]!==void 0)X=v[Vv];else f=Buffer.from(f),X=f.length;else X=f.length,J=v.mask&&v.readOnly&&!Y;let q=X;if(X>=65536)Q+=8,q=127;else if(X>125)Q+=2,q=126;let G=Buffer.allocUnsafe(J?X+Q:Q);if(G[0]=v.fin?v.opcode|128:v.opcode,v.rsv1)G[0]|=64;if(G[1]=q,q===126)G.writeUInt16BE(X,2);else if(q===127)G[2]=G[3]=0,G.writeUIntBE(X,4,6);if(!v.mask)return[G,f];if(G[1]|=128,G[Q-4]=P[0],G[Q-3]=P[1],G[Q-2]=P[2],G[Q-1]=P[3],Y)return[G,f];if(J)return CY(f,P,G,Q,X),[G];return CY(f,P,f,0,X),[G,f]}close(f,v,P,J){let Q;if(f===void 0)Q=oV;else if(typeof f!=="number"||!fK(f))throw new TypeError("First argument must be a valid error code number");else if(v===void 0||!v.length)Q=Buffer.allocUnsafe(2),Q.writeUInt16BE(f,0);else{let X=Buffer.byteLength(v);if(X>123)throw new RangeError("The message must not be greater than 123 bytes");if(Q=Buffer.allocUnsafe(2+X),Q.writeUInt16BE(f,0),typeof v==="string")Q.write(v,2);else Q.set(v,2)}let Y={[Vv]:Q.length,fin:!0,generateMask:this._generateMask,mask:P,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};if(this._state!==Av)this.enqueue([this.dispatch,Q,!1,Y,J]);else this.sendFrame(B0.frame(Q,Y),J)}ping(f,v,P){let J,Q;if(typeof f==="string")J=Buffer.byteLength(f),Q=!1;else if(Nf(f))J=f.size,Q=!1;else f=Z0(f),J=f.length,Q=Z0.readOnly;if(J>125)throw new RangeError("The data size must not be greater than 125 bytes");let Y={[Vv]:J,fin:!0,generateMask:this._generateMask,mask:v,maskBuffer:this._maskBuffer,opcode:9,readOnly:Q,rsv1:!1};if(Nf(f))if(this._state!==Av)this.enqueue([this.getBlobData,f,!1,Y,P]);else this.getBlobData(f,!1,Y,P);else if(this._state!==Av)this.enqueue([this.dispatch,f,!1,Y,P]);else this.sendFrame(B0.frame(f,Y),P)}pong(f,v,P){let J,Q;if(typeof f==="string")J=Buffer.byteLength(f),Q=!1;else if(Nf(f))J=f.size,Q=!1;else f=Z0(f),J=f.length,Q=Z0.readOnly;if(J>125)throw new RangeError("The data size must not be greater than 125 bytes");let Y={[Vv]:J,fin:!0,generateMask:this._generateMask,mask:v,maskBuffer:this._maskBuffer,opcode:10,readOnly:Q,rsv1:!1};if(Nf(f))if(this._state!==Av)this.enqueue([this.getBlobData,f,!1,Y,P]);else this.getBlobData(f,!1,Y,P);else if(this._state!==Av)this.enqueue([this.dispatch,f,!1,Y,P]);else this.sendFrame(B0.frame(f,Y),P)}send(f,v,P){let J=this._extensions[jY.extensionName],Q=v.binary?2:1,Y=v.compress,X,q;if(typeof f==="string")X=Buffer.byteLength(f),q=!1;else if(Nf(f))X=f.size,q=!1;else f=Z0(f),X=f.length,q=Z0.readOnly;if(this._firstFragment){if(this._firstFragment=!1,Y&&J&&J.params[J._isServer?"server_no_context_takeover":"client_no_context_takeover"])Y=X>=J._threshold;this._compress=Y}else Y=!1,Q=0;if(v.fin)this._firstFragment=!0;let G={[Vv]:X,fin:v.fin,generateMask:this._generateMask,mask:v.mask,maskBuffer:this._maskBuffer,opcode:Q,readOnly:q,rsv1:Y};if(Nf(f))if(this._state!==Av)this.enqueue([this.getBlobData,f,this._compress,G,P]);else this.getBlobData(f,this._compress,G,P);else if(this._state!==Av)this.enqueue([this.dispatch,f,this._compress,G,P]);else this.dispatch(f,this._compress,G,P)}getBlobData(f,v,P,J){this._bufferedBytes+=P[Vv],this._state=JK,f.arrayBuffer().then((Q)=>{if(this._socket.destroyed){let X=new Error("The socket was closed while the blob was being read");process.nextTick(BJ,this,X,J);return}this._bufferedBytes-=P[Vv];let Y=Z0(Q);if(!v)this._state=Av,this.sendFrame(B0.frame(Y,P),J),this.dequeue();else this.dispatch(Y,v,P,J)}).catch((Q)=>{process.nextTick(YK,this,Q,J)})}dispatch(f,v,P,J){if(!v){this.sendFrame(B0.frame(f,P),J);return}let Q=this._extensions[jY.extensionName];this._bufferedBytes+=P[Vv],this._state=PK,Q.compress(f,P.fin,(Y,X)=>{if(this._socket.destroyed){let q=new Error("The socket was closed while data was being compressed");BJ(this,q,J);return}this._bufferedBytes-=P[Vv],this._state=Av,P.readOnly=!1,this.sendFrame(B0.frame(X,P),J),this.dequeue()})}dequeue(){while(this._state===Av&&this._queue.length){let f=this._queue.shift();this._bufferedBytes-=f[3][Vv],Reflect.apply(f[0],this,f.slice(1))}}enqueue(f){this._bufferedBytes+=f[3][Vv],this._queue.push(f)}sendFrame(f,v){if(f.length===2)this._socket.cork(),this._socket.write(f[0]),this._socket.write(f[1],v),this._socket.uncork();else this._socket.write(f[0],v)}}ZY.exports=B0;function BJ(f,v,P){if(typeof P==="function")P(v);for(let J=0;J<f._queue.length;J++){let Q=f._queue[J],Y=Q[Q.length-1];if(typeof Y==="function")Y(v)}}function YK(f,v,P){BJ(f,v,P),f.onerror(v)}});var nY=z((NN,mY)=>{var{kForOnEventAttribute:tf,kListener:OJ}=av(),TY=Symbol("kCode"),bY=Symbol("kData"),uY=Symbol("kError"),lY=Symbol("kMessage"),_Y=Symbol("kReason"),Lf=Symbol("kTarget"),kY=Symbol("kType"),xY=Symbol("kWasClean");class $0{constructor(f){this[Lf]=null,this[kY]=f}get target(){return this[Lf]}get type(){return this[kY]}}Object.defineProperty($0.prototype,"target",{enumerable:!0});Object.defineProperty($0.prototype,"type",{enumerable:!0});class Mf extends $0{constructor(f,v={}){super(f);this[TY]=v.code===void 0?0:v.code,this[_Y]=v.reason===void 0?"":v.reason,this[xY]=v.wasClean===void 0?!1:v.wasClean}get code(){return this[TY]}get reason(){return this[_Y]}get wasClean(){return this[xY]}}Object.defineProperty(Mf.prototype,"code",{enumerable:!0});Object.defineProperty(Mf.prototype,"reason",{enumerable:!0});Object.defineProperty(Mf.prototype,"wasClean",{enumerable:!0});class of extends $0{constructor(f,v={}){super(f);this[uY]=v.error===void 0?null:v.error,this[lY]=v.message===void 0?"":v.message}get error(){return this[uY]}get message(){return this[lY]}}Object.defineProperty(of.prototype,"error",{enumerable:!0});Object.defineProperty(of.prototype,"message",{enumerable:!0});class yP extends $0{constructor(f,v={}){super(f);this[bY]=v.data===void 0?null:v.data}get data(){return this[bY]}}Object.defineProperty(yP.prototype,"data",{enumerable:!0});var XK={addEventListener(f,v,P={}){for(let Q of this.listeners(f))if(!P[tf]&&Q[OJ]===v&&!Q[tf])return;let J;if(f==="message")J=function Q(Y,X){let q=new yP("message",{data:X?Y:Y.toString()});q[Lf]=this,EP(v,this,q)};else if(f==="close")J=function Q(Y,X){let q=new Mf("close",{code:Y,reason:X.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});q[Lf]=this,EP(v,this,q)};else if(f==="error")J=function Q(Y){let X=new of("error",{error:Y,message:Y.message});X[Lf]=this,EP(v,this,X)};else if(f==="open")J=function Q(){let Y=new $0("open");Y[Lf]=this,EP(v,this,Y)};else return;if(J[tf]=!!P[tf],J[OJ]=v,P.once)this.once(f,J);else this.on(f,J)},removeEventListener(f,v){for(let P of this.listeners(f))if(P[OJ]===v&&!P[tf]){this.removeListener(f,P);break}}};mY.exports={CloseEvent:Mf,ErrorEvent:of,Event:$0,EventTarget:XK,MessageEvent:yP};function EP(f,v,P){if(typeof f==="object"&&f.handleEvent)f.handleEvent.call(f,P);else f.call(v,P)}});var NJ=z((HN,aY)=>{var{tokenChars:ef}=Of();function Sv(f,v,P){if(f[v]===void 0)f[v]=[P];else f[v].push(P)}function qK(f){let v=Object.create(null),P=Object.create(null),J=!1,Q=!1,Y=!1,X,q,G=-1,V=-1,B=-1,O=0;for(;O<f.length;O++)if(V=f.charCodeAt(O),X===void 0)if(B===-1&&ef[V]===1){if(G===-1)G=O}else if(O!==0&&(V===32||V===9)){if(B===-1&&G!==-1)B=O}else if(V===59||V===44){if(G===-1)throw new SyntaxError(`Unexpected character at index ${O}`);if(B===-1)B=O;let K=f.slice(G,B);if(V===44)Sv(v,K,P),P=Object.create(null);else X=K;G=B=-1}else throw new SyntaxError(`Unexpected character at index ${O}`);else if(q===void 0)if(B===-1&&ef[V]===1){if(G===-1)G=O}else if(V===32||V===9){if(B===-1&&G!==-1)B=O}else if(V===59||V===44){if(G===-1)throw new SyntaxError(`Unexpected character at index ${O}`);if(B===-1)B=O;if(Sv(P,f.slice(G,B),!0),V===44)Sv(v,X,P),P=Object.create(null),X=void 0;G=B=-1}else if(V===61&&G!==-1&&B===-1)q=f.slice(G,O),G=B=-1;else throw new SyntaxError(`Unexpected character at index ${O}`);else if(Q){if(ef[V]!==1)throw new SyntaxError(`Unexpected character at index ${O}`);if(G===-1)G=O;else if(!J)J=!0;Q=!1}else if(Y)if(ef[V]===1){if(G===-1)G=O}else if(V===34&&G!==-1)Y=!1,B=O;else if(V===92)Q=!0;else throw new SyntaxError(`Unexpected character at index ${O}`);else if(V===34&&f.charCodeAt(O-1)===61)Y=!0;else if(B===-1&&ef[V]===1){if(G===-1)G=O}else if(G!==-1&&(V===32||V===9)){if(B===-1)B=O}else if(V===59||V===44){if(G===-1)throw new SyntaxError(`Unexpected character at index ${O}`);if(B===-1)B=O;let K=f.slice(G,B);if(J)K=K.replace(/\\/g,""),J=!1;if(Sv(P,q,K),V===44)Sv(v,X,P),P=Object.create(null),X=void 0;q=void 0,G=B=-1}else throw new SyntaxError(`Unexpected character at index ${O}`);if(G===-1||Y||V===32||V===9)throw new SyntaxError("Unexpected end of input");if(B===-1)B=O;let L=f.slice(G,B);if(X===void 0)Sv(v,L,P);else{if(q===void 0)Sv(P,L,!0);else if(J)Sv(P,q,L.replace(/\\/g,""));else Sv(P,q,L);Sv(v,X,P)}return v}function GK(f){return Object.keys(f).map((v)=>{let P=f[v];if(!Array.isArray(P))P=[P];return P.map((J)=>{return[v].concat(Object.keys(J).map((Q)=>{let Y=J[Q];if(!Array.isArray(Y))Y=[Y];return Y.map((X)=>X===!0?Q:`${Q}=${X}`).join("; ")})).join("; ")}).join(", ")}).join(", ")}aY.exports={format:GK,parse:qK}});var gP=z((AN,Q7)=>{var WK=require("events"),DK=require("https"),VK=require("http"),iY=require("net"),KK=require("tls"),{randomBytes:BK,createHash:$K}=require("crypto"),{Duplex:LN,Readable:MN}=require("stream"),{URL:HJ}=require("url"),O0=sf(),OK=KJ(),NK=$J(),{isBlob:HK}=Of(),{BINARY_TYPES:rY,EMPTY_BUFFER:zP,GUID:LK,kForOnEventAttribute:LJ,kListener:MK,kStatusCode:AK,kWebSocket:U1,NOOP:dY}=av(),{EventTarget:{addEventListener:FK,removeEventListener:hK}}=nY(),{format:wK,parse:IK}=NJ(),{toBuffer:RK}=df(),pY=Symbol("kAborted"),MJ=[8,13],cv=["CONNECTING","OPEN","CLOSING","CLOSED"],EK=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class s extends WK{constructor(f,v,P){super();if(this._binaryType=rY[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=zP,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=s.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,f!==null){if(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,v===void 0)v=[];else if(!Array.isArray(v))if(typeof v==="object"&&v!==null)P=v,v=[];else v=[v];sY(this,f,v,P)}else this._autoPong=P.autoPong,this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(f){if(!rY.includes(f))return;if(this._binaryType=f,this._receiver)this._receiver._binaryType=f}get bufferedAmount(){if(!this._socket)return this._bufferedAmount;return this._socket._writableState.length+this._sender._bufferedBytes}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(f,v,P){let J=new OK({allowSynchronousEvents:P.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:P.maxPayload,skipUTF8Validation:P.skipUTF8Validation}),Q=new NK(f,this._extensions,P.generateMask);if(this._receiver=J,this._sender=Q,this._socket=f,J[U1]=this,Q[U1]=this,f[U1]=this,J.on("conclude",SK),J.on("drain",UK),J.on("error",gK),J.on("message",jK),J.on("ping",CK),J.on("pong",ZK),Q.onerror=TK,f.setTimeout)f.setTimeout(0);if(f.setNoDelay)f.setNoDelay();if(v.length>0)f.unshift(v);f.on("close",eY),f.on("data",UP),f.on("end",v7),f.on("error",f7),this._readyState=s.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=s.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}if(this._extensions[O0.extensionName])this._extensions[O0.extensionName].cleanup();this._receiver.removeAllListeners(),this._readyState=s.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(f,v){if(this.readyState===s.CLOSED)return;if(this.readyState===s.CONNECTING){vv(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===s.CLOSING){if(this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted))this._socket.end();return}this._readyState=s.CLOSING,this._sender.close(f,v,!this._isServer,(P)=>{if(P)return;if(this._closeFrameSent=!0,this._closeFrameReceived||this._receiver._writableState.errorEmitted)this._socket.end()}),oY(this)}pause(){if(this.readyState===s.CONNECTING||this.readyState===s.CLOSED)return;this._paused=!0,this._socket.pause()}ping(f,v,P){if(this.readyState===s.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof f==="function")P=f,f=v=void 0;else if(typeof v==="function")P=v,v=void 0;if(typeof f==="number")f=f.toString();if(this.readyState!==s.OPEN){AJ(this,f,P);return}if(v===void 0)v=!this._isServer;this._sender.ping(f||zP,v,P)}pong(f,v,P){if(this.readyState===s.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof f==="function")P=f,f=v=void 0;else if(typeof v==="function")P=v,v=void 0;if(typeof f==="number")f=f.toString();if(this.readyState!==s.OPEN){AJ(this,f,P);return}if(v===void 0)v=!this._isServer;this._sender.pong(f||zP,v,P)}resume(){if(this.readyState===s.CONNECTING||this.readyState===s.CLOSED)return;if(this._paused=!1,!this._receiver._writableState.needDrain)this._socket.resume()}send(f,v,P){if(this.readyState===s.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof v==="function")P=v,v={};if(typeof f==="number")f=f.toString();if(this.readyState!==s.OPEN){AJ(this,f,P);return}let J={binary:typeof f!=="string",mask:!this._isServer,compress:!0,fin:!0,...v};if(!this._extensions[O0.extensionName])J.compress=!1;this._sender.send(f||zP,J,P)}terminate(){if(this.readyState===s.CLOSED)return;if(this.readyState===s.CONNECTING){vv(this,this._req,"WebSocket was closed before the connection was established");return}if(this._socket)this._readyState=s.CLOSING,this._socket.destroy()}}Object.defineProperty(s,"CONNECTING",{enumerable:!0,value:cv.indexOf("CONNECTING")});Object.defineProperty(s.prototype,"CONNECTING",{enumerable:!0,value:cv.indexOf("CONNECTING")});Object.defineProperty(s,"OPEN",{enumerable:!0,value:cv.indexOf("OPEN")});Object.defineProperty(s.prototype,"OPEN",{enumerable:!0,value:cv.indexOf("OPEN")});Object.defineProperty(s,"CLOSING",{enumerable:!0,value:cv.indexOf("CLOSING")});Object.defineProperty(s.prototype,"CLOSING",{enumerable:!0,value:cv.indexOf("CLOSING")});Object.defineProperty(s,"CLOSED",{enumerable:!0,value:cv.indexOf("CLOSED")});Object.defineProperty(s.prototype,"CLOSED",{enumerable:!0,value:cv.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((f)=>{Object.defineProperty(s.prototype,f,{enumerable:!0})});["open","error","close","message"].forEach((f)=>{Object.defineProperty(s.prototype,`on${f}`,{enumerable:!0,get(){for(let v of this.listeners(f))if(v[LJ])return v[MK];return null},set(v){for(let P of this.listeners(f))if(P[LJ]){this.removeListener(f,P);break}if(typeof v!=="function")return;this.addEventListener(f,v,{[LJ]:!0})}})});s.prototype.addEventListener=FK;s.prototype.removeEventListener=hK;Q7.exports=s;function sY(f,v,P,J){let Q={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:MJ[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...J,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(f._autoPong=Q.autoPong,!MJ.includes(Q.protocolVersion))throw new RangeError(`Unsupported protocol version: ${Q.protocolVersion} (supported versions: ${MJ.join(", ")})`);let Y;if(v instanceof HJ)Y=v;else try{Y=new HJ(v)}catch(M){throw new SyntaxError(`Invalid URL: ${v}`)}if(Y.protocol==="http:")Y.protocol="ws:";else if(Y.protocol==="https:")Y.protocol="wss:";f._url=Y.href;let X=Y.protocol==="wss:",q=Y.protocol==="ws+unix:",G;if(Y.protocol!=="ws:"&&!X&&!q)G=`The URL's protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"`;else if(q&&!Y.pathname)G="The URL's pathname is empty";else if(Y.hash)G="The URL contains a fragment identifier";if(G){let M=new SyntaxError(G);if(f._redirects===0)throw M;else{SP(f,M);return}}let V=X?443:80,B=BK(16).toString("base64"),O=X?DK.request:VK.request,L=new Set,K;if(Q.createConnection=Q.createConnection||(X?zK:yK),Q.defaultPort=Q.defaultPort||V,Q.port=Y.port||V,Q.host=Y.hostname.startsWith("[")?Y.hostname.slice(1,-1):Y.hostname,Q.headers={...Q.headers,"Sec-WebSocket-Version":Q.protocolVersion,"Sec-WebSocket-Key":B,Connection:"Upgrade",Upgrade:"websocket"},Q.path=Y.pathname+Y.search,Q.timeout=Q.handshakeTimeout,Q.perMessageDeflate)K=new O0(Q.perMessageDeflate!==!0?Q.perMessageDeflate:{},!1,Q.maxPayload),Q.headers["Sec-WebSocket-Extensions"]=wK({[O0.extensionName]:K.offer()});if(P.length){for(let M of P){if(typeof M!=="string"||!EK.test(M)||L.has(M))throw new SyntaxError("An invalid or duplicated subprotocol was specified");L.add(M)}Q.headers["Sec-WebSocket-Protocol"]=P.join(",")}if(Q.origin)if(Q.protocolVersion<13)Q.headers["Sec-WebSocket-Origin"]=Q.origin;else Q.headers.Origin=Q.origin;if(Y.username||Y.password)Q.auth=`${Y.username}:${Y.password}`;if(q){let M=Q.path.split(":");Q.socketPath=M[0],Q.path=M[1]}let N;if(Q.followRedirects){if(f._redirects===0){f._originalIpc=q,f._originalSecure=X,f._originalHostOrSocketPath=q?Q.socketPath:Y.host;let M=J&&J.headers;if(J={...J,headers:{}},M)for(let[H,I]of Object.entries(M))J.headers[H.toLowerCase()]=I}else if(f.listenerCount("redirect")===0){let M=q?f._originalIpc?Q.socketPath===f._originalHostOrSocketPath:!1:f._originalIpc?!1:Y.host===f._originalHostOrSocketPath;if(!M||f._originalSecure&&!X){if(delete Q.headers.authorization,delete Q.headers.cookie,!M)delete Q.headers.host;Q.auth=void 0}}if(Q.auth&&!J.headers.authorization)J.headers.authorization="Basic "+Buffer.from(Q.auth).toString("base64");if(N=f._req=O(Q),f._redirects)f.emit("redirect",f.url,N)}else N=f._req=O(Q);if(Q.timeout)N.on("timeout",()=>{vv(f,N,"Opening handshake has timed out")});if(N.on("error",(M)=>{if(N===null||N[pY])return;N=f._req=null,SP(f,M)}),N.on("response",(M)=>{let H=M.headers.location,I=M.statusCode;if(H&&Q.followRedirects&&I>=300&&I<400){if(++f._redirects>Q.maxRedirects){vv(f,N,"Maximum redirects exceeded");return}N.abort();let S;try{S=new HJ(H,v)}catch(E){let U=new SyntaxError(`Invalid URL: ${H}`);SP(f,U);return}sY(f,S,P,J)}else if(!f.emit("unexpected-response",N,M))vv(f,N,`Unexpected server response: ${M.statusCode}`)}),N.on("upgrade",(M,H,I)=>{if(f.emit("upgrade",M),f.readyState!==s.CONNECTING)return;N=f._req=null;let S=M.headers.upgrade;if(S===void 0||S.toLowerCase()!=="websocket"){vv(f,H,"Invalid Upgrade header");return}let E=$K("sha1").update(B+LK).digest("base64");if(M.headers["sec-websocket-accept"]!==E){vv(f,H,"Invalid Sec-WebSocket-Accept header");return}let U=M.headers["sec-websocket-protocol"],g;if(U!==void 0){if(!L.size)g="Server sent a subprotocol but none was requested";else if(!L.has(U))g="Server sent an invalid subprotocol"}else if(L.size)g="Server sent no subprotocol";if(g){vv(f,H,g);return}if(U)f._protocol=U;let C=M.headers["sec-websocket-extensions"];if(C!==void 0){if(!K){vv(f,H,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let k;try{k=IK(C)}catch(T){vv(f,H,"Invalid Sec-WebSocket-Extensions header");return}let m=Object.keys(k);if(m.length!==1||m[0]!==O0.extensionName){vv(f,H,"Server indicated an extension that was not requested");return}try{K.accept(k[O0.extensionName])}catch(T){vv(f,H,"Invalid Sec-WebSocket-Extensions header");return}f._extensions[O0.extensionName]=K}f.setSocket(H,I,{allowSynchronousEvents:Q.allowSynchronousEvents,generateMask:Q.generateMask,maxPayload:Q.maxPayload,skipUTF8Validation:Q.skipUTF8Validation})}),Q.finishRequest)Q.finishRequest(N,f);else N.end()}function SP(f,v){f._readyState=s.CLOSING,f._errorEmitted=!0,f.emit("error",v),f.emitClose()}function yK(f){return f.path=f.socketPath,iY.connect(f)}function zK(f){if(f.path=void 0,!f.servername&&f.servername!=="")f.servername=iY.isIP(f.host)?"":f.host;return KK.connect(f)}function vv(f,v,P){f._readyState=s.CLOSING;let J=new Error(P);if(Error.captureStackTrace(J,vv),v.setHeader){if(v[pY]=!0,v.abort(),v.socket&&!v.socket.destroyed)v.socket.destroy();process.nextTick(SP,f,J)}else v.destroy(J),v.once("error",f.emit.bind(f,"error")),v.once("close",f.emitClose.bind(f))}function AJ(f,v,P){if(v){let J=HK(v)?v.size:RK(v).length;if(f._socket)f._sender._bufferedBytes+=J;else f._bufferedAmount+=J}if(P){let J=new Error(`WebSocket is not open: readyState ${f.readyState} (${cv[f.readyState]})`);process.nextTick(P,J)}}function SK(f,v){let P=this[U1];if(P._closeFrameReceived=!0,P._closeMessage=v,P._closeCode=f,P._socket[U1]===void 0)return;if(P._socket.removeListener("data",UP),process.nextTick(tY,P._socket),f===1005)P.close();else P.close(f,v)}function UK(){let f=this[U1];if(!f.isPaused)f._socket.resume()}function gK(f){let v=this[U1];if(v._socket[U1]!==void 0)v._socket.removeListener("data",UP),process.nextTick(tY,v._socket),v.close(f[AK]);if(!v._errorEmitted)v._errorEmitted=!0,v.emit("error",f)}function cY(){this[U1].emitClose()}function jK(f,v){this[U1].emit("message",f,v)}function CK(f){let v=this[U1];if(v._autoPong)v.pong(f,!this._isServer,dY);v.emit("ping",f)}function ZK(f){this[U1].emit("pong",f)}function tY(f){f.resume()}function TK(f){let v=this[U1];if(v.readyState===s.CLOSED)return;if(v.readyState===s.OPEN)v._readyState=s.CLOSING,oY(v);if(this._socket.end(),!v._errorEmitted)v._errorEmitted=!0,v.emit("error",f)}function oY(f){f._closeTimer=setTimeout(f._socket.destroy.bind(f._socket),30000)}function eY(){let f=this[U1];this.removeListener("close",eY),this.removeListener("data",UP),this.removeListener("end",v7),f._readyState=s.CLOSING;let v;if(!this._readableState.endEmitted&&!f._closeFrameReceived&&!f._receiver._writableState.errorEmitted&&(v=f._socket.read())!==null)f._receiver.write(v);if(f._receiver.end(),this[U1]=void 0,clearTimeout(f._closeTimer),f._receiver._writableState.finished||f._receiver._writableState.errorEmitted)f.emitClose();else f._receiver.on("error",cY),f._receiver.on("finish",cY)}function UP(f){if(!this[U1]._receiver.write(f))this.pause()}function v7(){let f=this[U1];f._readyState=s.CLOSING,f._receiver.end(),this.end()}function f7(){let f=this[U1];if(this.removeListener("error",f7),this.on("error",dY),f)f._readyState=s.CLOSING,this.destroy()}});var X7=z((hN,Y7)=>{var FN=gP(),{Duplex:bK}=require("stream");function P7(f){f.emit("close")}function uK(){if(!this.destroyed&&this._writableState.finished)this.destroy()}function J7(f){if(this.removeListener("error",J7),this.destroy(),this.listenerCount("error")===0)this.emit("error",f)}function lK(f,v){let P=!0,J=new bK({...v,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return f.on("message",function Q(Y,X){let q=!X&&J._readableState.objectMode?Y.toString():Y;if(!J.push(q))f.pause()}),f.once("error",function Q(Y){if(J.destroyed)return;P=!1,J.destroy(Y)}),f.once("close",function Q(){if(J.destroyed)return;J.push(null)}),J._destroy=function(Q,Y){if(f.readyState===f.CLOSED){Y(Q),process.nextTick(P7,J);return}let X=!1;if(f.once("error",function q(G){X=!0,Y(G)}),f.once("close",function q(){if(!X)Y(Q);process.nextTick(P7,J)}),P)f.terminate()},J._final=function(Q){if(f.readyState===f.CONNECTING){f.once("open",function Y(){J._final(Q)});return}if(f._socket===null)return;if(f._socket._writableState.finished){if(Q(),J._readableState.endEmitted)J.destroy()}else f._socket.once("finish",function Y(){Q()}),f.close()},J._read=function(){if(f.isPaused)f.resume()},J._write=function(Q,Y,X){if(f.readyState===f.CONNECTING){f.once("open",function q(){J._write(Q,Y,X)});return}f.send(Q,X)},J.on("end",uK),J.on("error",J7),J}Y7.exports=lK});var G7=z((wN,q7)=>{var{tokenChars:_K}=Of();function kK(f){let v=new Set,P=-1,J=-1,Q=0;for(Q;Q<f.length;Q++){let X=f.charCodeAt(Q);if(J===-1&&_K[X]===1){if(P===-1)P=Q}else if(Q!==0&&(X===32||X===9)){if(J===-1&&P!==-1)J=Q}else if(X===44){if(P===-1)throw new SyntaxError(`Unexpected character at index ${Q}`);if(J===-1)J=Q;let q=f.slice(P,J);if(v.has(q))throw new SyntaxError(`The "${q}" subprotocol is duplicated`);v.add(q),P=J=-1}else throw new SyntaxError(`Unexpected character at index ${Q}`)}if(P===-1||J!==-1)throw new SyntaxError("Unexpected end of input");let Y=f.slice(P,Q);if(v.has(Y))throw new SyntaxError(`The "${Y}" subprotocol is duplicated`);return v.add(Y),v}q7.exports={parse:kK}});var B7=z((RN,K7)=>{var xK=require("events"),jP=require("http"),{Duplex:IN}=require("stream"),{createHash:mK}=require("crypto"),W7=NJ(),b0=sf(),nK=G7(),aK=gP(),{GUID:rK,kWebSocket:cK}=av(),iK=/^[+/0-9A-Za-z]{22}==$/;class V7 extends xK{constructor(f,v){super();if(f={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:aK,...f},f.port==null&&!f.server&&!f.noServer||f.port!=null&&(f.server||f.noServer)||f.server&&f.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(f.port!=null)this._server=jP.createServer((P,J)=>{let Q=jP.STATUS_CODES[426];J.writeHead(426,{"Content-Length":Q.length,"Content-Type":"text/plain"}),J.end(Q)}),this._server.listen(f.port,f.host,f.backlog,v);else if(f.server)this._server=f.server;if(this._server){let P=this.emit.bind(this,"connection");this._removeListeners=dK(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(J,Q,Y)=>{this.handleUpgrade(J,Q,Y,P)}})}if(f.perMessageDeflate===!0)f.perMessageDeflate={};if(f.clientTracking)this.clients=new Set,this._shouldEmitClose=!1;this.options=f,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');if(!this._server)return null;return this._server.address()}close(f){if(this._state===2){if(f)this.once("close",()=>{f(new Error("The server is not running"))});process.nextTick(vQ,this);return}if(f)this.once("close",f);if(this._state===1)return;if(this._state=1,this.options.noServer||this.options.server){if(this._server)this._removeListeners(),this._removeListeners=this._server=null;if(this.clients)if(!this.clients.size)process.nextTick(vQ,this);else this._shouldEmitClose=!0;else process.nextTick(vQ,this)}else{let v=this._server;this._removeListeners(),this._removeListeners=this._server=null,v.close(()=>{vQ(this)})}}shouldHandle(f){if(this.options.path){let v=f.url.indexOf("?");if((v!==-1?f.url.slice(0,v):f.url)!==this.options.path)return!1}return!0}handleUpgrade(f,v,P,J){v.on("error",D7);let Q=f.headers["sec-websocket-key"],Y=f.headers.upgrade,X=+f.headers["sec-websocket-version"];if(f.method!=="GET"){u0(this,f,v,405,"Invalid HTTP method");return}if(Y===void 0||Y.toLowerCase()!=="websocket"){u0(this,f,v,400,"Invalid Upgrade header");return}if(Q===void 0||!iK.test(Q)){u0(this,f,v,400,"Missing or invalid Sec-WebSocket-Key header");return}if(X!==13&&X!==8){u0(this,f,v,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});return}if(!this.shouldHandle(f)){fQ(v,400);return}let q=f.headers["sec-websocket-protocol"],G=new Set;if(q!==void 0)try{G=nK.parse(q)}catch(O){u0(this,f,v,400,"Invalid Sec-WebSocket-Protocol header");return}let V=f.headers["sec-websocket-extensions"],B={};if(this.options.perMessageDeflate&&V!==void 0){let O=new b0(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let L=W7.parse(V);if(L[b0.extensionName])O.accept(L[b0.extensionName]),B[b0.extensionName]=O}catch(L){u0(this,f,v,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let O={origin:f.headers[`${X===8?"sec-websocket-origin":"origin"}`],secure:!!(f.socket.authorized||f.socket.encrypted),req:f};if(this.options.verifyClient.length===2){this.options.verifyClient(O,(L,K,N,M)=>{if(!L)return fQ(v,K||401,N,M);this.completeUpgrade(B,Q,G,f,v,P,J)});return}if(!this.options.verifyClient(O))return fQ(v,401)}this.completeUpgrade(B,Q,G,f,v,P,J)}completeUpgrade(f,v,P,J,Q,Y,X){if(!Q.readable||!Q.writable)return Q.destroy();if(Q[cK])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return fQ(Q,503);let G=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${mK("sha1").update(v+rK).digest("base64")}`],V=new this.options.WebSocket(null,void 0,this.options);if(P.size){let B=this.options.handleProtocols?this.options.handleProtocols(P,J):P.values().next().value;if(B)G.push(`Sec-WebSocket-Protocol: ${B}`),V._protocol=B}if(f[b0.extensionName]){let B=f[b0.extensionName].params,O=W7.format({[b0.extensionName]:[B]});G.push(`Sec-WebSocket-Extensions: ${O}`),V._extensions=f}if(this.emit("headers",G,J),Q.write(G.concat(`\r
`).join(`\r
`)),Q.removeListener("error",D7),V.setSocket(Q,Y,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients)this.clients.add(V),V.on("close",()=>{if(this.clients.delete(V),this._shouldEmitClose&&!this.clients.size)process.nextTick(vQ,this)});X(V,J)}}K7.exports=V7;function dK(f,v){for(let P of Object.keys(v))f.on(P,v[P]);return function P(){for(let J of Object.keys(v))f.removeListener(J,v[J])}}function vQ(f){f._state=2,f.emit("close")}function D7(){this.destroy()}function fQ(f,v,P,J){P=P||jP.STATUS_CODES[v],J={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(P),...J},f.once("finish",f.destroy),f.end(`HTTP/1.1 ${v} ${jP.STATUS_CODES[v]}\r
`+Object.keys(J).map((Q)=>`${Q}: ${J[Q]}`).join(`\r
`)+`\r
\r
`+P)}function u0(f,v,P,J,Q,Y){if(f.listenerCount("wsClientError")){let X=new Error(Q);Error.captureStackTrace(X,u0),f.emit("wsClientError",X,P,v)}else fQ(P,J,Q,Y)}});var FJ=z((EN,$7)=>{var iv=gP();iv.createWebSocketStream=X7();iv.Server=B7();iv.Receiver=KJ();iv.Sender=$J();iv.WebSocket=iv;iv.WebSocketServer=iv.Server;$7.exports=iv});var N7=z((Af)=>{var pK=Af&&Af.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Af,"__esModule",{value:!0});Af.WebSocketTransport=void 0;var QQ=pK(FJ()),sK=_f();class O7{ws;started=!1;opened;constructor(f){this.ws=f,this.opened=new Promise((v,P)=>{if(this.ws.readyState===QQ.default.OPEN)v();else this.ws.on("open",()=>{v()}),this.ws.on("error",(J)=>{P(J)})}),this.ws.on("message",this.onMessageHandler),this.ws.on("error",this.onErrorHandler),this.ws.on("close",this.onCloseHandler)}onclose;onerror;onmessage;onMessageHandler=(f)=>{try{let v=JSON.parse(f.toString("utf-8")),P=sK.JSONRPCMessageSchema.parse(v);this.onmessage?.(P)}catch(v){this.onErrorHandler(v)}};onErrorHandler=(f)=>{this.onerror?.(f instanceof Error?f:new Error("Failed to process message"))};onCloseHandler=()=>{this.onclose?.(),this.ws.off("message",this.onMessageHandler),this.ws.off("error",this.onErrorHandler),this.ws.off("close",this.onCloseHandler)};async start(){if(this.started)throw new Error("Start can only be called once per transport.");if(await this.opened,this.ws.readyState!==QQ.default.OPEN)throw new Error("WebSocket is not open. Cannot start transport.");this.started=!0}async close(){if(this.ws.readyState===QQ.default.OPEN||this.ws.readyState===QQ.default.CONNECTING)this.ws.close();this.onCloseHandler()}async send(f){if(this.ws.readyState!==QQ.default.OPEN)throw new Error("WebSocket is not open. Cannot send message.");let v=JSON.stringify(f);try{await new Promise((P,J)=>{this.ws.send(v,(Q)=>{if(Q)J(Q);else P()})})}catch(P){throw this.onErrorHandler(P),P}}}Af.WebSocketTransport=O7});var M7=z((Fv)=>{var tK=Fv&&Fv.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),oK=Fv&&Fv.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),eK=Fv&&Fv.__importStar||function(){var f=function(v){return f=Object.getOwnPropertyNames||function(P){var J=[];for(var Q in P)if(Object.prototype.hasOwnProperty.call(P,Q))J[J.length]=Q;return J},f(v)};return function(v){if(v&&v.__esModule)return v;var P={};if(v!=null){for(var J=f(v),Q=0;Q<J.length;Q++)if(J[Q]!=="default")tK(P,v,J[Q])}return oK(P,v),P}}();Object.defineProperty(Fv,"__esModule",{value:!0});Fv.getLastSelection=vB;Fv.setupSelectionChangeHandling=fB;Fv.setupAtMentionedHandling=QB;var H7=eK(require("vscode")),L7=MP(),dv=null;function vB(){return dv}function fB(f,v){let P=null,J=H7.window.onDidChangeTextEditorSelection((Q)=>{let Y=Q.textEditor,X=Y.selection,q=Y.document,V={text:q.getText(X),filePath:q.uri.fsPath,fileUrl:q.uri.toString(),selection:{start:{line:X.start.line,character:X.start.character},end:{line:X.end.line,character:X.end.character},isEmpty:X.isEmpty}},B=!dv||dv.text!==V.text||dv.filePath!==V.filePath||dv.selection.start.line!==V.selection.start.line||dv.selection.start.character!==V.selection.start.character||dv.selection.end.line!==V.selection.end.line||dv.selection.end.character!==V.selection.end.character;dv=V;let O=v();if(B&&O&&f.server){if(P)clearTimeout(P);P=setTimeout(()=>{let L=v();if(L)L7.sendSelectionChanged(V,L)},300)}});return{dispose:()=>{if(J.dispose(),P)clearTimeout(P)}}}function QB(f,v,P){f(()=>{let J=H7.window.activeTextEditor;if(!J)return;let Q=J.selection,Y={filePath:J.document.uri.fsPath};if(!Q.isEmpty)Y.lineStart=Q.start.line,Y.lineEnd=Q.end.line;let X=P();if(X&&v.server)L7.sendAtMentioned(Y,X)})}});var MP=z((fv)=>{var PB=fv&&fv.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),JB=fv&&fv.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),h7=fv&&fv.__importStar||function(){var f=function(v){return f=Object.getOwnPropertyNames||function(P){var J=[];for(var Q in P)if(Object.prototype.hasOwnProperty.call(P,Q))J[J.length]=Q;return J},f(v)};return function(v){if(v&&v.__esModule)return v;var P={};if(v!=null){for(var J=f(v),Q=0;Q<J.length;Q++)if(J[Q]!=="default")PB(P,v,J[Q])}return JB(P,v),P}}();Object.defineProperty(fv,"__esModule",{value:!0});fv.createMcpServer=OB;fv.startMcpServer=NB;fv.closeAllDiffTabs=I7;fv.sendSelectionChanged=E7;fv.sendAtMentioned=LB;var Uv=h7(require("vscode")),YB=require("crypto"),XB=t5(),qB=h7(require("http")),l0=QY(),GB=PY(),ZP=qY(),a1=kv(),WB=DY(),A7=VY(),DB=QJ(),VB=FJ(),KB=N7(),F7=rf(),CP=M7();function BB(){let f=Uv.env.appName,v;switch(f.toLowerCase()){case"visual studio code":v="Claude Code VSCode MCP";break;case"cursor":v="Claude Code Cursor MCP";break;case"windsurf":v="Claude Code Windsurf MCP";break;default:v=`Claude Code ${f} MCP`}return v}function $B(f,v,P,J){f.logged.event((Q)=>{let Y=J();if(Y&&v.server)R7(P,Q,Y);else hJ.push(Q)})}function OB(f,v,P,J,Q,Y,X){let q=new XB.McpServer({name:BB(),version:f.extension.packageJSON.version||"0.0.1"});q.tool("openDiff","Open a git diff for the file",{old_file_path:a1.z.string().describe("Path to the file to show diff for. If not provided, uses active editor."),new_file_path:a1.z.string().describe("Path to the file to show diff for. If not provided, uses active editor."),new_file_contents:a1.z.string().describe("Contents of the new file. If not provided then the current file contents of new_file_path will be used."),tab_name:a1.z.string().describe("Path to the file to show diff for. If not provided, uses active editor.")},async({old_file_path:S,new_file_path:E,new_file_contents:U,tab_name:g})=>{let C=[];try{return await WB.openDiff(J,v,P,S,E,U,g,Q,C)}catch(k){throw J.error(`Error opening diff: ${k}`),k}finally{for(let k of C)k.dispose()}}),q.tool("getDiagnostics","Get language diagnostics from VS Code",{uri:a1.z.string().optional().describe("Optional file URI to get diagnostics for. If not provided, gets diagnostics for all files.")},l0.handleGetDiagnostics),q.tool("close_tab",{tab_name:a1.z.string()},async({tab_name:S})=>{return await HB(S,J),setTimeout(()=>{F7.focusTerminal()},500),{content:[{type:"text",text:"TAB_CLOSED"}]}}),q.tool("closeAllDiffTabs","Close all diff tabs in the editor",{},async()=>{let S=await I7(J);return setTimeout(()=>{F7.focusTerminal()},500),{content:[{type:"text",text:`CLOSED_${S}_DIFF_TABS`}]}}),q.tool("openFile","Open a file in the editor and optionally select a range of text",{filePath:a1.z.string().describe("Path to the file to open"),preview:a1.z.boolean().describe("Whether to open the file in preview mode").default(!1),startText:a1.z.string().describe("Text pattern to find the start of the selection range. Selects from the beginning of this match."),endText:a1.z.string().describe("Text pattern to find the end of the selection range. Selects up to the end of this match. If not provided, only the startText match will be selected."),selectToEndOfLine:a1.z.boolean().describe("If true, selection will extend to the end of the line containing the endText match.").default(!1),makeFrontmost:a1.z.boolean().describe("Whether to make the file the active editor tab. If false, the file will be opened in the background without changing focus.").default(!0)},{readOnlyHint:!0},l0.handleOpenFile),q.tool("getOpenEditors","Get information about currently open editors",{},l0.handleGetOpenEditors),q.tool("getWorkspaceFolders","Get all workspace folders currently open in the IDE",{},l0.handleGetWorkspaceFolders),q.tool("getCurrentSelection","Get the current text selection in the active editor",{},l0.handleGetCurrentSelection),q.tool("checkDocumentDirty","Check if a document has unsaved changes (is dirty)",{filePath:a1.z.string().describe("Path to the file to check")},l0.handleCheckDocumentDirty),q.tool("saveDocument","Save a document with unsaved changes",{filePath:a1.z.string().describe("Path to the file to save")},l0.handleSaveDocument),q.tool("getLatestSelection","Get the most recent text selection (even if not in the active editor)",{},async()=>{return{content:[{type:"text",text:JSON.stringify(CP.getLastSelection()||{success:!1,message:"No selection available"},null,2)}]}}),q.tool("executeCode",`Execute python code in the Jupyter kernel for the current notebook file.
    
    All code will be executed in the current Jupyter kernel.
    
    Avoid declaring variables or modifying the state of the kernel unless the user
    explicitly asks for it.
    
    Any code executed will persist across calls to this tool, unless the kernel
    has been restarted.`,{code:a1.z.string().describe("The code to be executed on the kernel.")},({code:S})=>{return GB.handleExecuteCode(J,S)});let G=qB.createServer(),V=new VB.WebSocketServer({server:G}),B=null,O=null,L=DB.DiagnosticStreamManager.getInstance(J),K=YB.randomUUID();V.on("connection",function(S,E){if(E.headers["x-claude-code-ide-authorization"]!==K){J.error("Unauthorized WebSocket connection attempt"),S.close(1008,"Unauthorized");return}if(J.info("New WS connection from:",E.url||"unknown"),B){if(J.info("Disconnecting previous WebSocket client"),O)L.unregisterClient(O),J.info(`Unregistered previous diagnostic client: ${O}`),O=null;try{B.close()}catch(C){J.error("Error closing previous transport:",C)}}let U=new KB.WebSocketTransport(S);B=U;let g=null;q.connect(U).then(()=>{J.info("MCP server connected to transport"),g=L.registerClient((C)=>{U.send({jsonrpc:"2.0",method:"diagnostics_changed",params:{uris:C}}).catch((k)=>{J.error("Error sending diagnostics notification:",k.message)})}),O=g,J.info(`Registered diagnostic client: ${g}`),setTimeout(()=>{let C=CP.getLastSelection();if(C)E7(C,U);let k=[...hJ];hJ.length=0;for(let m of k)R7(J,m,U)},500)}).catch((C)=>{console.error("Error connecting transport:",C),B=null;try{S.close()}catch(k){J.error("Error closing WebSocket:",k)}}),S.on("close",()=>{if(J.info("WS client disconnected"),B===U){if(B=null,g&&O===g)L.unregisterClient(g),J.info(`Unregistered diagnostic client: ${g}`),O=null}})});let N=()=>B;$B(X,q,J,N),CP.setupAtMentionedHandling(Y,q,N);let M=CP.setupSelectionChangeHandling(q,N),H=null;G.on("listening",()=>{let S=G.address();if(S&&typeof S!=="string")H=S.port});let I=Uv.workspace.onDidChangeWorkspaceFolders(()=>{if(H!==null)ZP.createLockFile(H,K),J.info(`Updated lock file for port ${H} with new workspace folders`)});return{httpServer:G,authToken:K,dispose:async()=>{if(H!==null)ZP.deleteLockFile(H),J.info(`Deleted lock file for port ${H}`);if(M.dispose(),I.dispose(),L.dispose(),G.close(),typeof q.close==="function")await q.close()}}}async function NB(f,v,P,J){try{let Q=await ZP.findAvailablePort(),Y=null;return new Promise((X,q)=>{f.listen(Q,"127.0.0.1",async()=>{J.info(`MCP Server running on port ${Q} (localhost only)`),Y=ZP.createLockFile(Q,v),console.log(`Created lock file at ${Y}`);try{await A7.setTerminalEnvironmentVariable(P,"CLAUDE_CODE_SSE_PORT",String(Q)),await A7.setTerminalEnvironmentVariable(P,"ENABLE_IDE_INTEGRATION","true"),X(Q)}catch(G){console.error("Failed to set environment variables:",G),q(G)}}).on("error",(G)=>{console.error("Failed to start MCP server:",G),Uv.window.showErrorMessage(`Failed to start MCP server: ${G}`),q(G)})})}catch(Q){throw console.error("Failed to start MCP server:",Q),Uv.window.showErrorMessage(`Failed to start MCP server: ${Q}`),Q}}async function w7(f,v){let P=f.input;if(P instanceof Uv.TabInputTextDiff)try{await(await Uv.workspace.openTextDocument(P.modified)).save()}catch(J){v.error("Error saving modified file:",J)}await Uv.window.tabGroups.close(f)}async function HB(f,v){for(let P of Uv.window.tabGroups.all)for(let J of P.tabs)if(J.label===f)return await w7(J,v),!0;return!1}async function I7(f){let v=0;f.info("Closing all diff tabs in the editor...");for(let P of Uv.window.tabGroups.all)for(let J of P.tabs)if(J.input instanceof Uv.TabInputTextDiff&&J.label.includes("[Claude Code]"))await w7(J,f),v++;return f.info(`Closed ${v} diff tabs.`),v}function R7(f,v,P){f.info("Logging event:",v.eventName,v.eventData);let J={eventName:v.eventName,eventData:v.eventData??{}};P.send({jsonrpc:"2.0",method:"log_event",params:J}).catch((Q)=>{f.error("Error sending log event:",Q)})}var hJ=[];async function E7(f,v){try{v.send({jsonrpc:"2.0",method:"selection_changed",params:f}).catch((P)=>{console.error("Error sending selection change notification:",P)})}catch(P){console.error("Error sending selection change notification:",P)}}async function LB(f,v){try{v.send({jsonrpc:"2.0",method:"at_mentioned",params:f}).catch((P)=>{console.error("Error sending at-mentioned notification:",P)})}catch(P){console.error("Error sending at-mentioned notification:",P)}}});var z7=z((UN,y7)=>{y7.exports=function f(v){return v.map(function(P){if(P==="")return"''";if(P&&typeof P==="object")return P.op.replace(/(.)/g,"\\$1");if(/["\s\\]/.test(P)&&!/'/.test(P))return"'"+P.replace(/(['])/g,"\\$1")+"'";if(/["'\s]/.test(P))return'"'+P.replace(/(["\\$`!])/g,"\\$1")+'"';return String(P).replace(/([A-Za-z]:)?([#!"$&'()*,:;<=>?@[\\\]^`{|}])/g,"$1\\$2")}).join(" ")}});var T7=z((gN,Z7)=>{var C7="(?:"+["\\|\\|","\\&\\&",";;","\\|\\&","\\<\\(","\\<\\<\\<",">>",">\\&","<\\&","[&;()|<>]"].join("|")+")",S7=new RegExp("^"+C7+"$"),U7="|&;()<> \\t",MB='"((\\\\"|[^"])*?)"',AB="'((\\\\'|[^'])*?)'",FB=/^#$/,g7="'",j7='"',wJ="$",_0="",hB=4294967296;for(TP=0;TP<4;TP++)_0+=(hB*Math.random()).toString(16);var TP,wB=new RegExp("^"+_0);function IB(f,v){var P=v.lastIndex,J=[],Q;while(Q=v.exec(f))if(J.push(Q),v.lastIndex===Q.index)v.lastIndex+=1;return v.lastIndex=P,J}function RB(f,v,P){var J=typeof f==="function"?f(P):f[P];if(typeof J==="undefined"&&P!="")J="";else if(typeof J==="undefined")J="$";if(typeof J==="object")return v+_0+JSON.stringify(J)+_0;return v+J}function EB(f,v,P){if(!P)P={};var J=P.escape||"\\",Q="(\\"+J+`['"`+U7+`]|[^\\s'"`+U7+"])+",Y=new RegExp(["("+C7+")","("+Q+"|"+MB+"|"+AB+")+"].join("|"),"g"),X=IB(f,Y);if(X.length===0)return[];if(!v)v={};var q=!1;return X.map(function(G){var V=G[0];if(!V||q)return;if(S7.test(V))return{op:V};var B=!1,O=!1,L="",K=!1,N;function M(){N+=1;var S,E,U=V.charAt(N);if(U==="{"){if(N+=1,V.charAt(N)==="}")throw new Error("Bad substitution: "+V.slice(N-2,N+1));if(S=V.indexOf("}",N),S<0)throw new Error("Bad substitution: "+V.slice(N));E=V.slice(N,S),N=S}else if(/[*@#?$!_-]/.test(U))E=U,N+=1;else{var g=V.slice(N);if(S=g.match(/[^\w\d_]/),!S)E=g,N=V.length;else E=g.slice(0,S.index),N+=S.index-1}return RB(v,"",E)}for(N=0;N<V.length;N++){var H=V.charAt(N);if(K=K||!B&&(H==="*"||H==="?"),O)L+=H,O=!1;else if(B)if(H===B)B=!1;else if(B==g7)L+=H;else if(H===J)if(N+=1,H=V.charAt(N),H===j7||H===J||H===wJ)L+=H;else L+=J+H;else if(H===wJ)L+=M();else L+=H;else if(H===j7||H===g7)B=H;else if(S7.test(H))return{op:V};else if(FB.test(H)){q=!0;var I={comment:f.slice(G.index+N+1)};if(L.length)return[L,I];return[I]}else if(H===J)O=!0;else if(H===wJ)L+=M();else L+=H}if(K)return{op:"glob",pattern:L};return L}).reduce(function(G,V){return typeof V==="undefined"?G:G.concat(V)},[])}Z7.exports=function f(v,P,J){var Q=EB(v,P,J);if(typeof P!=="function")return Q;return Q.reduce(function(Y,X){if(typeof X==="object")return Y.concat(X);var q=X.split(RegExp("("+_0+".*?"+_0+")","g"));if(q.length===1)return Y.concat(q[0]);return Y.concat(q.filter(Boolean).map(function(G){if(wB.test(G))return JSON.parse(G.split(_0)[1]);return G}))},[])}});var b7=z((IJ)=>{IJ.quote=z7();IJ.parse=T7()});var _7=z((Kv)=>{var yB=Kv&&Kv.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),zB=Kv&&Kv.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),u7=Kv&&Kv.__importStar||function(){var f=function(v){return f=Object.getOwnPropertyNames||function(P){var J=[];for(var Q in P)if(Object.prototype.hasOwnProperty.call(P,Q))J[J.length]=Q;return J},f(v)};return function(v){if(v&&v.__esModule)return v;var P={};if(v!=null){for(var J=f(v),Q=0;Q<J.length;Q++)if(J[Q]!=="default")yB(P,v,J[Q])}return zB(P,v),P}}();Object.defineProperty(Kv,"__esModule",{value:!0});Kv.findOrLaunchClaude=jB;Kv.registerRunClaudeCommand=ZB;Kv.registerAcceptOrRejectCommands=TB;Kv.registerInsertAtMentionedCommand=bB;var g1=u7(require("vscode")),SB=u7(require("path")),UB=rf(),gB=b7(),RJ=rf();async function jB(f,v,P=!0){let J=await CB(f);if(J)return{terminal:J,claudeRunning:!0};return l7(f,v,P)}async function CB(f){let v,P=!1,J=process.env.CLAUDE_CODE_TERMINAL_TITLE||"Claude Code";for(let Q of g1.window.terminals)if(Q.name===J){v=Q;try{if(await Q.processId){let X=await UB.isClaudeRunningInTerminal(f,Q);P=X.claudeRunning,f.info("Claude running check result:",X)}}catch(Y){f.error("Error checking if Claude is running:",Y)}break}if(v&&P)return f.info("Focusing existing Claude terminal"),v.show(),v}async function l7(f,v,P=!0,J){if(f.info("Creating new Claude terminal"),P)g1.window.withProgress({location:g1.ProgressLocation.Notification,title:"Claude Code launching...",cancellable:!1},async(X)=>{return new Promise((q)=>setTimeout(q,2000))});let Q=g1.window.createTerminal({name:process.env.CLAUDE_CODE_TERMINAL_TITLE||"Claude Code",iconPath:g1.Uri.file(SB.join(v.extensionPath,"resources","claude-logo.svg")),location:{viewColumn:g1.ViewColumn.Beside},isTransient:!0});g1.window.onDidEndTerminalShellExecution((X)=>{if(X.terminal===Q&&X.execution.commandLine.value.startsWith("claude "))f.info(`Claude terminal closed after executing ${X.execution.commandLine.value}`),Q.dispose()});let Y=!1;return g1.window.onDidChangeTerminalShellIntegration(async(X)=>{let q="claude";if(J)q=gB.quote(["claude",J]);if(X.terminal===Q&&!Y)Y=!0,f.info("Terminal shell integration available"),X.shellIntegration.executeCommand(q)}),setTimeout(()=>{if(!Q.shellIntegration&&!Y)Y=!0,Q.sendText("claude")},3000),Q.show(),{terminal:Q,claudeRunning:!0}}function ZB(f,v,P){let J=async()=>{try{await l7(f,v)}catch(Q){f.error("Error running Claude Code:",Q),g1.window.showErrorMessage(`Failed to run Claude Code: ${Q}`)}};v.subscriptions.push(g1.commands.registerCommand("claude-code.runClaude",()=>{P.logEvent("run_claude_command"),J()})),v.subscriptions.push(g1.commands.registerCommand("claude-code.runClaude.keyboard",()=>{P.logEvent("run_claude_command_keyboard"),J()}))}function TB(f){let v=new g1.EventEmitter;return f.push(g1.commands.registerCommand("claude-code.acceptProposedDiff",async()=>{let P=g1.window.tabGroups.activeTabGroup.activeTab;v.fire({accepted:!0,activeTab:P}),RJ.focusTerminal()})),f.push(g1.commands.registerCommand("claude-code.rejectProposedDiff",async()=>{let P=g1.window.tabGroups.activeTabGroup.activeTab;v.fire({accepted:!1,activeTab:P}),RJ.focusTerminal()})),v.event}function bB(f){let v=new g1.EventEmitter;return f.push(g1.commands.registerCommand("claude-code.insertAtMentioned",async()=>{v.fire({}),RJ.focusTerminal()})),v.event}});var x7=z((gv)=>{var uB=gv&&gv.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),lB=gv&&gv.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),_B=gv&&gv.__importStar||function(){var f=function(v){return f=Object.getOwnPropertyNames||function(P){var J=[];for(var Q in P)if(Object.prototype.hasOwnProperty.call(P,Q))J[J.length]=Q;return J},f(v)};return function(v){if(v&&v.__esModule)return v;var P={};if(v!=null){for(var J=f(v),Q=0;Q<J.length;Q++)if(J[Q]!=="default")uB(P,v,J[Q])}return lB(P,v),P}}();Object.defineProperty(gv,"__esModule",{value:!0});gv.EventLogger=void 0;var kB=_B(require("vscode"));class k7{logged=new kB.EventEmitter;logEvent(f,v){this.logged.fire({eventName:f,eventData:v})}}gv.EventLogger=k7});var a7=z((jv)=>{var xB=jv&&jv.__createBinding||(Object.create?function(f,v,P,J){if(J===void 0)J=P;var Q=Object.getOwnPropertyDescriptor(v,P);if(!Q||("get"in Q?!v.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return v[P]}};Object.defineProperty(f,J,Q)}:function(f,v,P,J){if(J===void 0)J=P;f[J]=v[P]}),mB=jv&&jv.__setModuleDefault||(Object.create?function(f,v){Object.defineProperty(f,"default",{enumerable:!0,value:v})}:function(f,v){f.default=v}),nB=jv&&jv.__importStar||function(){var f=function(v){return f=Object.getOwnPropertyNames||function(P){var J=[];for(var Q in P)if(Object.prototype.hasOwnProperty.call(P,Q))J[J.length]=Q;return J},f(v)};return function(v){if(v&&v.__esModule)return v;var P={};if(v!=null){for(var J=f(v),Q=0;Q<J.length;Q++)if(J[Q]!=="default")xB(P,v,J[Q])}return mB(P,v),P}}();Object.defineProperty(jv,"__esModule",{value:!0});jv.activateExtension=rB;jv.deactivate=cB;var Ff=nB(require("vscode")),m7=cJ(),n7=MP(),EJ=_7(),aB=x7();function rB(f,v,P=!1){f.subscriptions.push(v);let J=new aB.EventLogger;v.info("Claude code extension is now active?");let Q=new m7.TempFileProvider("_claude_fs_left");f.subscriptions.push(Ff.workspace.registerFileSystemProvider(Q.scheme,Q));let Y=new m7.TempFileProvider("_claude_fs_right");f.subscriptions.push(Ff.workspace.registerFileSystemProvider(Y.scheme,Y)),f.subscriptions.push(iB(Y.scheme));let X=EJ.registerAcceptOrRejectCommands(f.subscriptions),q=EJ.registerInsertAtMentionedCommand(f.subscriptions);if(!P)EJ.registerRunClaudeCommand(v,f,J);try{let{httpServer:G,authToken:V,dispose:B}=n7.createMcpServer(f,Q,Y,v,X,q,J);n7.startMcpServer(G,V,f,v).catch((O)=>{v.error("Failed to start MCP server:",O),Ff.window.showErrorMessage(`Failed to start MCP server: ${O}`)}),f.subscriptions.push({dispose:async()=>{await B()}})}catch(G){v.error("Error during extension activation:",G),Ff.window.showErrorMessage(`Failed to activate Claude Code extension: ${G}`)}}function cB(){console.log("Claude code extension is now deactivated")}function iB(f){return Ff.window.onDidChangeVisibleTextEditors((v)=>{let P=v.some((J)=>J?.document.uri.scheme===f);Ff.commands.executeCommand("setContext","claude-code.viewingProposedDiff",P)})}});var r7=z((bP)=>{Object.defineProperty(bP,"__esModule",{value:!0});bP.activateExtension=void 0;var dB=a7();Object.defineProperty(bP,"activateExtension",{enumerable:!0,get:function(){return dB.activateExtension}})});var sB={};HX(sB,{activate:()=>pB});module.exports=NX(sB);var c7=mJ(require("vscode")),i7=mJ(r7());function pB(f){let v=c7.window.createOutputChannel("Claude Code",{log:!0});i7.activateExtension(f,v)}

//# debugId=EE858009BC84EBFC64756E2164756E21
